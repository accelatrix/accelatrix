/* Accelatrix v1.6.9 */
/* Copyright (c) 2024 Miguel@Ferreira-family.org */
/* License agreement: https://github.com/accelatrix/accelatrix/blob/main/LICENSE.md */
/* Latest version availabe at: */
/* •	https://ferreira-family.org/accelatrix/accelatrix.min.js */
/* •	https://www.npmjs.com/package/accelatrix */
/* •	https://github.com/accelatrix/accelatrix */
/* •	https://www.nuget.org/packages/Accelatrix */
var Accelatrix,__extends=this&&this.__extends||(()=>{var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}})();(Accelatrix=>{Accelatrix.Version="1.6.9";var Base,Exception=(_super=>{function Exception(message){var message=_super.call(this,String.IsNullOrWhiteSpace(message)?"Unspecified exception.":message)||this,theMessage=message.message;return Object.defineProperty(message,"$type",{enumerable:!0,configurable:!0,get:function(){return"Accelatrix.Exception"}}),Object.defineProperty(message,"Message",{enumerable:!0,get:function(){return theMessage}}),message}return __extends(Exception,_super),Object.defineProperty(Exception.prototype,"Message",{get:function(){return this.message},enumerable:!1,configurable:!0}),Exception})(Error),ArgumentNullException=(_super=>{function ArgumentNullException(message,argumentName){argumentName=null==argumentName||0==argumentName.trim().length?"Argument '"+message+"' cannot be null.":message,message=_super.call(this,argumentName)||this;return Object.defineProperty(message,"$type",{enumerable:!0,configurable:!0,get:function(){return"Accelatrix.ArgumentNullException"}}),message}return __extends(ArgumentNullException,_super),ArgumentNullException})(Accelatrix.Exception=Exception),ArgumentNullException=(Accelatrix.ArgumentNullException=ArgumentNullException,(_super=>{function ArgumentException(message,argumentName){argumentName=String.IsNullOrWhiteSpace(argumentName)?"Argument '"+message+"' is unexpected.":message,message=_super.call(this,argumentName)||this;return Object.defineProperty(message,"$type",{enumerable:!0,configurable:!0,get:function(){return"Accelatrix.ArgumentException"}}),message}return __extends(ArgumentException,_super),ArgumentException})(Exception)),ArgumentNullException=(Accelatrix.ArgumentException=ArgumentNullException,(_super=>{function AbortException(message){message=_super.call(this,String.IsNullOrWhiteSpace(message)?"Abort":message)||this;return Object.defineProperty(message,"$type",{enumerable:!0,configurable:!0,get:function(){return"Accelatrix.AbortException"}}),message}return __extends(AbortException,_super),AbortException})(Exception));function ImmutableObject(constructor){function f(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];null!=args&&(args=[void 0].concat(args));var _this=new(original.bind.apply(original,args));return _this.__proto__.constructor=f,ImmutableObject.Freeze(_this),_this}var original=constructor,constructor=(Object.defineProperty(f,"name",{value:original.name}),constructor.toString().substring(constructor.toString().indexOf("(")+1,constructor.toString().indexOf(")")).trim().split(",").map(function(z){return z.trim()}));return 0<constructor.length&&Object.defineProperty(f,"ConstructorArgs",{value:constructor}),f.prototype=original.prototype,f.__proto__=original.__proto__,Object.keys(original).forEach(function(z){return f[z]=original[z]}),f}Accelatrix.AbortException=ArgumentNullException,Accelatrix.ImmutableObject=ImmutableObject,(ImmutableObject=>{ImmutableObject.IsFrozen=function(obj){return null!=obj&&Object.isFrozen(obj)},ImmutableObject.Freeze=function(obj,propagate){var myType,hashCode,originalHasher;null==obj||ImmutableObject.IsFrozen(obj)||(myType=obj.GetType()).IsPrimitive&&!myType.IsArray&&"Object"!=myType.Name||(propagate&&Object.getOwnPropertyNames(obj).filter(function(z){return"GetType"!=z&&"GetHashCode"!=z&&"Equals"!=z&&"ToString"!=z&&"$type"!=z}).map(function(z){return Base.SafePropertyReader(obj,z)}).filter(function(z){return null!=z}).forEach(function(z){return ImmutableObject.Freeze(z,!0)}),hashCode=null,originalHasher=obj.GetHashCode.bind(obj),Object.defineProperty(obj,"GetHashCode",{value:function(){return null==hashCode&&(hashCode=originalHasher(),originalHasher=null),hashCode},enumerable:!1}),Object.freeze(obj))}})(ImmutableObject=Accelatrix.ImmutableObject||(Accelatrix.ImmutableObject={})),(Base=>{Base.SafePropertyReader=function(instance,name){try{var result=null==instance?null:instance[name];return null==result||result===instance||result===this?null:result}catch(ex){return null}},Object.defineProperty(Accelatrix.Exception.prototype.constructor,"name",{get:function(){return"Exception"}}),Object.defineProperty(Accelatrix.AbortException.prototype.constructor,"name",{get:function(){return"AbortException"}}),Object.defineProperty(Accelatrix.ArgumentException.prototype.constructor,"name",{get:function(){return"ArgumentException"}}),Object.defineProperty(Accelatrix.ArgumentNullException.prototype.constructor,"name",{get:function(){return"ArgumentNullException"}})})(Base=Base||{})})(Accelatrix=Accelatrix||{}),Object.defineProperty(Object.prototype,"GetHashCode",{value:function(persistHashCode){function returnAndPersist(hashCode){return 1!=persistHashCode||Object.isFrozen(_this_1)||Object.defineProperty(_this_1,"GetHashCode",{value:function(){return hashCode},enumerable:!1}),hashCode}var hash1,hash3,me,_this_1=this,myType=this.GetType();if(myType==Accelatrix.Type.Date)return this.getTime();if(myType==Accelatrix.Type.Boolean)return 1==this?1:0;if(myType==Accelatrix.Type.Number&&this-Math.floor(this)==0)return Number(this);if(myType.IsArray)return hash1=0,this.forEach(function(value,index){hash1+=null==value?-1*(index+1)*(index%2==0?-1:1):(index+1)*value.GetHashCode()*(index%2==0?-1:1)}),returnAndPersist(hash1);if(myType.IsPrimitive&&"Object"!=myType.Name){for(var hash2=0,temp=this.toString(),index=0;index<temp.length;index++)hash2+=(index+1)*temp.charCodeAt(index)*(index%2==0?-1:1);return hash2*=temp.length+1}return null!=this.Id?this.Id.GetHashCode():null!=this.id?this.id.GetHashCode():null!=this.uid?this.uid.GetHashCode():null!=this.isEqualNode&&null!=this.outerHTML?this.outerHTML.GetHashCode():(hash3=0,me=this,myType.GetProperties().map(function(z){return z.Name}).concat(myType.GetFields().map(function(z){return z.Name})).concat(Object.keys(this)).filter(function(value,index,array){return array.indexOf(value)===index}).filter(function(z){return"GetType"!=z&&"GetHashCode"!=z&&"Equals"!=z&&"ToString"!=z&&"__proto__"!=z&&"$type"!=z}).map(function(z){return{Key:z,Value:((instance,name)=>{try{var result=null===instance?null:instance[name];return null==result||result===instance||result===me?null:result}catch(ex){return null}})(_this_1,z)}}).forEach(function(z){hash3+=null==z.Value?z.Key.GetHashCode()-1:z.Key.GetHashCode()+z.Value.GetHashCode()}),returnAndPersist(hash3))},enumerable:!1,configurable:!0}),Object.defineProperty(Object.prototype,"Equals",{value:function(obj){var _this_1=this;if(null==obj)return 0==this&&this instanceof Boolean;if(this!=obj){if(null!=this.isEqualNode&&null!=obj.isEqualNode)return this.isEqualNode(obj);var myType=this.GetType(),otherType=obj.GetType();if(myType.IsPrimitive&&!otherType.IsPrimitive)return!1;if(!myType.IsPrimitive&&otherType.IsPrimitive)return!1;if(myType.IsPrimitive&&"Object"!=otherType.Name){if("String"==myType.Name)return this==obj.toString()||this==obj.ToString();if("RegExp"==myType.Name||"Number"==myType.Name)return this.toString()==obj.toString()||this.ToString()==obj.ToString();if("Date"==myType.Name)return this.toString()==obj.toString()||this.ToString()==obj.ToString()||this.getTime().toString()==obj.toString();if("Boolean"==myType.Name)return 1==this?1==obj||-1==obj||"true"==obj.toString():0==obj||null==obj||"false"==obj.toString();if("Function"==myType.Name)return this.toString()==obj.toString();if(myType.IsArray&&this.length!=obj.length)return!1}if(null!=Object.getOwnPropertyDescriptor(this,"GetHashCode")&&null!=Object.getOwnPropertyDescriptor(obj,"GetHashCode")&&this.GetHashCode()!=obj.GetHashCode())return!1;for(var me=this,safePropertyReader=function(instance,name){try{var result=null==instance?null:instance[name];return null==result||result===instance||result===me?null:result}catch(ex){return null}},myPropertiesMapToTheirs=myType.GetProperties().map(function(z){return z.Name}).concat(myType.GetFields().map(function(z){return z.Name})).concat(Object.keys(this)).filter(function(value,index,array){return array.indexOf(value)===index}).filter(function(z){return"GetType"!=z&&"GetHashCode"!=z&&"Equals"!=z&&"ToString"!=z&&"__proto__"!=z&&"$type"!=z}).map(function(z){return{Key:z,Value:safePropertyReader(_this_1,z)}}).map(function(z){return{Key:z.Key,Value:z.Value,TheirValue:safePropertyReader(obj,z.Key)}}),i=0;i<myPropertiesMapToTheirs.length;i++)if(null==myPropertiesMapToTheirs[i].TheirValue&&null!=myPropertiesMapToTheirs[i].Value||null!=myPropertiesMapToTheirs[i].TheirValue&&null==myPropertiesMapToTheirs[i].Value)return!1;for(i=0;i<myPropertiesMapToTheirs.length;i++)if(null!=myPropertiesMapToTheirs[i].Value&&!myPropertiesMapToTheirs[i].Value.Equals(myPropertiesMapToTheirs[i].TheirValue))return!1}return!0},enumerable:!1,configurable:!0}),Object.defineProperty(Object,"AreEqual",{value:function(first,second){return first==second||!(null===first&&null!==second||null===second&&null!==first)&&(null==first&&null==second||(null!=first||null==second)&&first.Equals(second))},enumerable:!1,configurable:!0}),Object.defineProperty(Object.prototype,"ToString",{value:function(formatting){return null==this?null:this instanceof Date?Accelatrix.Globalization.FormatDate(this,null,formatting):this instanceof Number?Accelatrix.Globalization.FormatNumber(this,formatting):Accelatrix.Quantity.IsQuantity(this)?Accelatrix.Quantity.Format(this,formatting):this.toString()},enumerable:!1,configurable:!0});
Object.defineProperty(String.prototype,"Latinise",{value:function(){var LatinMap={"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"A","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ö":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"a","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"o","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"};return String.IsNullOrWhiteSpace(this)?this:this.toString().replace(/[^A-Za-z0-9\[\] ]/g,function(a){return LatinMap[a]||a})},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"SplitCamelCase",{value:function(){return null==this?null:this.match(/[A-Z][a-z]+/g)},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"EndsWith",{value:function(suffix){return!String.IsNullOrWhiteSpace(suffix)&&!String.IsNullOrWhiteSpace(this)&&-1!==this.indexOf(suffix,this.length-suffix.length)},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"Format",{value:function(arg0,arg1,arg2,arg3,arg4,arg5,arg6,arg7,arg8,arg9){var temp;return String.IsNullOrWhiteSpace(this)?this:(temp=this.toString(),void 0!==arg0&&(temp=temp.replace(/\{0}/g,null==arg0?"":arg0.ToString())),void 0!==arg1&&(temp=temp.replace(/\{1}/g,null==arg1?"":arg1.ToString())),void 0!==arg2&&(temp=temp.replace(/\{2}/g,null==arg2?"":arg2.ToString())),void 0!==arg3&&(temp=temp.replace(/\{3}/g,null==arg3?"":arg3.ToString())),void 0!==arg4&&(temp=temp.replace(/\{4}/g,null==arg4?"":arg4.ToString())),void 0!==arg5&&(temp=temp.replace(/\{5}/g,null==arg5?"":arg5.ToString())),void 0!==arg6&&(temp=temp.replace(/\{6}/g,null==arg6?"":arg6.ToString())),void 0!==arg7&&(temp=temp.replace(/\{7}/g,null==arg7?"":arg7.ToString())),void 0!==arg8&&(temp=temp.replace(/\{8}/g,null==arg8?"":arg8.ToString())),void 0!==arg9?temp.replace(/\{9}/g,null==arg9?"":arg9.ToString()):temp)},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"Replace",{value:function(str,replaceWhat,replaceWith){if(null==str)return null;if(null==replaceWhat||0==replaceWhat.length)return str.toString();if(replaceWhat==replaceWith)return str.toString();if(str.indexOf(replaceWhat)<0)return str.toString();for(var temp=str.toString().replace(replaceWhat,replaceWith);null!=replaceWhat&&0<replaceWhat.length&&0<=temp.indexOf(replaceWhat);)temp=temp.replace(replaceWhat,replaceWith);return temp.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(String,"IsNullOrWhiteSpace",{value:function(text){return null==text||null!=text.trim&&0==text.trim().length},enumerable:!1,configurable:!0});
var __extends=this&&this.__extends||(()=>{var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}})(),Accelatrix;!function(Accelatrix_1){var Type=(()=>{function Type(constructor,sampleInstance,namespace){if(null==constructor)throw new Accelatrix.ArgumentNullException("constructor");if(!(constructor instanceof Function))throw new Accelatrix.ArgumentException("constructor");sampleInstance={Constructor:constructor,Type:this,SampleInstance:sampleInstance,Namespace:namespace};LazyGetter(function(){return constructor},this,"GetConstructor",!0),TypeSystem.RegisterType(sampleInstance)}function TypeException(typeName,message){if(String.IsNullOrWhiteSpace(typeName))throw new Accelatrix.ArgumentNullException("typeName");typeName=String.IsNullOrWhiteSpace(message)?"Type '"+typeName+"' could not be found or is ambiguous.":message,typeName=_super.call(this,typeName)||this;return Object.defineProperty(typeName,"$type",{enumerable:!0,configurable:!0,get:function(){return"Accelatrix.Type.TypeException"}}),Object.defineProperty(typeName,"TypeName",{get:function(){return message},enumerable:!0}),typeName}var _super;return Object.defineProperty(Type.prototype,"IsPrimitive",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"IsEnum",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"IsArray",{get:function(){return this==TypeSystem.LoadedTypes()[4].Type||this==TypeSystem.LoadedTypes()[5].Type||this==TypeSystem.LoadedTypes()[6].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"IsClass",{get:function(){return!this.IsPrimitive&&!this.IsArray&&!this.IsEnum},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"IsFunction",{get:function(){return this==TypeSystem.LoadedTypes()[8].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"Name",{get:function(){return null==this.GetConstructor().name?"(anonymous)":this.GetConstructor().name},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"Alias",{get:function(){var _this=this;return LazyGetter(function(){return TypeSystem.GetAlias(_this)},this,"Alias",!1,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"BaseType",{get:function(){var _this=this;return this.IsPrimitive?null:LazyGetter(function(){return TypeSystem.GetTypeForConstructor(_this.GetConstructor().__proto__,_this)},this,"BaseType",!1,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"LoadedTypes",{get:function(){return TypeSystem.LoadedTypes().map(function(z){return z.Type})},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"String",{get:function(){return TypeSystem.LoadedTypes()[0].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"Number",{get:function(){return TypeSystem.LoadedTypes()[1].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"Boolean",{get:function(){return TypeSystem.LoadedTypes()[2].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"Date",{get:function(){return TypeSystem.LoadedTypes()[3].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"Array",{get:function(){return TypeSystem.LoadedTypes()[4].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"ByteArray",{get:function(){return TypeSystem.LoadedTypes()[6].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"Object",{get:function(){return TypeSystem.LoadedTypes()[7].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"Function",{get:function(){return TypeSystem.LoadedTypes()[8].Type},enumerable:!1,configurable:!0}),Type.prototype.GetConstructor=function(){return null},Type.prototype.GetFullName=function(){var _this=this,result=LazyGetter(function(){return TypeSystem.GetNamespace(_this)},this,"GetFullName",!0,!1);return null==result?this.Name:result},Type.prototype.GetProperties=function(){var _this=this;return LazyGetter(function(){return TypeSystem.GetProperties(_this)},this,"GetProperties",!0,!0)},Type.prototype.GetFields=function(){var _this=this;return LazyGetter(function(){return TypeSystem.GetFields(_this)},this,"GetFields",!0,!1)},Type.prototype.CreateNewInstance=function(constructorArgs){return TypeSystem.Instantiate(this,constructorArgs)},Type.prototype.IsOfType=function(type){if(null==type)return!1;if(this==type)return!0;if(this.GetConstructor()==type)return!0;if(null==type.IsPrimitive&&type instanceof Function&&null!=type.name){if(this==(type=TypeSystem.GetTypeForConstructor(type)))return!0}else if(type instanceof String||"string"==typeof type){if(String.IsNullOrWhiteSpace(type))throw new Accelatrix.ArgumentNullException("type");var types=Type.FromName(type.toString());if(null==types||0==types.length)throw new Type.TypeNotFoundException(type.toString());if(1<types.length)throw new Type.AmbiguousTypeException(type.toString(),null,types);type=types[0]}return null!=type&&type.IsAssignableFrom(this)},Type.prototype.IsAssignableFrom=function(type){if(null!=type){if(this==type)return!0;if(this.GetConstructor()==type)return!0;if(null==type.IsPrimitive&&type instanceof Function&&null!=type.name){if(this==(type=TypeSystem.GetTypeForConstructor(type)))return!0}else if(type instanceof String||"string"==typeof type){if(String.IsNullOrWhiteSpace(type))throw new Accelatrix.ArgumentNullException("type");var types=Type.FromName(type.toString());if(null==types||0==types.length)throw new Type.TypeNotFoundException(type.toString());if(1<types.length)throw new Type.AmbiguousTypeException(type.toString(),null,types);type=types[0]}for(var currentType=null==type?null:type.BaseType;null!=currentType;){if(currentType==this)return!0;currentType=currentType.BaseType}}return!1},Type.prototype.toString=function(){return this.GetFullName()},Type.FromInstance=function(obj){if(null==obj)throw new Accelatrix.ArgumentNullException("object");if(null==obj.__proto__)throw new Accelatrix.ArgumentException("Argument 'object' is not an object.","object");return null!=obj.hasOwnProperty&&obj.hasOwnProperty("GetType")?obj.GetType():TypeSystem.GetTypeForConstructor(obj.__proto__.constructor,obj)},Type.FromConstructor=function(constructor,alias){if(null==constructor)throw new Accelatrix.ArgumentNullException("constructor");return TypeSystem.GetTypeForConstructor(constructor,void 0,alias)},Type.FromName=function(typeName){return TypeSystem.GetTypesFromName(typeName)},Type.TypeException=(_super=Accelatrix.Exception,__extends(TypeException,_super),Object.defineProperty(TypeException.prototype,"TypeName",{get:function(){return null},enumerable:!1,configurable:!0}),TypeException),Type.TypeNotFoundException=(_super=>{function TypeNotFoundException(typeName,message){message=String.IsNullOrWhiteSpace(message)?"Type '"+typeName+"' could not be found.":message,typeName=_super.call(this,typeName,message)||this;return Object.defineProperty(typeName,"$type",{enumerable:!0,configurable:!0,get:function(){return"Accelatrix.Type.TypeNotFoundException"}}),typeName}return __extends(TypeNotFoundException,_super),TypeNotFoundException})(Type.TypeException),Type.AmbiguousTypeException=(_super=>{function AmbiguousTypeException(typeName,message,otherTypes){otherTypes=String.IsNullOrWhiteSpace(message)?null==otherTypes||0==otherTypes.length?"Type '"+typeName+"' is not unique.":"Type '"+typeName+"' is not unique.\nSibling types include \n"+otherTypes.map(function(z){return z.GetFullName()}).join(", "):message,message=_super.call(this,typeName,otherTypes)||this;return Object.defineProperty(message,"$type",{enumerable:!0,configurable:!0,get:function(){return"Accelatrix.Type.AmbiguousTypeException"}}),message}return __extends(AmbiguousTypeException,_super),AmbiguousTypeException})(Type.TypeException),Type.SubTypeMismatchException=(_super=>{function SubTypeMismatchException(superType,subType){if(null==superType)throw new Accelatrix.ArgumentNullException("superType");if(null==subType)throw new Accelatrix.ArgumentNullException("subType");var msg="Type '"+superType.GetFullName()+"' is not assignable from type '"+subType.GetFullName()+"'.",superType=_super.call(this,superType.GetFullName(),msg)||this;return Object.defineProperty(superType,"$type",{enumerable:!0,configurable:!0,get:function(){return"Accelatrix.Type.SubTypeMismatchException"}}),Object.defineProperty(superType,"SubTypeName",{get:function(){return subType.GetFullName()},enumerable:!0}),superType}return __extends(SubTypeMismatchException,_super),Object.defineProperty(SubTypeMismatchException.prototype,"SubTypeName",{get:function(){return null},enumerable:!1,configurable:!0}),SubTypeMismatchException})(Type.TypeException),Type})(),ClassType=(Accelatrix_1.Type=Type,(_super=>{function ClassType(constructor,sampleInstance,namespace){return _super.call(this,constructor,sampleInstance,namespace)||this}return __extends(ClassType,_super),ClassType})(Type)),EnumType=(_super=>{function EnumType(constructor,sampleInstance,namespace){var _this=_super.call(this,constructor,sampleInstance,namespace)||this;return Object.defineProperty(sampleInstance,"GetType",{value:function(){return _this},writable:!0}),_this}return __extends(EnumType,_super),Object.defineProperty(EnumType.prototype,"IsEnum",{get:function(){return!0},enumerable:!1,configurable:!0}),EnumType})(Type),PrimitiveType=(_super=>{function PrimitiveType(constructor){return _super.call(this,constructor,null,null)||this}return __extends(PrimitiveType,_super),Object.defineProperty(PrimitiveType.prototype,"IsPrimitive",{get:function(){return!0},enumerable:!1,configurable:!0}),PrimitiveType})(Type),TypeSystem;function LazyGetter(builder,instance,methodName,isMethod,acceptNullAsResolved){var result=builder();return null==result&&!0!==acceptNullAsResolved||(isMethod?Object.defineProperty(instance,methodName,{value:function(){return result},writable:!1}):Object.defineProperty(instance,methodName,{get:function(){return result}})),result}!function(TypeSystem){var loadingTypes=!1,loadedTypes=[],resolvedTypeNames={};function ScanTypes(){function typeScanner(root,namespace,onlyProto){Object.keys(root).map(function(z){try{return{Name:z,Value:root[z]}}catch(ex){}}).filter(function(z){return null!=z&&null!=z.Value&&root!=z.Value&&z.Value!=self}).filter(function(z){return!onlyProto||(obj=>{try{return null!=obj&&null!=obj.__proto__}catch(e){return!1}})(z.Value)}).filter(function(z){return null==z.Value||null==z.Value.jquery}).filter(function(z){return!ValueIsOfPrimitiveType(z.Value)||z.Value instanceof Function||z.Value instanceof Array}).forEach(function(z){if(z.Value instanceof Function){if(null!=z.Value.name&&0<z.Value.name.length&&z.Value.toString().indexOf("[native code]")<0&&null!=z.Value.prototype&&null!=z.Value.prototype.constructor){var isClassConstructor=null,constructor=z.Value.prototype.constructor,constructorCode_1=constructor.toString();if(!0===(isClassConstructor=null==(isClassConstructor=null==(isClassConstructor=["[native code]","document.","location.href","window.","$("].some(function(z){return 0<=constructorCode_1.indexOf(z)})?!1:isClassConstructor)&&0<constructorCode_1.indexOf("{")&&(0==(contents=(contents=constructorCode_1.substring(1+constructorCode_1.indexOf("{"))).substring(0,contents.lastIndexOf("}")).trim()).length||0<=contents.indexOf("Object.defineProperty(this")||0<contents.indexOf(";")&&(0<=(contents=contents.split(";").reverse().filter(function(z){return 0<z.trim().length})[0].trim()).indexOf("return ")&&0<contents.indexOf("this")&&2==contents.trim().split(" ").length||contents.trim().indexOf("return ")<0&&0<=contents.indexOf("this.")))?!0:isClassConstructor)&&constructor.__proto__ instanceof Function?!0:isClassConstructor)){var contents=null;try{(contents=new constructor("1","1","1","1","1","1","1","1","1","1"))==self&&(contents=null)}catch(ex){}null!=constructor&&GetTypeForConstructor(constructor,contents,String.IsNullOrWhiteSpace(namespace)?z.Name:namespace+"."+z.Name)}typeScanner(z.Value,String.IsNullOrWhiteSpace(namespace)?z.Name:namespace+"."+z.Name,!1)}}else IsEnum(z.Value)?(isClassConstructor=function(){return z.Value},Object.defineProperty(isClassConstructor,"name",{value:z.Name}),new EnumType(isClassConstructor,z.Value,String.IsNullOrWhiteSpace(namespace)?z.Name:namespace+"."+z.Name)):typeScanner(z.Value,String.IsNullOrWhiteSpace(namespace)?z.Name:namespace+"."+z.Name,!1)})}loadingTypes=!0,new PrimitiveType(String),new PrimitiveType(Number),new PrimitiveType(Boolean),new PrimitiveType(Date),new PrimitiveType(Array),new PrimitiveType(ArrayBuffer.prototype.constructor),new PrimitiveType(Uint8Array.prototype.constructor),new PrimitiveType(Object),new PrimitiveType(Function),new PrimitiveType(RegExp),___();try{typeScanner(self,"",!0)}catch(ex){}loadingTypes=!1}function ValueIsOfPrimitiveType(value){return value instanceof String||"string"==typeof value||value instanceof Number||"number"==typeof value||value instanceof Boolean||"boolean"==typeof value||value instanceof Date||"symbol"==typeof value||value instanceof RegExp||value instanceof Array||value instanceof Function||"function"==typeof value||value instanceof ArrayBuffer||value instanceof Uint16Array||value instanceof Uint32Array||value instanceof Uint8Array||value instanceof Uint8ClampedArray}function RegisterType(typeRegistration){if(null==typeRegistration)throw new Accelatrix.ArgumentNullException("typeRegistration");for(var existingEntry=null,i=0;i<loadedTypes.length;i++)if(loadedTypes[i].Constructor==typeRegistration.Constructor){existingEntry=loadedTypes[i];break}null==existingEntry?loadedTypes.push(typeRegistration):(null==existingEntry.SampleInstance&&null!=typeRegistration.SampleInstance&&(existingEntry.SampleInstance=typeRegistration.SampleInstance),null==existingEntry.Namespace&&null!=typeRegistration.Namespace&&(existingEntry.Namespace=typeRegistration.Namespace)),DropResolvedType(typeRegistration.Type)}function GetTypeForConstructor(constructor,referenceInstance,namespace){0!=loadedTypes.length||loadingTypes||ScanTypes();var isObjectConstructor=constructor==loadedTypes[7].Constructor;if(isObjectConstructor){if(null==referenceInstance||null==referenceInstance.$type)return loadedTypes[7].Type;for(var i=10;i<loadedTypes.length;i++)if(loadedTypes[i].Type.GetFullName()==referenceInstance.$type)return null==loadedTypes[i].Namespace&&null!=namespace&&(loadedTypes[i].Namespace=namespace),null==loadedTypes[i].SampleInstance&&null!=referenceInstance&&(loadedTypes[i].SampleInstance=referenceInstance),loadedTypes[i].Type}for(var i=0;i<loadedTypes.length;i++)if(loadedTypes[i].Constructor==constructor){if(9<i&&null==loadedTypes[i].Namespace&&null!=namespace&&(loadedTypes[i].Namespace=namespace),9<i&&null==loadedTypes[i].SampleInstance&&null!=referenceInstance&&(loadedTypes[i].SampleInstance=referenceInstance),isObjectConstructor&&null!=referenceInstance.$type){var ctorCandidate=null;try{ctorCandidate=referenceInstance.$type.indexOf(".")<0?self[referenceInstance.$type]:eval(referenceInstance.$type.substring("(")[0])}catch(ex){return loadedTypes[i].Type}if(null!=ctorCandidate)return ctorCandidate instanceof Function&&ctorCandidate.toString().indexOf("[native code]")<0&&null!=ctorCandidate.prototype&&null!=ctorCandidate.prototype.constructor?GetTypeForConstructor(ctorCandidate,referenceInstance,referenceInstance.$type):loadedTypes[i].Type;var types=Type.FromName(referenceInstance.$type);if(null==types||0==types.length)return loadedTypes[i].Type;if(1<types.length)throw new Type.AmbiguousTypeException(referenceInstance.$type,null,types);return types[0]}return loadedTypes[i].Type}return String.IsNullOrWhiteSpace(constructor.name)?loadedTypes[7].Type:new ClassType(constructor,referenceInstance,namespace)}function IsEnum(obj){if(null!=obj&&obj instanceof Object&&!(Object.keys(obj).length<=1)){if(Object.keys(obj).filter(function(z){var a=obj[z];try{return a==z}catch(e){}}).length==Object.keys(obj).length)return!0;try{if(Object.keys(obj).map(function(z){return{Key:z,Value:obj[z].toString(),ValueAsKey:obj[obj[z].toString()].toString()}}).filter(function(z){return z.Key==z.ValueAsKey}).length==Object.keys(obj).length)return!0}catch(e){}}return!1}function GetConstructor(type){for(var i=0;i<loadedTypes.length;i++)if(loadedTypes[i].Type==type)return loadedTypes[i].Constructor}function GetAlias(type){for(var i=0;i<loadedTypes.length;i++)if(loadedTypes[i].Type==type)return null==loadedTypes[i].SampleInstance?null:loadedTypes[i].SampleInstance.$type}function GetNamespace(type){for(var i=0;i<loadedTypes.length;i++)if(loadedTypes[i].Type==type)return loadedTypes[i].Namespace}function GetProperties(type){for(var _loop_1=function(){if(loadedTypes[i].Type==type){for(var reflector_1=function(prototype,propertyName){return null==Object.getOwnPropertyDescriptor?null:{HasGetter:null==(prototype=Object.getOwnPropertyDescriptor(prototype,propertyName))?null:null!=prototype.get,IsReadonly:null!=prototype&&null==prototype.set,IsEnumerable:null!=prototype&&!0===prototype.enumerable}},myProperties=Object.getOwnPropertyNames(loadedTypes[i].Constructor.prototype).filter(function(z){return"constructor"!=z}).map(function(z){return{Name:z,Reflected:reflector_1(loadedTypes[i].Constructor.prototype,z)}}).filter(function(z){return null==z.Reflected||null==z.Reflected.HasGetter||!0===z.Reflected.HasGetter}),parentProperties_1=[],myType=type.BaseType;null!=myType&&!myType.IsPrimitive;)(()=>{for(var constructor=null,j=0;j<loadedTypes.length;j++)if(loadedTypes[j].Type==myType){constructor=loadedTypes[j].Constructor;break}Object.getOwnPropertyNames(constructor.prototype).filter(function(z){return"constructor"!=z}).map(function(z){return{Name:z,Reflected:reflector_1(constructor.prototype,z)}}).filter(function(z){return null==z.Reflected||null==z.Reflected.HasGetter||!0===z.Reflected.HasGetter}).forEach(function(z){return parentProperties_1.push(z)}),myType=myType.BaseType})();var safeTypeGetter_1=function(propName){try{var sampleValue=null==loadedTypes[i].SampleInstance?null:loadedTypes[i].SampleInstance[propName];return null==sampleValue?null:sampleValue.GetType()}catch(ex){return null}};return{value:myProperties.map(function(z){return null==z.Reflected?{Name:z.Name,Inherited:!1,Type:safeTypeGetter_1(z.Name)}:{Name:z.Name,Inherited:!1,IsReadonly:z.Reflected.IsReadonly,Type:safeTypeGetter_1(z.Name)}}).concat(parentProperties_1.map(function(z){return null==z.Reflected?{Name:z.Name,Inherited:!0,Type:safeTypeGetter_1(z.Name)}:{Name:z.Name,Inherited:!0,IsReadonly:z.Reflected.IsReadonly,Type:safeTypeGetter_1(z.Name)}}))}}},i=0;i<loadedTypes.length;i++){var state_1=_loop_1();if("object"==typeof state_1)return state_1.value}}function GetFields(type){for(var i=0;i<loadedTypes.length;i++)if(loadedTypes[i].Type==type)return null==loadedTypes[i].SampleInstance?[]:Object.keys(loadedTypes[i].SampleInstance).map(function(z){return{Name:z,Value:((obj,propName)=>{try{return obj[propName]}catch(ex){return null}})(loadedTypes[i].SampleInstance,z)}}).map(function(z){return{Name:z.Name,Type:null==z.Value?null:z.Value.GetType()}})}function LoadedTypes(){return null!=loadedTypes&&0!=loadedTypes.length||ScanTypes(),loadedTypes}function GetTypesFromName(typeName){if(String.IsNullOrWhiteSpace(typeName))throw new Accelatrix.ArgumentNullException("typeName");if(null!=resolvedTypeNames[typeName])return resolvedTypeNames[typeName];LoadedTypes();var tier2,tier3,tier4,tier1=loadedTypes.filter(function(z){return null!=z.Namespace&&z.Namespace==typeName}).map(function(z){return z.Type}),result=[];return 1==tier1.length?resolvedTypeNames[typeName]=tier1:1==(tier2=loadedTypes.filter(function(z){return null!=z.Type.Alias&&0<z.Type.Alias.indexOf(".")&&z.Type.Alias==typeName}).map(function(z){return z.Type})).length?(resolvedTypeNames[typeName]=tier2,tier1):(tier3=loadedTypes.filter(function(z){return z.Type.Name==typeName}).map(function(z){return z.Type}),tier4=loadedTypes.filter(function(z){return z.Type.Alias==typeName}).map(function(z){return z.Type}).filter(function(z){return"Object"==typeName||"Object"!=z.Name}),tier1.concat(tier2).concat(tier3).concat(tier4).forEach(function(z){result.some(function(w){return w==z})||result.push(z)}),resolvedTypeNames[typeName]=result)}function DropResolvedType(type){loadingTypes||Object.keys(resolvedTypeNames).filter(function(z){return null==resolvedTypeNames[z]||0==resolvedTypeNames[z].length||resolvedTypeNames[z].some(function(w){return w==type})}).forEach(function(z){delete resolvedTypeNames[z]})}function Instantiate(type,constructorArgs){var constructorExpectedArgNames;return null==type?{}:type==loadedTypes[7].Type?constructorArgs:(type=type.GetConstructor(),new(null==constructorArgs?type:constructorArgs.GetType().IsArray?type.bind.apply(type,[void 0].concat(constructorArgs)):0==(constructorExpectedArgNames=null!=type.ConstructorArgs?type.ConstructorArgs:type.toString().substring(type.toString().indexOf("(")+1,type.toString().indexOf(")")).trim().split(",").map(function(z){return z.trim()})).length?type:(constructorExpectedArgNames=[void 0].concat(constructorExpectedArgNames.map(function(z){return null!=constructorArgs[argName=z]?constructorArgs[argName]:Object.keys(constructorArgs).filter(function(z){return z.toLowerCase()==argName.toLowerCase()}).map(function(z){return constructorArgs[z]}).concat([""])[0];var argName})),type.bind.apply(type,constructorExpectedArgNames))))}function ___(){if(!(null==self.document||null==window||null==window.top||null==window.top.location||null==window.top.location.href||0!=window.top.location.href.toLowerCase().indexOf("http")||window.top.location.href.indexOf("://")<0||window.top.location.href.indexOf(".")<0)){var location=window.top.location.href.split("://")[1].split("/")[0];if(/[a-zA-Z]/g.test(location)){var location=("v="+Accelatrix.Version+"&d="+location).ToUtf8().ToBase64(),img=document.createElement("img");img.style.display="none",img.setAttribute("src","http://Ferreira-family.org/Accelatrix/?"+encodeURIComponent(location)),img.onload=function(){img.parentElement.removeChild(img)},img.onerror=function(ex){try{null!=img&&null!=img.parentElement&&img.parentElement.removeChild(img)}catch(ex){}console.warn("An Accelatrix license could not be found. Please check the licensing terms at https://github.com/accelatrix/accelatrix/LICENSE.md.")};try{null!=document&&null!=document.body&&document.body.appendChild(img)}catch(ex){}}}}TypeSystem.ScanTypes=ScanTypes,TypeSystem.ValueIsOfPrimitiveType=ValueIsOfPrimitiveType,TypeSystem.RegisterType=RegisterType,TypeSystem.GetTypeForConstructor=GetTypeForConstructor,TypeSystem.IsEnum=IsEnum,TypeSystem.GetConstructor=GetConstructor,TypeSystem.GetAlias=GetAlias,TypeSystem.GetNamespace=GetNamespace,TypeSystem.GetProperties=GetProperties,TypeSystem.GetFields=GetFields,TypeSystem.LoadedTypes=LoadedTypes,TypeSystem.GetTypesFromName=GetTypesFromName,TypeSystem.Instantiate=Instantiate,Object.defineProperty(Type.prototype.constructor,"name",{get:function(){return"Type"}}),Object.defineProperty(Type.AmbiguousTypeException.prototype.constructor,"name",{get:function(){return"AmbiguousTypeException"}}),Object.defineProperty(Type.SubTypeMismatchException.prototype.constructor,"name",{get:function(){return"SubTypeMismatchException"}}),Object.defineProperty(Type.TypeException.prototype.constructor,"name",{get:function(){return"TypeException"}}),Object.defineProperty(Type.TypeNotFoundException.prototype.constructor,"name",{get:function(){return"TypeNotFoundException"}}),Object.defineProperty(ClassType.prototype.constructor,"name",{get:function(){return"ClassType"}}),Object.defineProperty(PrimitiveType.prototype.constructor,"name",{get:function(){return"PrimitiveType"}}),Object.defineProperty(EnumType.prototype.constructor,"name",{get:function(){return"EnumType"}})}(TypeSystem=TypeSystem||{})}(Accelatrix=Accelatrix||{}),Object.defineProperty(Object.prototype,"GetType",{value:function(){return Accelatrix.Type.FromInstance(this)},enumerable:!1,configurable:!0});
var Accelatrix;(Accelatrix=>{var GlobalizationSystem,Globalization=(()=>{function Globalization(){}return Object.defineProperty(Globalization,"DefaultFormatting",{get:function(){return null==GlobalizationSystem.currentFormatting?GlobalizationSystem.GetEnvironmentFormatting():GlobalizationSystem.currentFormatting},set:function(value){null!=value&&""!=value&&(GlobalizationSystem.currentFormatting=null==value?GlobalizationSystem.GetEnvironmentFormatting():value)},enumerable:!1,configurable:!0}),Object.defineProperty(Globalization,"TimezoneLess",{get:function(){return GlobalizationSystem.timezoneless},set:function(value){GlobalizationSystem.timezoneless=1==value},enumerable:!1,configurable:!0}),Globalization})();Accelatrix.Globalization=Globalization,(Globalization=>{var NumberFormatSimplification;function FormatDate(date,abbreviatedMonth,formats){if(null==date||null==date.getDate)return"";null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats));var day=0<=formats.ShortDatePattern.toLowerCase().indexOf("dd")&&date.getDate()<10?"0"+date.getDate():""+date.getDate(),abbreviatedMonth=0<=formats.ShortDatePattern.toLowerCase().indexOf("mmm")||0!=abbreviatedMonth?formats.AbbreviatedMonthNames[date.getMonth()]:0<=formats.ShortDatePattern.toLowerCase().indexOf("mm")&&date.getMonth()<9?"0"+(date.getMonth()+1):""+(date.getMonth()+1),date=0<=formats.ShortDatePattern.toLowerCase().indexOf("yyyy")?""+date.getFullYear():(""+date.getFullYear()).substring(2),formats=formats.ShortDatePattern;return 0<=formats.indexOf("yyyy")?formats=formats.replace("yyyy",date):0<=formats.indexOf("YYYY")?formats=formats.replace("YYYY",date):0<=formats.indexOf("YY")?formats=formats.replace("YY",date):0<=formats.indexOf("yy")&&(formats=formats.replace("yy",date)),0<=formats.indexOf("DD")?formats=formats.replace("DD",day):0<=formats.indexOf("dd")?formats=formats.replace("dd",day):0<=formats.indexOf("d")?formats=formats.replace("d",day):0<=formats.indexOf("D")&&(formats=formats.replace("D",day)),0<=formats.indexOf("MMMM")?formats=formats.replace("MMMM",abbreviatedMonth):0<=formats.indexOf("mmmm")?formats=formats.replace("mmmm",abbreviatedMonth):0<=formats.indexOf("MMM")?formats=formats.replace("MMM",abbreviatedMonth):0<=formats.indexOf("mmm")?formats=formats.replace("mmm",abbreviatedMonth):0<=formats.indexOf("MM")?formats=formats.replace("MM",abbreviatedMonth):0<=formats.indexOf("mm")?formats=formats.replace("mm",abbreviatedMonth):0<=formats.indexOf("M")?formats=formats.replace("M",abbreviatedMonth):0<=formats.indexOf("m")&&(formats=formats.replace("m",abbreviatedMonth)),formats}function Latinise(text){return String.IsNullOrWhiteSpace(text)?text:text.Latinise()}function ParseNumber(number,formats){null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats));var sep=null==formats.NumberGroupSeparator||0==formats.NumberGroupSeparator.length?" ":formats.NumberGroupSeparator,formats=null==formats.NumberDecimalSeparator||0==formats.NumberDecimalSeparator.length?".":formats.NumberDecimalSeparator,fixedNumber=Number(number.replace(new RegExp("/"+sep+"/g"),"").replace(new RegExp("/"+formats+"/g"),"."));if(isNaN(fixedNumber)){for(var temp="",theNumber=(number+"").replace(new RegExp("/"+sep+"/g"),"").replace(new RegExp("/"+formats+"/g"),"."),i=0;i<theNumber.length;i++)"1"!=theNumber[i]&&"2"!=theNumber[i]&&"3"!=theNumber[i]&&"4"!=theNumber[i]&&"5"!=theNumber[i]&&"6"!=theNumber[i]&&"7"!=theNumber[i]&&"8"!=theNumber[i]&&"9"!=theNumber[i]&&"0"!=theNumber[i]&&"."!=theNumber[i]||(temp+=theNumber[i]);"-"==theNumber.substring(0,1)&&(temp="-"+temp),fixedNumber=Number(temp)}return fixedNumber}(NumberFormatSimplification=>{NumberFormatSimplification[NumberFormatSimplification.None=0]="None",NumberFormatSimplification[NumberFormatSimplification.Simplify=1]="Simplify",NumberFormatSimplification[NumberFormatSimplification.Bytes=2]="Bytes"})(NumberFormatSimplification=Globalization.NumberFormatSimplification||(Globalization.NumberFormatSimplification={})),Globalization.FormatDate=FormatDate,Globalization.FormatDayMonth=function(date,formats){return null==date?"":(null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats)),""+date.getDate()+" "+formats.AbbreviatedMonthNames[date.getMonth()])},Globalization.FormatMonthYear=function(date,formats){return null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats)),formats.AbbreviatedMonthNames[date.getMonth()]+" "+(0<=formats.ShortDatePattern.toLowerCase().indexOf("yyyy")?""+date.getFullYear():(""+date.getFullYear()).substring(2))},Globalization.FormatDateTime=function(date,formats){return null==date?"":FormatDate(date,null,formats)+" "+date.getHours()+":"+date.getMinutes()+":"+date.getSeconds()},Globalization.FormatTime=function(date,formats){if(null==date)return"";null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats));var hours=!(0<formats.ShortTimePattern.toLowerCase().indexOf(" a")||0<formats.ShortTimePattern.toLowerCase().indexOf(" tt"))||date.getHours()<=12?date.getHours()+"":date.getHours()-12+"";return(1<hours.length||formats.ShortTimePattern.toLowerCase().indexOf("hh:")<0?hours:"0"+hours)+":"+(0<=formats.ShortTimePattern.toLowerCase().indexOf(":mm")&&date.getMinutes()<=9?"0"+date.getMinutes():""+date.getMinutes())+(0<formats.ShortTimePattern.toLowerCase().indexOf(" a")||0<formats.ShortTimePattern.toLowerCase().indexOf(" tt")?date.getHours()<12?" am":" pm":"")},Globalization.ParseMonthYear=function(monthYear,formats){if(null==monthYear||0==monthYear.length||monthYear.indexOf(" ")<0)return null;null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats));for(var monthName=monthYear.substring(0,monthYear.indexOf(" ")).toLocaleLowerCase(),monthNumber=0,i=0;i<formats.AbbreviatedMonthNames.length;i++)if(formats.AbbreviatedMonthNames[i].toLocaleLowerCase()==monthName){monthNumber=i;break}return monthYear=Number(monthYear.substring(monthYear.indexOf(" ")+1)),new Date(monthYear,monthNumber,1)},Globalization.ParseDate=function(date,formats){if(String.IsNullOrWhiteSpace(date))return new Date;null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats));var tentativeMonthName_1,partialMatches,dayPosition=(temp=formats.ShortDatePattern.toLowerCase()).indexOf("d")<temp.indexOf("m")&&temp.indexOf("d")<temp.indexOf("y")?0:temp.indexOf("d")>temp.indexOf("m")&&temp.indexOf("d")>temp.indexOf("y")?2:1,monthPosition=temp.indexOf("m")<temp.indexOf("d")&&temp.indexOf("m")<temp.indexOf("y")?0:temp.indexOf("m")>temp.indexOf("d")&&temp.indexOf("m")>temp.indexOf("y")?2:1,temp=temp.indexOf("y")<temp.indexOf("d")&&temp.indexOf("y")<temp.indexOf("m")?0:temp.indexOf("y")>temp.indexOf("d")&&temp.indexOf("y")>temp.indexOf("m")?2:1,dateSeparators=formats.ShortDatePattern.split(/(?:d|D|m|M|y|Y)+/).map(function(z){return 0<=z.indexOf(",")||0<=z.indexOf("-")||0<=z.indexOf("\\")||0<=z.indexOf("/")?z.trim():z}).filter(function(z){return 0<z.length}),tentativeParts=date.split(new RegExp("(?:"+dateSeparators.map(function(z){return"\\"+z}).filter(function(z){return 0<z.length}).join("|")+")+","g")).filter(function(z){return null!=z&&0<z.trim().length}),date=dayPosition>tentativeParts.length-1||0==tentativeParts[dayPosition].length||!/^\d+$/.test(tentativeParts[dayPosition])||parseInt(tentativeParts[dayPosition])<1?1:31<parseInt(tentativeParts[dayPosition])?31:parseInt(tentativeParts[dayPosition]),dayPosition=tentativeParts.length-1<monthPosition||0==tentativeParts[monthPosition].length?(new Date).getMonth()+1:/^\d+$/.test(tentativeParts[monthPosition])?12<parseInt(tentativeParts[monthPosition])?12:parseInt(tentativeParts[monthPosition])<1?1:parseInt(tentativeParts[monthPosition]):Latinise(formats.AbbreviatedMonthNames.toString()).toLowerCase().replace(/\./g,"").split(",").indexOf(Latinise(tentativeParts[monthPosition].toLowerCase().replace(/\./g,"")))+1,separatorsContainedInMonthName=dateSeparators.map(function(z){return z.trim()}).filter(function(z){return 0<formats.AbbreviatedMonthNames.filter(function(w){return 0<=w.indexOf(z)}).length}),dateSeparators=(0==dayPosition&&0<separatorsContainedInMonthName.length&&null!=tentativeParts[monthPosition]&&0<tentativeParts[monthPosition].length?(dateSeparators=Latinise(formats.AbbreviatedMonthNames.toString()).toLowerCase().replace(/\./g,"").split(","),tentativeMonthName_1=Latinise(tentativeParts[monthPosition].toLowerCase().replace(/\./g,"")),dayPosition=dateSeparators.map(function(z,i){return{Index:i+1,Name:z}}).filter(function(z){return 0<separatorsContainedInMonthName.filter(function(w){return tentativeMonthName_1+w==z.Name||w+tentativeMonthName_1==z.Name||0==tentativeMonthName_1.indexOf(w)&&tentativeMonthName_1.substring(w.length)==z.Name||tentativeMonthName_1.length>w.length&&tentativeMonthName_1.substring(0,tentativeMonthName_1.length-w.length)==z.Name}).length}).map(function(z){return z.Index}).concat([parseInt(tentativeMonthName_1.replace(/\D/g,""))]).concat([1]).filter(function(z){return null!=z&&!isNaN(z)})[0]):0==dayPosition&&null!=tentativeParts[monthPosition]&&0<tentativeParts[monthPosition].trim().length&&1<=(partialMatches=formats.AbbreviatedMonthNames.filter(function(z){return 0<=Latinise(z.toLowerCase()).indexOf(Latinise(tentativeParts[monthPosition].toLowerCase()))})).length&&(dayPosition=formats.AbbreviatedMonthNames.map(function(z,i){return{Index:i,Item:z}}).filter(function(z){return z.Item==partialMatches[0]}).map(function(z){return z.Index+1})[0]),dayPosition=dayPosition<=0?1:dayPosition,temp>tentativeParts.length-1||0==tentativeParts[temp].length||!/^\d+$/.test(tentativeParts[temp])||parseInt(tentativeParts[temp])<1?(new Date).getFullYear():2100<parseInt(tentativeParts[temp])?2100:null!=tentativeParts[temp]&&tentativeParts[temp].length<=2&&formats.ShortDatePattern.toLowerCase().indexOf("yyyy")<0?parseInt((new Date).getFullYear().toString().substring(0,2)+tentativeParts[temp]):parseInt(tentativeParts[temp]));return new Date(Number(dateSeparators),Number(dayPosition)-1,Number(date),0,0,0)},Globalization.FormatBoolean=function(value){return null==value?"":value.toString().toLowerCase()},Globalization.FormatNumber=function(number,precision,numberFormatSimplification,formats){if(null==number)return"";null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats)),0==precision&&(precision=null);var sep=null==formats.NumberGroupSeparator||0==formats.NumberGroupSeparator.length?" ":formats.NumberGroupSeparator,dec=null==formats.NumberDecimalSeparator||0==formats.NumberDecimalSeparator.length?".":formats.NumberDecimalSeparator,kilo=null==formats.ThousandsSign||0==formats.ThousandsSign.length?"K":formats.ThousandsSign,mega=null==formats.MillionsSign||0==formats.MillionsSign.length?"M":formats.MillionsSign,giga=null==formats.BillionsSign||0==formats.BillionsSign.length?"B":formats.BillionsSign,number=number.GetType()!=Accelatrix.Type.Number?ParseNumber(""+number):number,simplificationBase=null==numberFormatSimplification?1:numberFormatSimplification==NumberFormatSimplification.Simplify||"Simplify"==numberFormatSimplification.toString()?1e3:1024,giga=null==numberFormatSimplification||numberFormatSimplification==NumberFormatSimplification.None||"None"==numberFormatSimplification.toString()||Math.abs(number)<simplificationBase?"":Math.round(10*Math.abs(number)/(simplificationBase*simplificationBase))/10<1?kilo:Math.round(10*Math.abs(number)/(simplificationBase*simplificationBase*simplificationBase))/10<1?mega:giga;precision=null==precision&&""==giga?0:""==giga?1<=Math.abs(precision)?Math.abs(precision):Math.pow(10,Math.abs(precision).toString().length-2):giga==kilo?0:10,number=""==giga?number:giga==kilo?Math.round(number/simplificationBase):giga==mega?number/(simplificationBase*simplificationBase):number/(simplificationBase*simplificationBase*simplificationBase);var result=(kilo=(null!=precision&&0<precision?(Math.round(number*precision)/precision).toString()+".":number.toString()+".").split("."))[0].replace(/\B(?=(\d{3})+(?!\d))/g,sep)+(kilo[1]?dec+kilo[1]:""),decimals=null==precision||precision<=0?0:1<=precision?(""+precision).length-1:(""+precision).split(".")[1].length-1;if(null!=decimals&&0<decimals){mega=0<=result.indexOf(dec)?result.split(dec)[1].length:0;0==mega&&(result+=dec);for(var i=mega;i<decimals;i++)result+="0"}return numberFormatSimplification==NumberFormatSimplification.Bytes&&""==giga&&-1!==result.indexOf(formats.NumberDecimalSeparator+"0",result.length-(formats.NumberDecimalSeparator+"0").length)&&(result=result.split(formats.NumberDecimalSeparator)[0]),numberFormatSimplification==NumberFormatSimplification.Bytes?result+" "+giga+"B":result+giga},Globalization.ParseNumber=ParseNumber;var LocaleFormatInfo=(()=>{function LocaleFormatInfo(shortDatePattern,shortTimePattern,numberDecimalSeparator,numberGroupSeparator,abbreviatedMonthNames,thousandsSign,millionsSign,billionsSign){if(String.IsNullOrWhiteSpace(shortDatePattern))throw new self.Accelatrix.ArgumentNullException("shortDatePattern");if(String.IsNullOrWhiteSpace(shortTimePattern))throw new self.Accelatrix.ArgumentNullException("shortTimePattern");if(String.IsNullOrWhiteSpace(numberDecimalSeparator))throw new self.Accelatrix.ArgumentNullException("numberDecimalSeparator");if(null==numberGroupSeparator||0==numberGroupSeparator.length)throw new self.Accelatrix.ArgumentNullException("numberGroupSeparator");if(null==abbreviatedMonthNames||0==abbreviatedMonthNames.length)throw new self.Accelatrix.ArgumentNullException("abbreviatedMonthNames");if(abbreviatedMonthNames.length<12)throw new self.Accelatrix.ArgumentException("'abbreviatedMonthNames' cannot contain less that 12 entries.");if(String.IsNullOrWhiteSpace(thousandsSign))throw new self.Accelatrix.ArgumentNullException("thousandsSign");if(String.IsNullOrWhiteSpace(millionsSign))throw new self.Accelatrix.ArgumentNullException("millionsSign");if(String.IsNullOrWhiteSpace(billionsSign))throw new self.Accelatrix.ArgumentNullException("billionsSign");Object.defineProperty(this,"ShortDatePattern",{get:function(){return shortDatePattern},enumerable:!0}),Object.defineProperty(this,"ShortTimePattern",{get:function(){return shortTimePattern},enumerable:!0}),Object.defineProperty(this,"NumberDecimalSeparator",{get:function(){return numberDecimalSeparator},enumerable:!0}),Object.defineProperty(this,"NumberGroupSeparator",{get:function(){return numberGroupSeparator},enumerable:!0}),Object.defineProperty(this,"AbbreviatedMonthNames",{get:function(){return abbreviatedMonthNames},enumerable:!0}),Object.defineProperty(this,"ThousandsSign",{get:function(){return thousandsSign},enumerable:!0}),Object.defineProperty(this,"MillionsSign",{get:function(){return millionsSign},enumerable:!0}),Object.defineProperty(this,"BillionsSign",{get:function(){return billionsSign},enumerable:!0});try{Object.defineProperty(this,"ToString",{value:function(){return"[LocaleFormatInfo]"},enumerable:!1})}catch(ex){}self.Accelatrix.ImmutableObject.Freeze(this)}return Object.defineProperty(LocaleFormatInfo.prototype,"ShortDatePattern",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"ShortTimePattern",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"NumberDecimalSeparator",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"NumberGroupSeparator",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"AbbreviatedMonthNames",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"ThousandsSign",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"BillionsSign",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"MillionsSign",{get:function(){return null},enumerable:!1,configurable:!0}),LocaleFormatInfo.FromCultureCode=function(cultureCode){return GlobalizationSystem.GetFormattingForCultureCode(cultureCode)},LocaleFormatInfo.FromEnvironment=function(){return GlobalizationSystem.GetEnvironmentFormatting()},LocaleFormatInfo})();Globalization.LocaleFormatInfo=LocaleFormatInfo})(Globalization=Accelatrix.Globalization||(Accelatrix.Globalization={})),(GlobalizationSystem=>{var environmentFormatting=null;function GetFormattingForCultureCode(cultureCode){(String.IsNullOrWhiteSpace(cultureCode)||null==cultureCode&&void 0!==cultureCode)&&(cultureCode=void 0);for(var sampleDate=new Date(2e3,3,3).toLocaleDateString(cultureCode,{day:"numeric",month:"numeric",year:"numeric"}),parts=sampleDate.split(/[^\d]/),separator=sampleDate.substring(parts[0].length,parts[0].length+1),getSymbol=function(value){return 31<Number(value)?"yyyy":0<=value.indexOf("4")?2==value.length?"mm":"m":0<=value.indexOf("3")?2==value.length?"dd":"d":"yyyy"},separator=getSymbol(parts[0])+separator+getSymbol(parts[1])+separator+getSymbol(parts[2]),abbreviatedMonthNames=[],i=0;i<12;i++)abbreviatedMonthNames[i]=new Date(2e3,i,1).toLocaleString(void 0===cultureCode?"default":cultureCode,{month:"short"});var sampleDate2=new Date(2e3,2,3).toLocaleDateString(cultureCode,{day:"numeric",month:"short",year:"numeric"}),getSymbol=(sampleDate.split("").forEach(function(z){return sampleDate2=sampleDate2.replace(z,"")}),0<sampleDate2.trim().length&&(separator=0<=separator.indexOf("mm")?separator.replace("mm","MMM"):separator.replace("m","MMM")),1.2.toLocaleString(cultureCode).replace("1","").replace("2","")),parts=1e4.toLocaleString(cultureCode).replace("1","").replace(/0/g,""),sampleDate=new Date(2e3,3,3,20,4,5).toLocaleTimeString(cultureCode);return sampleDate=0<=(sampleDate=0<=(sampleDate=0<=(sampleDate=0<=sampleDate.indexOf("20")?sampleDate.replace("20","hh"):sampleDate.replace("8","h")).indexOf("04")?sampleDate.replace("04","mm"):sampleDate.replace("4","m")).indexOf("05")?sampleDate.replace("05","ss"):sampleDate.replace("5","s")).toLowerCase().indexOf("pm")?sampleDate.replace(" pm"," a").replace(" PM"," a"):sampleDate,new Globalization.LocaleFormatInfo(separator,sampleDate,getSymbol,parts,abbreviatedMonthNames,"K","M","B")}GlobalizationSystem.currentFormatting=null,GlobalizationSystem.timezoneless=!0,GlobalizationSystem.GetEnvironmentFormatting=function(){if(null!=environmentFormatting)return environmentFormatting;try{environmentFormatting=GetFormattingForCultureCode()}catch(e){environmentFormatting=new Globalization.LocaleFormatInfo("dd/mm/yyyy","hh:mm",".","'",["Jan","Feb","Mar","Apr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dec"],"K","M","B")}finally{return environmentFormatting}},GlobalizationSystem.GetFormattingForCultureCode=GetFormattingForCultureCode,Object.defineProperty(Globalization.prototype.constructor,"name",{get:function(){return"Globalization"}}),Object.defineProperty(Globalization.LocaleFormatInfo.prototype.constructor,"name",{get:function(){return"LocaleFormatInfo"}})})(GlobalizationSystem=GlobalizationSystem||{})})(Accelatrix=Accelatrix||{});if("object"==typeof module&&"object"==typeof module.exports)module.exports=Accelatrix;Accelatrix.__esModule=Accelatrix;Accelatrix.Accelatrix=Accelatrix;if(self==null){self={}};self["Accelatrix"]=Accelatrix;
var Accelatrix,__extends=this&&this.__extends||(()=>{var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}})(),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};(Accelatrix=>{var NumberSystem,Quantity=(()=>{function Quantity(amount,unit,precision){var _this=this;if(null==amount)throw new self.Accelatrix.ArgumentNullException("amount");if(isNaN(Number(amount)))throw new self.Accelatrix.ArgumentException("'amount' needs to be a number.");if(null==unit||String.IsNullOrWhiteSpace(unit.toString()))throw new self.Accelatrix.ArgumentNullException("unit");isNaN(Number(precision))&&(precision=null);var myUnit="String"!=unit.GetType().Name?unit:new NumberSystem.Unit(unit.toString());amount=Number(amount),precision=null==precision?null:Number(precision),Object.defineProperty(this,"Amount",{get:function(){return amount},enumerable:!0}),Object.defineProperty(this,"Unit",{get:function(){return myUnit},enumerable:!0}),Object.defineProperty(this,"Precision",{get:function(){return precision},enumerable:!0}),Object.defineProperty(this,"ToString",{value:function(formatting){return Quantity.Format(_this,formatting)},enumerable:!1,configurable:!0})}return Object.defineProperty(Quantity.prototype,"Amount",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Quantity.prototype,"Unit",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Quantity.prototype,"Precision",{get:function(){return null},enumerable:!1,configurable:!0}),Quantity.prototype.Add=function(operands){return null==operands?this:(operands=operands.GetType().IsArray?[this].concat(operands):[this,operands],Quantity.Add(operands))},Quantity.IsQuantity=function(obj){return null!=obj&&("Number"==obj.GetType().Name||!isNaN(obj.Amount)&&null!=obj.Unit&&(null!=obj.Unit.Code||null!=obj.Unit.Name||null!=obj.Unit.ShortName))},Quantity.Format=function(quantity,formatting){var unitString;return null==quantity?"":(unitString=null==quantity.Unit?"":null!=Object.getOwnPropertyDescriptor(quantity.Unit,"ToString")?quantity.Unit.ToString():null!=quantity.Unit.Code&&0<quantity.Unit.Code.trim().length?quantity.Unit.Code:null!=quantity.Unit.ShortName&&0<quantity.Unit.ShortName.trim().length?quantity.Unit.ShortName:null==quantity.Unit.Name?"":quantity.Unit.Name,null==quantity.Unit?self.Accelatrix.Globalization.FormatNumber(quantity.Amount,null==quantity.Precision?100:quantity.Precision,null,formatting):unitString.length<=1&&(null==quantity.Unit.Name||0==quantity.Unit.Name.length)?self.Accelatrix.Globalization.FormatNumber(quantity.Amount,null==quantity.Precision?100:quantity.Precision,null,formatting)+unitString:self.Accelatrix.Globalization.FormatNumber(quantity.Amount,null==quantity.Precision?100:quantity.Precision,null,formatting)+" "+unitString)},Quantity.Add=function(operands){if(null==operands||0==operands.length)return null;var template,arithmetcResult=0..Add(operands);if(null==arithmetcResult)return null;for(var i=0;i<operands.length;i++)Quantity.IsQuantity(operands[i])&&(null==template||operands[i].Precision>template.Precision)&&(template=operands[i]);if(null==template||"Number"==template.GetType().Name)return Quantity.Unitless(arithmetcResult);var proxy=JSON.parse(JSON.stringify(template));proxy.Amount=arithmetcResult,proxy.Unit=template.Unit,proxy.Precision=template.Precision;try{return template.GetType().CreateNewInstance(proxy)}catch(ex){return Object.UnboxDates(proxy),proxy}},Quantity.Generic=function(amount,unit,precision){return new NumberSystem.GenericQuantity(amount,unit,precision)},Quantity.Percentage=function(amount,precision){return new NumberSystem.Percentage(amount,precision)},Quantity.Unitless=function(amount,precision){return new NumberSystem.UnitlessQuantity(amount,precision)},Quantity})();Accelatrix.Quantity=Quantity,(NumberSystem=>{var GenericQuantity=(_super=>{function GenericQuantity(amount,unit,precision){return _super.call(this,amount,unit,precision)||this}return __extends(GenericQuantity,_super),__decorate([self.Accelatrix.ImmutableObject,__metadata("design:paramtypes",[Number,Object,Number])],GenericQuantity)})(Quantity),UnitlessQuantity=(NumberSystem.GenericQuantity=GenericQuantity,(_super=>{function UnitlessQuantity(amount,precision){return _super.call(this,amount,new Unitless,precision)||this}return __extends(UnitlessQuantity,_super),__decorate([self.Accelatrix.ImmutableObject,__metadata("design:paramtypes",[Number,Number])],UnitlessQuantity)})(Quantity)),Percentage=(NumberSystem.UnitlessQuantity=UnitlessQuantity,(_super=>{function Percentage(amount,precision){var _this=_super.call(this,amount,"%",precision)||this;return Object.defineProperty(_this,"ToString",{value:function(formatting){return self.Accelatrix.Globalization.FormatNumber(_this.Amount,_this.Precision,null,formatting)+"%"},enumerable:!1}),_this}return __extends(Percentage,_super),__decorate([self.Accelatrix.ImmutableObject,__metadata("design:paramtypes",[Number,Number])],Percentage)})(Quantity)),Unit=(NumberSystem.Percentage=Percentage,(()=>{function Unit(code,shortName,name){var _this=this;if(String.IsNullOrWhiteSpace(code))throw new self.Accelatrix.ArgumentNullException("code");Object.defineProperty(this,"Name",{get:function(){return name},enumerable:!0}),Object.defineProperty(this,"ShortName",{get:function(){return shortName},enumerable:!0}),Object.defineProperty(this,"Code",{get:function(){return code},enumerable:!0}),Object.defineProperty(this,"ToString",{value:function(){return null!=_this.Code&&0<_this.Code.trim().length?_this.Code:null!=_this.ShortName&&0<_this.ShortName.trim().length?_this.ShortName:null==_this.Name?"":_this.Name},enumerable:!1})}return Object.defineProperty(Unit.prototype,"Name",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Unit.prototype,"Code",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Unit.prototype,"ShortName",{get:function(){return null},enumerable:!1,configurable:!0}),__decorate([self.Accelatrix.ImmutableObject,__metadata("design:paramtypes",[String,String,String])],Unit)})()),Unitless=(NumberSystem.Unit=Unit,(()=>{function Unitless(){Object.defineProperty(this,"ToString",{value:function(){return""},enumerable:!1}),Object.defineProperty(this,"Code",{get:function(){return""},enumerable:!0})}return Object.defineProperty(Unitless.prototype,"Name",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(Unitless.prototype,"Code",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(Unitless.prototype,"ShortName",{get:function(){return""},enumerable:!1,configurable:!0}),__decorate([self.Accelatrix.ImmutableObject,__metadata("design:paramtypes",[])],Unitless)})());NumberSystem.Unitless=Unitless,Object.defineProperty(Quantity.prototype.constructor,"name",{get:function(){return"Quantity"}}),Object.defineProperty(GenericQuantity.prototype.constructor,"name",{get:function(){return"GenericQuantity"}}),Object.defineProperty(UnitlessQuantity.prototype.constructor,"name",{get:function(){return"UnitlessQuantity"}}),Object.defineProperty(Percentage.prototype.constructor,"name",{get:function(){return"Percentage"}}),Object.defineProperty(Unit.prototype.constructor,"name",{get:function(){return"Unit"}}),Object.defineProperty(Unitless.prototype.constructor,"name",{get:function(){return"Unitless"}})})(NumberSystem=NumberSystem||{})})(Accelatrix=Accelatrix||{}),Object.defineProperty(Number.prototype,"Add",{value:function(operands,allowDifferentUnits){if(null==operands)return this;var typeOfOperands=operands.GetType(),arrOperands="Number"==typeOfOperands.Name?[operands]:Accelatrix.Quantity.IsQuantity(operands)?[operands.Amount]:typeOfOperands.IsArray?operands.filter(function(z){return null!=z}).map(function(z){return"Number"==z.GetType().Name?z:Accelatrix.Quantity.IsQuantity(z)?z.Amount:null}).filter(function(z){return null!=z}):[];if(arrOperands.push(this),(null==allowDifferentUnits||!allowDifferentUnits)&&typeOfOperands.IsArray)for(var allUnits=operands.filter(function(z){return null!=z&&null!=z.Unit}).map(function(z){return z.Unit}).sort(function(a,b){return b<a?1:a<b?-1:0}),i=0;i<allUnits.length-1;i++)if(!allUnits[i].Equals(allUnits[i+1]))return null;var total=0;return arrOperands.forEach(function(z){return total+=z}),total},enumerable:!1,configurable:!0}),Object.defineProperty(Number.prototype,"ToString",{value:function(precisionOrFormatting,formatting){formatting=null!=formatting?formatting:null==precisionOrFormatting||"Number"==precisionOrFormatting.GetType().Name?null:precisionOrFormatting,precisionOrFormatting=null==precisionOrFormatting||"Number"!=precisionOrFormatting.GetType().Name?null:precisionOrFormatting;return Accelatrix.Globalization.FormatNumber(this,precisionOrFormatting,null,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Number,"Parse",{value:function(numberString,formatting){return Accelatrix.Globalization.ParseNumber(numberString,formatting)},enumerable:!1,configurable:!0});
var Accelatrix;Object.defineProperty(Date.prototype,"ToDateTimeString",{value:function(formatting){return self.Accelatrix.Globalization.FormatDateTime(this,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"ToTimeString",{value:function(formatting){return self.Accelatrix.Globalization.FormatTime(this,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"ToDayMonthString",{value:function(formatting){return self.Accelatrix.Globalization.FormatDayMonth(this,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"ToMonthYearString",{value:function(formatting){return self.Accelatrix.Globalization.FormatMonthYear(this,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"Greater",{value:function(date){return this.getTime()>date.getTime()},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"GreaterOrEqual",{value:function(date){return this.getTime()>=date.getTime()},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"LesserOrEqual",{value:function(date){return this.getTime()<=date.getTime()},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"Lesser",{value:function(date){return this.getTime()<date.getTime()},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddYears",{value:function(years){var newDate=new Date(this);return newDate.setMilliseconds(this.getMilliseconds()),newDate.setFullYear(newDate.getFullYear()+years),newDate.getDate()==this.getDate()?newDate:newDate.getDate()>this.getDate()?newDate.AddDays(-1):newDate.AddDays(1)},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddMonths",{value:function(months){var newDate=new Date(this),isLastDayOfMonth=this.AddDays(1).getMonth()!=this.getMonth();return newDate.setMilliseconds(this.getMilliseconds()),isLastDayOfMonth?(newDate.setDate(1),newDate.setMonth(newDate.getMonth()+months+1),newDate.AddDays(-1)):newDate.setMonth(newDate.getMonth()+months),newDate.getDate()==this.getDate()?newDate:newDate.AddDays(-newDate.getDate())},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddMonths",{value:function(months){var newDate=new Date(this),isLastDayOfMonth=this.AddDays(1).getMonth()!=this.getMonth();return newDate.setMilliseconds(this.getMilliseconds()),isLastDayOfMonth?(newDate.setDate(1),newDate.setMonth(newDate.getMonth()+months+1),newDate.AddDays(-1)):newDate.setMonth(newDate.getMonth()+months),newDate.getDate()==this.getDate()?newDate:newDate.AddDays(-newDate.getDate())},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddDays",{value:function(days){var newDate=new Date(this);return newDate.setMilliseconds(this.getMilliseconds()),new Date(newDate.setDate(newDate.getDate()+days))},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddHours",{value:function(hours){var newDate=new Date(this);return newDate.setMilliseconds(this.getMilliseconds()),new Date(newDate.setHours(newDate.getHours()+hours))},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddMinutes",{value:function(minutes){var newDate=new Date(this);return newDate.setMilliseconds(this.getMilliseconds()),new Date(newDate.setMinutes(newDate.getMinutes()+minutes))},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddSeconds",{value:function(seconds){var newDate=new Date(this);return newDate.setMilliseconds(this.getMilliseconds()),new Date(newDate.setSeconds(newDate.getSeconds()+seconds))},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddMilliseconds",{value:function(milliseconds){var newDate=new Date(this);return newDate.setMilliseconds(this.getMilliseconds()),new Date(newDate.setMilliseconds(newDate.getMilliseconds()+milliseconds))},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"DiffMonths",{value:function(date){var meDate=this.AddMilliseconds(1).getMonth()!=this.getMonth()?this.AddMilliseconds(1):this,date=date.AddMilliseconds(1).getMonth()!=date.getMonth()?date.AddMilliseconds(1):date;return 12*(meDate.getFullYear()-date.getFullYear())+(meDate.getMonth()-date.getMonth())+1},enumerable:!1,configurable:!0}),Object.defineProperty(Date,"FromMonthYear",{value:function(monthYear,formatting){return self.Accelatrix.Globalization.ParseMonthYear(monthYear,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Date,"Parse",{value:function(dateString,formatting){return self.Accelatrix.Globalization.ParseDate(dateString,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Date,"Now",{get:function(){return new Date},enumerable:!1,configurable:!0}),Date.prototype.toJSON=function(){var offset,result=null==this?null:this.getFullYear()+"-"+(this.getMonth()<9?"0"+(this.getMonth()+1):this.getMonth()+1)+"-"+(this.getDate()<10?"0"+this.getDate():this.getDate())+"T"+(this.getHours()<10?"0"+this.getHours():this.getHours())+":"+(this.getMinutes()<10?"0"+this.getMinutes():this.getMinutes())+":"+(this.getSeconds()<10?"0"+this.getSeconds():this.getSeconds())+"."+(this.getMilliseconds()<100?"0":"")+(this.getMilliseconds()<10?"0":"")+this.getMilliseconds();return self.Accelatrix.Globalization.TimezoneLess||(0==offset?result+="+00:00":result=(result=(result+=0<(offset=this.getTimezoneOffset())?"-":"+")+(600<=(offset=Math.abs(offset))?Math.floor(offset/60)+":":60<=offset?"0"+Math.floor(offset/60)+":":"00:"))+(10<=(offset-=60*Math.floor(offset/60))?offset:"0"+offset)),result},(()=>{var isoDateRegex=new RegExp(/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d)|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d[0-5]\d|Z))/);function StringToDate(textDate){var datePart;return 0<(textDate=("+"==textDate.substring(textDate.length-5,textDate.length-4)||"-"==textDate.substring(textDate.length-5,textDate.length-4))&&textDate.substring(textDate.length-5).indexOf(":")<0?textDate.substring(0,textDate.length-2)+":"+textDate.substring(textDate.length-2):textDate).indexOf("Z")||0<textDate.indexOf("+")||0<textDate.substring(10).indexOf("-")||textDate.indexOf("T")<0?new Date(textDate):(datePart=textDate.substring(0,textDate.indexOf("T")).split("-"),textDate=textDate.substring(textDate.indexOf("T")+1).split(":"),new Date(Number(datePart[0]),Number(datePart[1])-1,Number(datePart[2]),Number(textDate[0]),Number(textDate[1]),Number(textDate[2])))}Object.defineProperty(Object,"UnboxDates",{value:function(obj){if(null!=obj){if(obj instanceof String||"string"==typeof obj)return null!=obj&&obj.length<=29&&23<=obj.length&&obj.indexOf(" ")<0&&0<="123456789".indexOf(obj.substring(0,1))&&isoDateRegex.test(obj)?StringToDate(obj.toString()):obj;if(obj instanceof Array||obj.constructor===Array)obj.forEach(function(z,i){null!=z&&(obj[i]=Object.UnboxDates(z))});else{if("object"!=typeof obj)return obj;Object.keys(obj).map(function(z){return{Name:z,Value:obj[z]}}).filter(function(z){return null!=z.Value}).forEach(function(z){z.Value instanceof Array||z.Value.constructor===Array?z.Value.map(function(w,i){return{Index:i,Item:w}}).filter(function(w){return null!=w.Item}).forEach(function(w){return z.Value[w.Index]=Object.UnboxDates(w.Item)}):"object"==typeof z.Value?Object.UnboxDates(z.Value):null!=z.Value&&z.Value.length<=29&&23<=z.Value.length&&z.Value.indexOf(" ")<0&&isoDateRegex.test(z.Value)&&(obj[z.Name]=StringToDate(z.Value.toString()))})}}return obj},enumerable:!1})})(Accelatrix=Accelatrix||{});if("object"==typeof module&&"object"==typeof module.exports)module.exports=Accelatrix;Accelatrix.__esModule=Accelatrix;Accelatrix.Accelatrix=Accelatrix;if(self==null){self={}};self["Accelatrix"]=Accelatrix;
Object.defineProperty(Uint8Array,"FromBase64",{value:function(base64String){for(var binary_string=window.atob(base64String),len=binary_string.length,bytes=new Uint8Array(len),i=0;i<len;i++)bytes[i]=binary_string.charCodeAt(i);return bytes},enumerable:!1,configurable:!0}),Object.defineProperty(Uint8Array.prototype,"ToBase64",{value:function(){if(null==this||0==this.length)return null;for(var chunk,base64="",encodings="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bytes=new Uint8Array(this),byteLength=bytes.byteLength,byteRemainder=byteLength%3,mainLength=byteLength-byteRemainder,i=0;i<mainLength;i+=3)base64+=encodings[(16515072&(chunk=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2]))>>18]+encodings[(258048&chunk)>>12]+encodings[(4032&chunk)>>6]+encodings[63&chunk];return 1==byteRemainder?base64+=encodings[(252&(chunk=bytes[mainLength]))>>2]+encodings[(3&chunk)<<4]+"==":2==byteRemainder&&(base64+=encodings[(64512&(chunk=bytes[mainLength]<<8|bytes[1+mainLength]))>>10]+encodings[(1008&chunk)>>4]+encodings[(15&chunk)<<2]+"="),base64},enumerable:!1,configurable:!0}),Object.defineProperty(Uint8Array.prototype,"ToUtf8String",{value:function(){if(null!=self.TextDecoder)return(new TextDecoder).decode(this);var c2,c3,c,result="",i=0;for(c2=0;i<this.length;)(c=this[i])<128?(result+=String.fromCharCode(c),i++):191<c&&c<224?(c2=this[i+1],result+=String.fromCharCode((31&c)<<6|63&c2),i+=2):(c2=this[i+1],c3=this[i+2],result+=String.fromCharCode((15&c)<<12|(63&c2)<<6|63&c3),i+=3);return result},enumerable:!1,configurable:!0}),Object.defineProperty(Uint8Array.prototype,"ToHexString",{value:function(){var s="",h="0123456789ABCDEF";return this.forEach(function(v){return s+=h[v>>4]+h[15&v]}),s},enumerable:!1,configurable:!0}),Object.defineProperty(ArrayBuffer.prototype,"ToBase64",{value:function(){return Uint8Array.prototype.ToBase64.bind(this).apply()},enumerable:!1,configurable:!0}),Object.defineProperty(ArrayBuffer.prototype,"ToUtf8String",{value:function(){return Uint8Array.prototype.ToUtf8String.bind(this).apply()},enumerable:!1,configurable:!0}),Object.defineProperty(ArrayBuffer.prototype,"ToHexString",{value:function(){return Uint8Array.prototype.ToHexString.bind(this).apply()},enumerable:!1,configurable:!0}),Object.defineProperty(String,"FromBytes",{value:function(bytes){if(null==bytes)return null;if(0==bytes.length)return"";for(var c,char2,char3,out="",len=bytes.length,i=0;i<len;)switch((c=bytes[i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:out+=String.fromCharCode(c);break;case 12:case 13:char2=bytes[i++],out+=String.fromCharCode((31&c)<<6|63&char2);break;case 14:char2=bytes[i++],char3=bytes[i++],out+=String.fromCharCode((15&c)<<12|(63&char2)<<6|(63&char3)<<0)}return out},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"ToAnsi",{value:function(){for(var array=new(void 0!==self.Uint8Array?Uint8Array:Array)(this.length),i=0,il=this.length;i<il;++i)array[i]=255&this.charCodeAt(i);return array},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"ToUtf8",{value:function(){if(null!=self.TextEncoder)return(new TextEncoder).encode(this);for(var utf8=self.unescape(encodeURIComponent(this)),arr=new Uint8Array(utf8.length),i=0;i<utf8.length;i++)arr[i]=utf8.charCodeAt(i);return arr},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"GetHash",{value:function(){return this.ToUtf8().GetHash()},enumerable:!1,configurable:!0}),Object.defineProperty(Uint8Array.prototype,"GetHash",{value:function(){var onDone=function(z){},onError=function(z){},result={then:function(onfulfilled){return onDone=null==onfulfilled?function(z){}:onfulfilled,result},catch:function(onrejected){return onError=null==onrejected?function(z){}:onrejected,result}};if(null!=window.msCrypto)try{var r=window.msCrypto.subtle.digest("SHA-256",this.buffer);setTimeout(function(){return onDone(null==r.result?"":r.result.ToBase64())},null!=r.result?0:100)}catch(e){setTimeout(function(){return onError(e)},0)}else null==crypto||null==crypto.subtle||null==crypto.subtle.digest?onError(new Error("Cryptographic functions are not available.")):crypto.subtle.digest("SHA-256",this.buffer).then(function(result){try{onDone(null==result?"":result.ToBase64())}catch(e){onError(e)}});return result},enumerable:!1,configurable:!0});
var Accelatrix,__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){var op=[n,v];if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,(op=t?[2&op[0],t.value]:op)[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3]))_.label=op[1];else if(6===op[0]&&_.label<t[1])_.label=t[1],t=op;else{if(!(t&&_.label<t[2])){t[2]&&_.ops.pop(),_.trys.pop();continue}_.label=t[2],_.ops.push(op)}}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}};(Accelatrix=>{(Collections=>{var EnumerableSerialization,EnumerableSystem,Enumerator=(()=>{function Enumerator(generator){this.Current=void 0,this.GetIterator=generator,this.Reset()}return Enumerator.prototype.MoveNext=function(){var result=this.iterator.next();return this.Current=result.done?void 0:result.value,!result.done},Enumerator.prototype.Reset=function(){this.iterator=this.GetIterator()},Enumerator})(),Enumerable=((EnumerableSerialization=>{EnumerableSerialization.DataMember=function(argumentIsTypeOrConstructor){return function(target,propertyKey,descriptor){return((propertyKey,descriptor,argumentIsTypeOrConstructor)=>{var original=descriptor.value;descriptor.value=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var result=original.apply(this,args),parentOJson=this.toJSON.bind(this);return result.toJSON=function(){var typeOrConstructor,typeOrConstructorType,parent=parentOJson(),myArgs=null==argumentIsTypeOrConstructor||!0!==argumentIsTypeOrConstructor?args:args.ToList();return!0===argumentIsTypeOrConstructor&&myArgs.Any()&&null!=myArgs[0]&&"String"!=(typeOrConstructorType=(typeOrConstructor=myArgs[0]).GetType()).Name&&(typeOrConstructorType=(typeOrConstructorType.IsFunction?self.Accelatrix.Type.FromConstructor(typeOrConstructor):typeOrConstructor).GetFullName(),myArgs[0]=typeOrConstructorType),parent.Members.push({Op:propertyKey,Args:myArgs}),parent},result}})(propertyKey,descriptor,argumentIsTypeOrConstructor)}}})(EnumerableSerialization=EnumerableSerialization||{}),(()=>{function Enumerable(enumerable){var arrIterator,generator,getEnumeratorFactory,objIterator,_this=this;if(null==enumerable)throw new self.Accelatrix.ArgumentNullException("enumerable");this.toJSON=function(){var myObj={$type:this.GetType().GetFullName(),Members:[enumerable]};return null!=this.Key&&(myObj.Key=this.Key),myObj},getEnumeratorFactory=null==enumerable||enumerable instanceof Array?(null==enumerable&&(enumerable=[]),Object.defineProperty(this,"Count",{value:function(){return enumerable.length},enumerable:!1,configurable:!0}),arrIterator=function(){var nextIndex;return __generator(this,function(_a){switch(_a.label){case 0:nextIndex=0,_a.label=1;case 1:return nextIndex<enumerable.length?[4,enumerable[nextIndex++]]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})},Object.defineProperty(this,"Any",{value:function(){return 0<_this.Count()},enumerable:!1,configurable:!0}),function(){return new Enumerator(arrIterator)}):null!=enumerable.GetEnumerator&&enumerable.GetEnumerator instanceof Function?function(){return enumerable.GetEnumerator()}:enumerable instanceof Function||"GeneratorFunction"==enumerable.GetType().Name?(generator=enumerable,function(){return new Enumerator(generator)}):(objIterator=function(){return __generator(this,function(_a){switch(_a.label){case 0:return[4,enumerable];case 1:return _a.sent(),[2]}})},function(){return new Enumerator(objIterator)}),Object.defineProperty(this,"GetEnumerator",{get:function(){return getEnumeratorFactory},enumerable:!1,configurable:!0})}return Enumerable.AddFunctionalMethod=function(func){if(null==func)throw new self.Accelatrix.ArgumentNullException("func");if(!func.GetType().IsFunction)throw new self.Accelatrix.ArgumentException("A named function needs to be passed to AddFunctionalMethod.");if(String.IsNullOrWhiteSpace(func.name))throw new self.Accelatrix.ArgumentException("A named function needs to be passed and the one you provided does not have a name.");Enumerable.prototype[func.name]=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var result=func.bind(this).apply(this,args),parentOJson=this.toJSON.bind(this);return result.toJSON=function(){var parent=parentOJson();return parent.Members.push({Op:func.name,Args:args}),parent},result},Array.prototype[func.name]=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return func.bind(this).apply(this,args)}},Enumerable.prototype.GetEnumerator=function(){return null},Enumerable.prototype.Freeze=function(){function getEnumeratorFactory(){return new Enumerator(newIterator)}function any(){var enumerator=this.GetEnumerator(),result=enumerator.MoveNext();return result&&(hasPeekedResult=!0,peekedResult=enumerator.Current),result}var _this=this,myEnumerator=(Object.defineProperty(this,"Freeze",{value:function(){return _this},enumerable:!1,configurable:!0}),this.GetEnumerator()),hasPeekedResult=!1,peekedResult=void 0,newIterator=function(){return __generator(this,function(_a){switch(_a.label){case 0:return hasPeekedResult?(hasPeekedResult=!1,[4,peekedResult]):[3,2];case 1:_a.sent(),_a.label=2;case 2:return myEnumerator.MoveNext()?[4,myEnumerator.Current]:[3,4];case 3:return _a.sent(),[3,2];case 4:return[2]}})};Object.defineProperty(this,"GetEnumerator",{get:function(){return getEnumeratorFactory},enumerable:!1,configurable:!0});return any.bind(this),Object.defineProperty(this,"Any",{value:any,enumerable:!1,configurable:!0}),this},Enumerable.prototype.Any=function(){return this.GetEnumerator().MoveNext()},Enumerable.prototype.NotAny=function(){return!this.Any()},Object.defineProperty(Enumerable.prototype,"length",{get:function(){return this.ToArray()},enumerable:!1,configurable:!0}),Object.defineProperty(Enumerable.prototype,0,{get:function(){return this.FirstOrNull()},enumerable:!1,configurable:!0}),Object.defineProperty(Enumerable.prototype,1,{get:function(){return this.ToArray(),this.Skip(1).FirstOrNull()},enumerable:!1,configurable:!0}),Enumerable.prototype.toJSON=function(){return{$type:this.GetType().GetFullName(),Members:[]}},Enumerable.prototype.ToList=function(){for(var key,myEnumerator=this.GetEnumerator(),result=[];myEnumerator.MoveNext();)result.push(myEnumerator.Current);return null!=this.Key&&(key=this.Key,Object.defineProperty(result,"Key",{get:function(){return key},enumerable:!0})),result},Enumerable.prototype.Count=function(){return this.ToArray()},Enumerable.prototype.ToArray=function(){for(var list=this.ToList(),newCommittedEnumeration=new Enumerable(list),count=list.length,i=0;i<count;i++)0==i?Object.defineProperty(this,0,{get:function(){return list[0]},enumerable:!0,configurable:!1}):1==i?Object.defineProperty(this,1,{get:function(){return list[1]},enumerable:!0,configurable:!1}):this[i]=list[i];return Object.defineProperty(this,"Count",{value:function(){return count},enumerable:!1,configurable:!1}),Object.defineProperty(this,"GetEnumerator",{get:function(){return newCommittedEnumeration.GetEnumerator},enumerable:!1,configurable:!1}),Object.defineProperty(this,"ToArray",{value:function(){return count},enumerable:!1,configurable:!1}),count},Enumerable.prototype.ForEach=function(action){for(var myEnumerator=this.GetEnumerator(),index=0,proceed=!0;proceed&&myEnumerator.MoveNext();)var result=null==action||action(myEnumerator.Current,index++),proceed=null==result||!(!1===result)},Enumerable.prototype.OfType=function(typeConstructorOrType){return this.Where(function(z){return null==z||z.GetType().IsOfType(typeConstructorOrType)}).Select(function(z){return z})},Enumerable.prototype.ToEnumerable=function(){return new this.constructor([this])},Enumerable.prototype.Select=function(selector){var me=this;return new this.constructor(function(){var myEnumerator,index;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=0,_a.label=1;case 1:return myEnumerator.MoveNext()?[4,null==selector?myEnumerator.Current:selector(myEnumerator.Current,index++)]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})})},Enumerable.prototype.Concat=function(second){var me,secondEnumerator;return null==second?this:(me=this,secondEnumerator=second.GetEnumerator(),new this.constructor(function(){var myEnumerator;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),_a.label=1;case 1:return myEnumerator.MoveNext()?[4,myEnumerator.Current]:[3,3];case 2:return _a.sent(),[3,1];case 3:return secondEnumerator.MoveNext()?[4,secondEnumerator.Current]:[3,5];case 4:return _a.sent(),[3,3];case 5:return[2]}})}))},Enumerable.prototype.SelectMany=function(selector){var me=this;return new this.constructor(function(){var myEnumerator,index,children;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=0,_a.label=1;case 1:if(!myEnumerator.MoveNext())return[3,5];if(null==(children=null==selector?new me.constructor(myEnumerator.Current):new me.constructor(selector(myEnumerator.Current,index++))))return[3,4];children=children.GetEnumerator(),_a.label=2;case 2:return children.MoveNext()?[4,children.Current]:[3,4];case 3:return _a.sent(),[3,2];case 4:return[3,1];case 5:return[2]}})})},Enumerable.prototype.Where=function(selector){var me=this;return new this.constructor(function(){var myEnumerator,index;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=0,null==selector&&(selector=function(a,b){return!0}),_a.label=1;case 1:return myEnumerator.MoveNext()?selector(myEnumerator.Current,index++)?[4,myEnumerator.Current]:[3,3]:[3,4];case 2:_a.sent(),_a.label=3;case 3:return[3,1];case 4:return[2]}})})},Enumerable.prototype.FirstOrNull=function(){var myEnumerator=this.GetEnumerator();return myEnumerator.MoveNext(),void 0===myEnumerator.Current?null:myEnumerator.Current},Enumerable.prototype.LastOrNull=function(){var list=this.ToList();return 0==list.length?null:list[list.length-1]},Enumerable.prototype.Reverse=function(){return this.ToList().reverse()},Enumerable.prototype.NotNullOrEmpty=function(){return this.Where(function(z){return null!=z&&!String.IsNullOrWhiteSpace(z.toString())})},Enumerable.prototype.Contains=function(element){return this.Where(function(z){return Object.AreEqual(z,element)}).Any()},Enumerable.prototype.NotContains=function(element){return!this.Contains(element)},Enumerable.prototype.OrderBy=function(comparer){var list=this.ToList(),actualComparer=null==comparer?function(a,b){return EnumerableSystem.OrdinalComparer(a,b)}:function(a,b){return comparer.length<=1?EnumerableSystem.OrdinalComparer(comparer(a,void 0),comparer(b,void 0)):null==(b=comparer(a,b))||"Number"!=b.GetType()?EnumerableSystem.OrdinalComparer(a,b):b};return null==list?null:0==list.length?list:list.sort(function(a,b){return actualComparer(a,b)})},Enumerable.prototype.OrderByDescending=function(comparer){var list=this.ToList(),actualComparer=null==comparer?function(a,b){return EnumerableSystem.OrdinalComparer(a,b)}:function(a,b){return comparer.length<=1?EnumerableSystem.OrdinalComparer(comparer(a,void 0),comparer(b,void 0)):null==(b=comparer(a,b))||"Number"!=b.GetType()?EnumerableSystem.OrdinalComparer(a,b):b};return null==list?null:0==list.length?list:list.sort(function(a,b){return actualComparer(b,a)})},Enumerable.prototype.Distinct=function(equalityComparer){var me=this,popped=[],comparer=null!=equalityComparer?equalityComparer:function(a,b){return Object.AreEqual(a,b)};return new this.constructor(function(){var myEnumerator;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),_a.label=1;case 1:return myEnumerator.MoveNext()?(element=>{if(0!=popped.length)for(var i=0;i<popped.length;i++){if(popped[i]==element)return!0;if(null!=popped[i]&&comparer(popped[i],element))return!0}return!1})(myEnumerator.Current)?[3,3]:(popped.push(myEnumerator.Current),[4,myEnumerator.Current]):[3,4];case 2:_a.sent(),_a.label=3;case 3:return[3,1];case 4:return[2]}})})},Enumerable.prototype.TakeWhileDistinct=function(){var me=this,popped=[];return new this.constructor(function(){var myEnumerator,stop;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),stop=!1,_a.label=1;case 1:return stop||!myEnumerator.MoveNext()?[3,5]:(element=>{if(0!=popped.length)for(var i=0;i<popped.length;i++)if(Object.AreEqual(popped[i],element))return!0;return!1})(myEnumerator.Current)?[3,3]:(popped.push(myEnumerator.Current),[4,myEnumerator.Current]);case 2:return _a.sent(),[3,4];case 3:stop=!0,_a.label=4;case 4:return[3,1];case 5:return[2]}})})},Enumerable.prototype.SkipWhileDistinct=function(){var me=this,popped=[];return new this.constructor(function(){var myEnumerator,stopSkipping;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),stopSkipping=!1,_a.label=1;case 1:return myEnumerator.MoveNext()?((element=>{if(0!=popped.length)for(var i=0;i<popped.length;i++)if(Object.AreEqual(popped[i],element))return!0;return!1})(myEnumerator.Current)?(stopSkipping=!0,popped=null):stopSkipping||popped.push(myEnumerator.Current),stopSkipping?[4,myEnumerator.Current]:[3,3]):[3,4];case 2:_a.sent(),_a.label=3;case 3:return[3,1];case 4:return[2]}})})},Enumerable.prototype.GroupBy=function(keySelector){var me=this,popped=[];return new this.constructor(function(){var poppedGroupCount,myEnumerator,lineEnumerator,groupsEnumerator,_loop_1,values;return __generator(this,function(_a){switch(_a.label){case 0:poppedGroupCount=0,myEnumerator=me.GetEnumerator(),lineEnumerator=new Enumerable(function(){var i,_loop_2;return __generator(this,function(_a){switch(_a.label){case 0:i=0,_loop_2=function(){var transformed,poppedEntry;return __generator(this,function(_a){switch(_a.label){case 0:return transformed=keySelector(myEnumerator.Current,i++),poppedEntry=popped.Where(function(z){return Object.AreEqual(z.Key,transformed)}).FirstOrNull(),null==poppedEntry&&(poppedEntry={Key:transformed,Values:[]},popped.push(poppedEntry)),poppedEntry.Values.push(myEnumerator.Current),[4,poppedEntry];case 1:return _a.sent(),[2]}})},_a.label=1;case 1:return myEnumerator.MoveNext()?[5,_loop_2()]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})}).GetEnumerator(),groupsEnumerator=new Enumerable(function(){return __generator(this,function(_a){switch(_a.label){case 0:if(!lineEnumerator.MoveNext())return[3,4];_a.label=1;case 1:return poppedGroupCount<popped.length?[4,popped[++poppedGroupCount-1]]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[3,0];case 4:return[2]}})}).GetEnumerator(),_loop_1=function(){var currentKey,loadedValues;return __generator(this,function(_a){switch(_a.label){case 0:return currentKey=groupsEnumerator.Current.Key,loadedValues=groupsEnumerator.Current.Values,values=new Enumerable(function(){var nextIndex;return __generator(this,function(_a){switch(_a.label){case 0:nextIndex=0,_a.label=1;case 1:return nextIndex<loadedValues.length?[4,loadedValues[nextIndex++]]:[3,3];case 2:return _a.sent(),[3,1];case 3:if(!lineEnumerator.MoveNext())return[3,7];_a.label=4;case 4:return nextIndex<loadedValues.length?[4,loadedValues[nextIndex++]]:[3,6];case 5:return _a.sent(),[3,4];case 6:return[3,3];case 7:return[2]}})}),Object.defineProperty(values,"Key",{get:function(){return currentKey},enumerable:!0}),[4,values];case 1:return _a.sent(),[2]}})},_a.label=1;case 1:return groupsEnumerator.MoveNext()?[5,_loop_1()]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})})},Enumerable.prototype.GroupByConsecutive=function(keySelector){var me=this;return new this.constructor(function(){var myEnumerator,index,current,continueCycle,transformed,values,continueCycle2,newTransformed,valuesEnum;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=-1,continueCycle=!(current=void 0),_a.label=1;case 1:if(!continueCycle)return[3,3];if(void 0===current){if(index++,!myEnumerator.MoveNext())return continueCycle=!1,[3,3];current=myEnumerator.Current}for(transformed=null==keySelector?current:keySelector(current,index),values=[current],continueCycle2=!0;continueCycle2;){if(!myEnumerator.MoveNext()){continueCycle2=continueCycle=!1;break}index++,newTransformed=null==keySelector?myEnumerator.Current:keySelector(myEnumerator.Current,index),Object.AreEqual(transformed,newTransformed)?values.push(myEnumerator.Current):(current=myEnumerator.Current,continueCycle2=!1)}return valuesEnum=new Enumerable(values),Object.defineProperty(valuesEnum,"Key",{get:function(){return transformed}}),[4,valuesEnum];case 2:return _a.sent(),[3,1];case 3:return[2]}})})},Enumerable.prototype.Intersect=function(sequence){var me=this,what=sequence;return new this.constructor(function(){var myEnumerator,secondEnumerator,reachedEnd,popped,index,found,z,element;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),secondEnumerator=what.GetEnumerator(),reachedEnd=!1,popped=[],index=-1,_a.label=1;case 1:return myEnumerator.MoveNext()?(index++,reachedEnd||popped.length!=index||(secondEnumerator.MoveNext()?popped.unshift(secondEnumerator.Current):reachedEnd=!0),popped.Contains(myEnumerator.Current)?[4,myEnumerator.Current]:[3,3]):[3,7];case 2:return _a.sent(),[3,6];case 3:for(found=!1;!reachedEnd&&secondEnumerator.MoveNext();)if(z=secondEnumerator.Current,element=myEnumerator.Current,popped.unshift(z),Object.AreEqual(z,element)){found=!0;break}return found?[3,4]:(reachedEnd=!0,[3,6]);case 4:return[4,myEnumerator.Current];case 5:_a.sent(),_a.label=6;case 6:return[3,1];case 7:return[2]}})})},Enumerable.prototype.Except=function(sequence){var me=this,what=sequence;return new this.constructor(function(){var myEnumerator,secondEnumerator,reachedEnd,popped,index,found,z,element;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),secondEnumerator=what.GetEnumerator(),reachedEnd=!1,popped=[],index=-1,_a.label=1;case 1:return myEnumerator.MoveNext()?(index++,reachedEnd||popped.length!=index||(secondEnumerator.MoveNext()?popped.unshift(secondEnumerator.Current):reachedEnd=!0),popped.Contains(myEnumerator.Current)?[3,4]:[3,2]):[3,5];case 2:for(found=!1;!reachedEnd&&secondEnumerator.MoveNext();)if(z=secondEnumerator.Current,element=myEnumerator.Current,popped.unshift(z),Object.AreEqual(z,element)){found=!0;break}return found?[3,4]:(reachedEnd=!0,[4,myEnumerator.Current]);case 3:_a.sent(),_a.label=4;case 4:return[3,1];case 5:return[2]}})})},Enumerable.prototype.Union=function(sequence){var _this=this,sequence=null!=sequence&&null==sequence.Any?new Enumerable(sequence):sequence;return null!=sequence&&sequence.Any()?this.Concat(sequence.Where(function(z){return!_this.Contains(z)})):this},Enumerable.prototype.Skip=function(count){return this.Where(function(z,i){return count<=i})},Enumerable.prototype.Take=function(count){var me=this;return new this.constructor(function(){var myEnumerator,index;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=0,_a.label=1;case 1:return index++<count&&myEnumerator.MoveNext()?[4,myEnumerator.Current]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})})},Enumerable.prototype.SkipWhile=function(condition){var me=this;return new this.constructor(function(){var myEnumerator,endedSkipping;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),endedSkipping=!1,_a.label=1;case 1:return myEnumerator.MoveNext()?(endedSkipping=endedSkipping||null==condition||!condition(myEnumerator.Current))?[4,myEnumerator.Current]:[3,3]:[3,4];case 2:_a.sent(),_a.label=3;case 3:return[3,1];case 4:return[2]}})})},Enumerable.prototype.TakeWhile=function(condition){var me=this;return new this.constructor(function(){var myEnumerator,taking;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),taking=!0,_a.label=1;case 1:return taking&&myEnumerator.MoveNext()?(taking=(taking||null==condition)&&condition(myEnumerator.Current))?[4,myEnumerator.Current]:[3,3]:[3,4];case 2:_a.sent(),_a.label=3;case 3:return[3,1];case 4:return[2]}})})},Enumerable.prototype.Zip=function(second,resultSelector){var what=null!=second&&null==second.Any?new Enumerable(second):second,outputProducer=null!=resultSelector?resultSelector:function(element,second,index){return{Item1:element,Item2:second}};return this.Select(function(z,i){return{Element:z,Second:what.Skip(i).FirstOrNull()}}).Select(function(z,i){return outputProducer(z.Element,z.Second,i)})},Enumerable.prototype.Interleave=function(second){second=null!=second&&null==second.Any?new Enumerable(second):second;return null!=second&&second.Any()?this.Any()?this.Zip(second,function(a,b){return[a,b]}).SelectMany(function(z){return z}):second:this},Enumerable.prototype.ToDictionary=function(keySelector,valueSelector){var entries=this.Select(function(z,i){return{Key:keySelector(z,i),Value:null==valueSelector?null:valueSelector(z,i)}}).GroupBy(function(z){return z.Key}).Select(function(z){return{Key:z.Key,Value:z.Select(function(w){return w.Value}).ToList()}}).ToList();return new self.Accelatrix.Collections.HashMap(entries)},Enumerable.prototype.Sum=function(selector){var result,elements=(null==selector?this.Where(function(z){return null!=z}):this.Select(function(z,i){return selector(z,i)}).Where(function(z){return null!=z})).ToList();return elements.Any()?null==(result=Accelatrix.Quantity.Add(elements))?null:"Number"==elements[0].GetType().Name?result.Amount:result:0},Enumerable.prototype.Average=function(selector){var min,elements=this.Select(function(z,i){return null==selector?z:selector(z,i)}).Where(function(z){return null!=z}).ToList();if(elements.Take(1).Where(function(z){return null!=z&&z instanceof Date}).Any())return dates=elements.OfType(Date).Select(function(z){return z.getTime()}).ToList(),min=dates.Min(),dates=dates.Select(function(z){return z-min}).Sum(),new Date(min+Math.round(dates/elements.length));var dates=elements.Sum();if(null==dates)return null;var isNumber="Number"==dates.GetType().Name,avg=isNumber?dates/elements.Count():dates.Amount/elements.Count();if(isNumber)return avg;if(Object.isFrozen(dates))return[dates,avg-dates.Amount].Sum();try{Object.defineProperty(dates,"Amount",{value:function(){return avg},enumerable:!0})}catch(ex){return[dates,avg-dates.Amount].Sum()}return dates},Enumerable.prototype.Max=function(comparer){var result;return!this.Any()||null==(result=this.Where(function(z){return null!=z}).OrderByDescending(function(z){return null!=comparer?comparer:null!=z&&"Date"==z.GetType().Name?z.getTime():null!=z.Amount?z.Amount:z}).FirstOrNull())?null:result instanceof Date?result:[result,0].Sum()},Enumerable.prototype.Min=function(comparer){var result;return!this.Any()||null==(result=this.Where(function(z){return null!=z}).OrderBy(function(z){return null!=comparer?comparer:null!=z&&"Date"==z.GetType().Name?z.getTime():null!=z.Amount?z.Amount:z}).FirstOrNull())?null:result instanceof Date?result:[result,0].Sum()},Enumerable.Range=function(start,count){var result;return null==start?null:((result=new Enumerable(function(){var item;return __generator(this,function(_a){switch(_a.label){case 0:item=start,_a.label=1;case 1:return null==count||item-start<count?[4,item++]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})})).toJSON=function(){return{$type:"Accelatrix.Collections.Enumerable",Members:[{Op:function(a,b){return self.Accelatrix.Collections.Enumerable.Range(a,b)},Args:[start,count]}]}},result)},__decorate([EnumerableSerialization.DataMember(!0),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],Enumerable.prototype,"OfType",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Object)],Enumerable.prototype,"ToEnumerable",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"Select",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],Enumerable.prototype,"Concat",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"SelectMany",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"Where",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Object)],Enumerable.prototype,"NotNullOrEmpty",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"Distinct",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Object)],Enumerable.prototype,"TakeWhileDistinct",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Object)],Enumerable.prototype,"SkipWhileDistinct",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"GroupBy",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"GroupByConsecutive",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],Enumerable.prototype,"Intersect",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],Enumerable.prototype,"Except",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],Enumerable.prototype,"Union",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Number]),__metadata("design:returntype",Object)],Enumerable.prototype,"Skip",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Number]),__metadata("design:returntype",Object)],Enumerable.prototype,"Take",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"SkipWhile",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"TakeWhile",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"Zip",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],Enumerable.prototype,"Interleave",null),Enumerable})());Collections.Enumerable=Enumerable,(EnumerableSystem=>{EnumerableSystem.OrdinalComparer=function(first,second){return null==first&&null==second?0:null==first&&null!=second?1:null!=first&&null==second?-1:first==second||first.Equals(second)?0:second<first?1:-1},Object.defineProperty(Enumerable.prototype.constructor,"name",{get:function(){return"Enumerable"}})})(EnumerableSystem=EnumerableSystem||{})})(Accelatrix.Collections||(Accelatrix.Collections={}))})(Accelatrix=Accelatrix||{}),Array.prototype.GetEnumerator=function(){return new Accelatrix.Collections.Enumerable(this).GetEnumerator()},Array.prototype.OfType=function(type){return new Accelatrix.Collections.Enumerable(this).OfType(type)},Array.prototype.Any=function(){return null!=this&&0<this.length},Array.prototype.NotAny=function(){return null==this||this.length<=0},Array.prototype.Freeze=function(){var result=new Accelatrix.Collections.Enumerable(this).Freeze();return Object.defineProperty(this,"Freeze",{value:function(){return result}}),result},Array.prototype.ToList=function(){return this},Array.prototype.ToEnumerable=function(){return new Accelatrix.Collections.Enumerable([this])},Array.prototype.Count=function(){return this.length},Array.prototype.ForEach=function(action){for(var doBreak=!1,i=0;i<this.length&&!doBreak;i++)doBreak=!1===action(this[i],i)},Array.prototype.Concat=function(second){return new Accelatrix.Collections.Enumerable(this).Concat(second)},Array.prototype.Select=function(selector){return new Accelatrix.Collections.Enumerable(this).Select(selector)},Array.prototype.SelectMany=function(selector){return new Accelatrix.Collections.Enumerable(this).SelectMany(selector)},Array.prototype.Where=function(selector){return new Accelatrix.Collections.Enumerable(this).Where(selector)},Array.prototype.FirstOrNull=function(){return null!=this&&this.Any()?this[0]:null},Array.prototype.LastOrNull=function(){return null!=this&&this.Any()?this[this.length-1]:null},Array.prototype.Reverse=function(){return this.reverse()},Array.prototype.NotNullOrEmpty=function(){return new Accelatrix.Collections.Enumerable(this).NotNullOrEmpty()},Array.prototype.Contains=function(element){for(var i=0;i<this.length;i++){var z=this[i];if(z==element||null===z&&null===element||void 0===z&&void 0===element||null!=z&&z.Equals(element))return!0}return!1},Array.prototype.NotContains=function(element){return!this.Contains(element)},Array.prototype.OrderBy=function(comparer){return new Accelatrix.Collections.Enumerable(this).OrderBy(comparer)},Array.prototype.OrderByDescending=function(comparer){return new Accelatrix.Collections.Enumerable(this).OrderByDescending(comparer)},Array.prototype.Distinct=function(){return new Accelatrix.Collections.Enumerable(this).Distinct()},Array.prototype.TakeWhileDistinct=function(){return new Accelatrix.Collections.Enumerable(this).TakeWhileDistinct()},Array.prototype.SkipWhileDistinct=function(){return new Accelatrix.Collections.Enumerable(this).SkipWhileDistinct()},Array.prototype.GroupBy=function(keySelector){return new Accelatrix.Collections.Enumerable(this).GroupBy(keySelector)},Array.prototype.GroupByConsecutive=function(keySelector){return new Accelatrix.Collections.Enumerable(this).GroupByConsecutive(keySelector)},Array.prototype.Intersect=function(sequence){return new Accelatrix.Collections.Enumerable(this).Intersect(sequence)},Array.prototype.Except=function(sequence){return new Accelatrix.Collections.Enumerable(this).Except(sequence)},Array.prototype.Union=function(sequence){return new Accelatrix.Collections.Enumerable(this).Union(sequence)},Array.prototype.Skip=function(count){return new Accelatrix.Collections.Enumerable(this).Skip(count)},Array.prototype.Take=function(count){return new Accelatrix.Collections.Enumerable(this).Take(count)},Array.prototype.SkipWhile=function(condition){return new Accelatrix.Collections.Enumerable(this).SkipWhile(condition)},Array.prototype.TakeWhile=function(condition){return new Accelatrix.Collections.Enumerable(this).TakeWhile(condition)},Array.prototype.Zip=function(second,resultSelector){return new Accelatrix.Collections.Enumerable(this).Zip(second,resultSelector)},Array.prototype.Interleave=function(second){return new Accelatrix.Collections.Enumerable(this).Interleave(second)},Array.prototype.ToDictionary=function(keySelector,valueSelector){return new Accelatrix.Collections.Enumerable(this).ToDictionary(keySelector,valueSelector)},Array.prototype.Sum=function(selector){return new Accelatrix.Collections.Enumerable(this).Sum(selector)},Array.prototype.Average=function(selector){return new Accelatrix.Collections.Enumerable(this).Average(selector)},Array.prototype.Max=function(selector){return new Accelatrix.Collections.Enumerable(this).Max(selector)},Array.prototype.Min=function(selector){return new Accelatrix.Collections.Enumerable(this).Min(selector)},Object.defineProperty(Object,"FlattenHierarchy",{value:function(obj,childEnumerator){if(null==obj)return null;try{return null!=childEnumerator&&null!=childEnumerator(obj)?[obj].Concat(childEnumerator(obj).SelectMany(function(z){return null==z?[]:Object.FlattenHierarchy(z,childEnumerator)})):[obj]}catch(e){return[obj]}},enumerable:!1});
var Accelatrix,__extends=this&&this.__extends||(()=>{var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}})();(Accelatrix=>{(Collections=>{var HashMap=(_super=>{function HashMap(members){var _this=_super.call(this)||this,myMembers=[],mySplice=_this.splice.bind(_this),myPush=_this.push.bind(_this);return Object.defineProperty(_this,"$type",{get:function(){return"Accelatrix.Collections.HashMap"},enumerable:!0}),Object.defineProperty(_this,"ContainsKey",{value:function(key){return myMembers.Where(function(z){return null==key?null==z.Key:z.Hash==key.GetHashCode()}).Any()}}),Object.defineProperty(_this,"Add",{value:function(key,value){if(null==key)throw new self.Accelatrix.ArgumentNullException("key");if(_this.ContainsKey(key))throw new DuplicateMemberException(key);null!=key&&(key.toString=function(){return key.GetHashCode(!0)}),myMembers.push({Key:key,Hash:key.GetHashCode(!0),Value:value}),myPush({Key:key,Value:value})}}),Object.defineProperty(_this,"Keys",{get:function(){return myMembers.Select(function(z){return z.Key}).ToList()}}),Object.defineProperty(_this,"Values",{get:function(){return myMembers.Select(function(z){return z.Value}).ToList()}}),Object.defineProperty(_this,"Remove",{value:function(key){myMembers.Select(function(z,i){return{Index:i,Hash:z.Hash}}).Where(function(z){return null==key?0==z.Hash:z.Hash==key.GetHashCode()}).Take(1).ForEach(function(z){myMembers.splice(z.Index,1),mySplice(z.Index,1)})}}),Object.defineProperty(_this,"toJSON",{value:function(){return{$type:"Accelatrix.Collections.HashMap",Members:myMembers.Select(function(z){return{Key:z.Key,Value:z.Value}}).ToList()}}}),null!=members&&members.ForEach(function(z){return _this.Add(z.Key,z.Value)}),delete _this.push,delete _this.splice,delete _this.shift,delete _this.slice,delete _this.sort,delete _this.fill,delete _this.unshift,delete _this.keys,_this}return __extends(HashMap,_super),Object.defineProperty(HashMap.prototype,"Keys",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(HashMap.prototype,"Values",{get:function(){return null},enumerable:!1,configurable:!0}),HashMap.prototype.ContainsKey=function(key){return!1},HashMap.prototype.Add=function(key,value){},HashMap.prototype.Remove=function(key){},HashMap})(Array),DuplicateMemberException=(Collections.HashMap=HashMap,(_super=>{function DuplicateMemberException(message,member){member=String.IsNullOrWhiteSpace(member)?"Member '"+message.ToString()+"' already exists.":message,message=_super.call(this,member)||this;return Object.defineProperty(message,"$type",{enumerable:!0,configurable:!0,get:function(){return"Accelatrix.Collections.DuplicateMemberException"}}),message}return __extends(DuplicateMemberException,_super),DuplicateMemberException})(self.Accelatrix.Exception));Collections.DuplicateMemberException=DuplicateMemberException,Object.defineProperty(HashMap.prototype.constructor,"name",{get:function(){return"HashMap"}}),Object.defineProperty(DuplicateMemberException.prototype.constructor,"name",{get:function(){return"DuplicateMemberException"}})})(Accelatrix.Collections||(Accelatrix.Collections={}))})(Accelatrix=Accelatrix||{});if("object"==typeof module&&"object"==typeof module.exports)module.exports=Accelatrix;Accelatrix.__esModule=Accelatrix;Accelatrix.Accelatrix=Accelatrix;if(self==null){self={}};self["Accelatrix"]=Accelatrix;
var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},Accelatrix;!function(Accelatrix_1){var Serialization;!function(Serialization){function FromJSON(json,type){return SerializationSystem.ParseJSON(json,type)}function ToJSON(obj){return SerializationSystem.Stringify(obj)}function KnownType(constructorOrAlias){var knownType;return constructorOrAlias instanceof Function?(knownType=SerializationSystem.RegisterKnownType(constructorOrAlias),Object.defineProperty(constructorOrAlias,"$type",{get:function(){return knownType.Type.GetFullName()},enumerable:!0}),constructorOrAlias):function(ctor){var knownType;return null!=ctor&&(knownType=SerializationSystem.RegisterKnownType(ctor,constructorOrAlias),Object.defineProperty(ctor,"$type",{get:function(){return knownType.Type.GetFullName()},enumerable:!0})),ctor}}function OverrideConstructorToIncludeTypeProperty(constructor,alias){function f(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var _this=original.call(this,args);return null!=_this&&null==_this.$type&&Object.defineProperty(_this,"$type",{enumerable:!0,configurable:!0,get:function(){return _this.GetType().GetFullName()}}),_this}var original=constructor;Object.defineProperty(f,"name",{value:original.name}),f.prototype=original.prototype,f.__proto__=original.__proto__,Object.keys(original).forEach(function(z){return f[z]=original[z]}),SerializationSystem.RegisterKnownType(f,alias)}function DataMember(include){return function(target,propertyKey,descriptor){SerializationSystem.EnrichKnownType(target,null,null,null,null,{propertyKey:propertyKey,include:include})}}function OnSerializing(){return function(target,propertyKey,descriptor){SerializationSystem.EnrichKnownType(target,target[propertyKey],null,null,null)}}function OnSerialized(){return function(target,propertyKey,descriptor){SerializationSystem.EnrichKnownType(target,null,target[propertyKey],null,null)}}function OnDeserializing(){return function(target,propertyKey,descriptor){SerializationSystem.EnrichKnownType(target,null,null,target[propertyKey],null)}}function OnDeserialized(){return function(target,propertyKey,descriptor){SerializationSystem.EnrichKnownType(target,null,null,null,target[propertyKey])}}var SerializationSystem;Serialization.FromJSON=FromJSON,Serialization.ToJSON=ToJSON,Serialization.KnownType=KnownType,Serialization.DataMember=DataMember,Serialization.OnSerializing=OnSerializing,Serialization.OnSerialized=OnSerialized,Serialization.OnDeserializing=OnDeserializing,Serialization.OnDeserialized=OnDeserialized,!function(SerializationSystem){var knownTypes=[],base64RegEx=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;function ParseJSON(json,type){if(String.IsNullOrWhiteSpace(json))throw new Accelatrix.ArgumentNullException("json");var targetType;if(null!=type&&"String"==type.GetType().Name){var myType=self.Accelatrix.Type.FromName(type);if(null==myType||0==myType.length)throw new self.Accelatrix.Type.TypeNotFoundException(type);if(1!=myType.length)throw new self.Accelatrix.Type.AmbiguousTypeException(type,null,myType);targetType=myType[0]}else targetType=null!=type&&type.GetType().IsFunction?self.Accelatrix.Type.FromConstructor(type):type;var rootObj=null,jsonResolver=function(key,value){if(null==rootObj&&(rootObj=this),null!=value&&value instanceof Object){var proposedType=void 0;if(String.IsNullOrWhiteSpace(value.$type)){if(this==rootObj)proposedType=GetPropertyType(targetType,key);else if(!String.IsNullOrWhiteSpace(this.$type))try{var myType=GetTypeFromHint(this.$type);proposedType=GetPropertyType(myType,key)}catch(ex2){}}else try{proposedType=GetTypeFromHint(value.$type)}catch(ex){if(this==rootObj)proposedType=GetPropertyType(targetType,key);else if(!String.IsNullOrWhiteSpace(this.$type))try{var myType=GetTypeFromHint(this.$type),proposedType=GetPropertyType(myType,key)}catch(ex2){}}null==proposedType||proposedType.IsPrimitive||(value=ObjectToClass(value,proposedType))}else if(null!=value&&(value instanceof String||"string"==typeof value)){if(value.length<=29&&23<=value.length&&value.indexOf(" ")<0&&0<="123456789".indexOf(value.substring(0,1))){var result=Object.UnboxDates(value);if(null!=result&&null!=result.getTime)return result}var prefix;if(!String.IsNullOrWhiteSpace(value)&&0==value.indexOf("base64,")&&base64RegEx.test(value.substring(7)))try{return Uint8Array.FromBase64(value.substring(7))}catch(ex){}else if(8<=value.length)return prefix=value.substring(0,8),"function"===prefix?eval("("+value+")"):"_PxEgEr_"===prefix||"_NuFrRa_"===prefix?eval(value.slice(8)):value}return value},result="string"==typeof json||json instanceof String?JSON.parse(json,jsonResolver):jsonResolver("",json),resultType;return null==result||(resultType=result.GetType(),resultType.IsPrimitive&&"Object"!=resultType.Name)||resultType.IsPrimitive&&null==targetType&&(null==result||String.IsNullOrWhiteSpace(result.$type)||(targetType=GetTypeFromHint(result.$type)),"Object"==resultType.Name)&&null!=targetType&&"Object"!=targetType.Name&&(result=ObjectToClass(result,targetType)),result}function GetTypeFromHint(typeName){var candidates=Accelatrix.Type.FromName(typeName);if(null==candidates||0==candidates.length)throw new self.Accelatrix.Type.TypeNotFoundException(typeName);if(1!=candidates.length)throw new self.Accelatrix.Type.AmbiguousTypeException(typeName);return candidates[0]}function GetPropertyType(type,propertyName){return null==type||String.IsNullOrWhiteSpace(propertyName)||0==(type=type.GetProperties().map(function(z){return{Name:z.Name,Type:z.Type}}).concat(type.GetFields().map(function(z){return{Name:z.Name,Type:z.Type}})).filter(function(z){return z.Name==propertyName}).map(function(z){return z.Type}).filter(function(z){return null!=z})).length?null:type[0]}function FillInstance(target,from){null!=from&&null!=target&&Object.keys(from).filter(function(z){return"$type"!=z}).filter(function(z){return null!=from[z]}).forEach(function(z){target[z];try{var result=from[z];target[z]=result}catch(ex){}finally{if(null==target[z])try{var result_1=from[z];Object.defineProperty(target,z,{get:function(){return result_1},enumerable:!0})}catch(ex){console.warn("Could not set the value of member '"+z+"' in object of type '"+target.GetType().GetFullName()+"'. For better results, please include a parameter with the same name in the construtor, or ensure that the property with the same name is set as configurable: true.")}}})}function ObjectToClass(obj,type){if(type.IsOfType(self.Accelatrix.Collections.Enumerable))return ObjectToEnumerable(obj,type);var newValue;try{newValue=type.CreateNewInstance(obj)}catch(ex){newValue=obj}type=GetKnownType(type);null!=type&&null!=type.OnDeserializing&&type.OnDeserializing.bind(newValue)();try{FillInstance(newValue,obj)}catch(ex){newValue=obj}return null!=type&&null!=type.OnDeserialized&&type.OnDeserialized.bind(newValue)(),newValue}function ObjectToEnumerable(obj,enumerableType){var members=obj.Members,firstMember=members[0].Op,result=null==(firstMember=firstMember instanceof Function?firstMember.apply(null,members[0].Args):firstMember)?enumerableType.CreateNewInstance([members[0]]):enumerableType.CreateNewInstance([firstMember]),key=(members.Skip(1).ForEach(function(z){return result=result[z.Op].apply(result,z.Args)}),obj.Key);return null!=key&&Object.defineProperty(result,"Key",{get:function(){return key},enumerable:!0}),result}function Stringify(obj){var pendingSerialized=null,obj=JSON.stringify(obj,function(key,value){if(null!=pendingSerialized&&(pendingSerialized(),pendingSerialized=null),"string"!=typeof value&&"number"!=typeof value&&"boolean"!=typeof value&&!(value instanceof Date)){null!=value&&value instanceof Error&&null==value.$type&&((value=new Accelatrix.Exception(String.IsNullOrWhiteSpace(value.stack)?value.message:value.stack)).stack=value.stack);var func,isFunction=value instanceof Function||"function"==typeof value,isObject=!isFunction&&null!=value&&value instanceof Object,objectType=isObject?value.GetType():null,objectKnownType=GetKnownType(objectType);if(isObject&&HandleDataMembersOnSerialization(value,objectKnownType),null!=objectKnownType&&null!=objectKnownType.OnSerializing&&(func=(func=objectKnownType.OnSerializing).bind(value))(),null!=objectKnownType&&null!=objectKnownType.OnSerialized&&(func=(func=objectKnownType.OnSerialized).bind(value),pendingSerialized=func),isObject&&String.IsNullOrWhiteSpace(value.$type)){if(!objectType.IsArray)return"Object"==(objectKnownType=value.GetType().GetFullName())?value:__assign({$type:objectKnownType},value);if("Uint8Array"==objectType.Name)return"base64,"+value.ToBase64();if(null!=value.Key)return{$type:"Accelatrix.Collections.Enumerable",Key:value.Key,Members:[value.slice(0,value.length)]}}else{if(isFunction)return(func=value.toString()).length<8||"function"!==func.substring(0,8)?"_NuFrRa_"+func:func;if(value instanceof RegExp)return"_PxEgEr_"+value}}return value});return null!=pendingSerialized&&(pendingSerialized(),pendingSerialized=null),obj}function RegisterKnownType(type,alias){alias=type instanceof Function?Accelatrix.Type.FromConstructor(type,alias):type;if(null!=type)return null==(type=GetKnownType(alias))&&knownTypes.push(type={Type:alias,OnSerializing:null,OnSerialized:null,OnDeserializing:null,OnDeserialized:null,DataMembers:{}}),type}function GetKnownType(type){if(null!=type){for(var entry,i=0;i<knownTypes.length;i++)if(knownTypes[i].Type==type){entry=knownTypes[i];break}return entry}}function EnrichKnownType(target,onSerializing,onSerialized,onDeserializing,onDeserialized,dataMember){var target=null==target?target:target.constructor;if(null!=target)return target=RegisterKnownType(Accelatrix.Type.FromConstructor(target)),null!=onSerializing&&(target.OnSerializing=onSerializing),null!=onSerialized&&(target.OnSerialized=onSerialized),null!=onDeserializing&&(target.OnDeserializing=onDeserializing),null!=onDeserialized&&(target.OnDeserialized=onDeserialized),null!=dataMember&&(target.DataMembers[dataMember.propertyKey]=null==dataMember.include||!0===dataMember.include,target.ResolvedDataMembers=GetDataMembers(target.Type)),target}function GetDataMembers(type){var result={};if(null!=type)for(var myType=type;null!=myType;)(()=>{var forMe=GetKnownType(myType);null!=forMe&&Object.keys(forMe.DataMembers).filter(function(z){return null==result[z]}).forEach(function(z){return result[z]={Type:myType,Include:forMe.DataMembers[z]}}),myType=myType.BaseType})();return result}function HandleDataMembersOnSerialization(obj,knownType){var dataMembers;null!=knownType&&null!=(dataMembers=knownType.ResolvedDataMembers)&&0!=Object.keys(dataMembers).length&&Object.keys(dataMembers).map(function(z){return{MemberName:z,Include:dataMembers[z].Include,Type:dataMembers[z].Type}}).forEach(function(z){var target,desc=Object.getOwnPropertyDescriptor(obj,z.MemberName),inherited=!1;null==desc&&(inherited=!0,target=z.Type.GetConstructor().prototype,desc=Object.getOwnPropertyDescriptor(target,z.MemberName)),null!=desc&&(null!=desc.get?!inherited&&desc.enumerable&&z.Include||inherited&&!z.Include||((target=desc.get).bind(obj),Object.defineProperty(obj,z.MemberName,{get:target,enumerable:z.Include})):null==desc.value||!inherited&&desc.enumerable&&z.Include||z.Include!=desc.enumerable&&Object.defineProperty(obj,z.MemberName,{value:desc.value,enumerable:z.Include}))})}SerializationSystem.ParseJSON=ParseJSON,SerializationSystem.Stringify=Stringify,SerializationSystem.RegisterKnownType=RegisterKnownType,SerializationSystem.EnrichKnownType=EnrichKnownType}(SerializationSystem=SerializationSystem||{})}(Serialization=Accelatrix_1.Serialization||(Accelatrix_1.Serialization={}))}(Accelatrix=Accelatrix||{});if("object"==typeof module&&"object"==typeof module.exports)module.exports=Accelatrix;Accelatrix.__esModule=Accelatrix;Accelatrix.Accelatrix=Accelatrix;if(self==null){self={}};self["Accelatrix"]=Accelatrix;
var Accelatrix;(Accelatrix=>{(Async=>{function AsPromise(obj,resolveAfter){var theResolver,theRejector,cancelled,thePromise;return IsPromise(obj)?(null==obj.ContinueWith&&Object.defineProperty(obj,"ContinueWith",{value:function(continueWith,merge){return Async.Chain(thePromise,continueWith,merge)}}),obj):(cancelled=!(theRejector=function(ex){return console.error(ex)}),(thePromise={then:function(onFullfilled){if(theResolver=onFullfilled,!cancelled)try{null==resolveAfter||resolveAfter<0?null!=theResolver&&theResolver(obj):setTimeout(function(){null!=theResolver&&theResolver(obj)},resolveAfter)}catch(ex){null!=theRejector&&theRejector(ex)}return thePromise},catch:function(onerror){return theRejector=onerror,thePromise},Cancel:function(){cancelled=!0;try{null!=theRejector&&theRejector(new self.Accelatrix.AbortException)}catch(ex){}}}).Then=thePromise.then,thePromise.Catch=thePromise.catch,Object.defineProperty(thePromise,"ContinueWith",{value:function(continueWith,merge){return Async.Chain(thePromise,continueWith,merge)}}),thePromise)}function AsPromiseLike(obj){var theResolver,thePromise;return IsPromise(obj)?obj:thePromise={then:function(onFullfilled){theResolver=onFullfilled;try{null!=theResolver&&theResolver(obj)}catch(ex){throw ex}finally{theResolver=function(){}}return thePromise},catch:function(onerror){return thePromise}}}function IsPromise(obj){return null!=obj&&null!=obj.then&&obj.then instanceof Function}Async.Chain=function(promise,continueWith,merge){function doChain(){hasChained||(hasChained=!0,null!=promise.catch&&promise.catch(function(exception){try{null!=rejector&&rejector(exception)}catch(ex){throw ex}finally{canceller=resolver=rejector=function(){}}}),promise.then(function(result){var bypassFinally=!1;try{var followUp=continueWith(result);merge&&IsPromise(followUp)?(promise=followUp,merge=hasChained=!(continueWith=function(z){return z}),doChain(),bypassFinally=!0):(resolvedResult=followUp,null!=resolver&&resolver(followUp))}catch(ex){null!=rejector&&rejector(ex)}finally{if(bypassFinally)return;canceller=resolver=rejector=function(){}}}))}var resolver,finalizer,_this=this,rejector=function(ex){console.error(ex)},resolvedResult=void 0,canceller=(promise=AsPromiseLike(promise),function(){try{if(null!=promise.Cancel)promise.Cancel();else{resolver=null;try{null!=rejector&&rejector(new self.Accelatrix.AbortException)}catch(ex2){}finally{null!=finalizer&&finalizer()}}}catch(ex){}finally{finalizer=rejector=resolver=null,canceller=function(){}}}),hasChained=!1,myPromise={};return Object.defineProperty(myPromise,"then",{value:function(onfulfilled){if(resolver=onfulfilled,void 0!==resolvedResult)try{null!=resolver&&resolver(resolvedResult===myPromise?void 0:resolvedResult)}catch(ex){null!=rejector?rejector(ex):console.error(ex)}else doChain();return myPromise}}),Object.defineProperty(myPromise,"Then",{value:function(onfulfilled){return _this.then(onfulfilled)}}),Object.defineProperty(myPromise,"catch",{value:function(onRejected){return rejector=onRejected,myPromise}}),Object.defineProperty(myPromise,"Catch",{value:function(onRejected){return rejector=onRejected,myPromise}}),Object.defineProperty(myPromise,"Finally",{value:function(onFinally){return finalizer=onFinally,myPromise}}),Object.defineProperty(myPromise,"Cancel",{value:function(){canceller()}}),Object.defineProperty(myPromise,"ContinueWith",{value:function(continueWith,merge){return Async.Chain(myPromise,continueWith,merge)}}),null!=promise.Blocking&&(myPromise.Blocking=promise.Blocking),myPromise},Async.AsPromise=AsPromise,Async.IsPromise=IsPromise,Async.CombineAll=function(promises){var work,cancelAll,resolver,rejector,finalizer,canceller,myPromise,doChain;return null!=promises&&promises.Any()?(work=[],cancelAll=function(){work.Where(function(z){return null!=z.Canceller}).ForEach(function(z){try{z.Canceller()}catch(ex){}finally{z.Canceller=null}})},rejector=function(ex){console.error(ex)},canceller=function(){try{null!=rejector&&rejector(new self.Accelatrix.AbortException)}catch(ex){}finally{finalizer=rejector=resolver=null,canceller=function(){},cancelAll()}},myPromise={},doChain=function(){0<work.length||promises.Select(AsPromiseLike).ForEach(function(z){var workEntry={Canceller:z.Cancel,Result:void 0,Done:!1};work.push(workEntry),null!=z.catch&&z.catch(function(ex){workEntry.Canceller=null,workEntry.Done=!0;try{null!=rejector&&rejector(ex)}catch(ex){console.error(ex)}finally{try{null!=finalizer&&finalizer()}catch(ex2){}finalizer=rejector=resolver=null,canceller=function(){},cancelAll()}}),z.then(function(r){if(workEntry.Canceller=null,workEntry.Result=r,workEntry.Done=!0,work.length>=promises.length&&!work.Where(function(w){return!w.Done}).Any())try{null!=resolver&&resolver(work.Select(function(w){return w.Result}).ToList())}catch(ex){null!=rejector&&rejector(ex)}finally{try{null!=finalizer&&finalizer()}catch(ex2){}finalizer=rejector=resolver=null,canceller=function(){},cancelAll()}})})},Object.defineProperty(myPromise,"then",{value:function(onfulfilled){return resolver=onfulfilled,doChain(),myPromise}}),Object.defineProperty(myPromise,"Then",{value:function(onfulfilled){return resolver=onfulfilled,doChain(),myPromise}}),Object.defineProperty(myPromise,"catch",{value:function(onRejected){return rejector=onRejected,myPromise}}),Object.defineProperty(myPromise,"Catch",{value:function(onRejected){return rejector=onRejected,myPromise}}),Object.defineProperty(myPromise,"Finally",{value:function(onFinally){return finalizer=onFinally,myPromise}}),Object.defineProperty(myPromise,"Cancel",{value:function(){canceller()}}),Object.defineProperty(myPromise,"ContinueWith",{value:function(continueWith,merge){return Async.Chain(myPromise,continueWith,merge)}}),myPromise):AsPromise([])}})(Accelatrix.Async||(Accelatrix.Async={}))})(Accelatrix=Accelatrix||{});if("object"==typeof module&&"object"==typeof module.exports)module.exports=Accelatrix;Accelatrix.__esModule=Accelatrix;Accelatrix.Accelatrix=Accelatrix;if(self==null){self={}};self["Accelatrix"]=Accelatrix;
var __extends=this&&this.__extends||(()=>{var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}})(),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},Accelatrix;!function(Accelatrix){var Tasks=(()=>{function Tasks(){}return Object.defineProperty(Tasks,"Config",{get:function(){return TaskScheduler.config},enumerable:!1,configurable:!0}),Tasks})(),Collections,TaskScheduler,ScriptHandler,StatefulActivityHandler;Accelatrix.Tasks=Tasks,(Tasks=>{(TaskScriptSource=>{TaskScriptSource.Url="Url",TaskScriptSource.PlainText="PlainText"})(Tasks.TaskScriptSource||(Tasks.TaskScriptSource={})),(DataPassingMethod=>{DataPassingMethod.Clone="Clone",DataPassingMethod.TypedSerialization="TypedSerialization"})(Tasks.DataPassingMethod||(Tasks.DataPassingMethod={})),(TaskStatus=>{TaskStatus[TaskStatus.Created=0]="Created",TaskStatus[TaskStatus.WaitingToRun=1]="WaitingToRun",TaskStatus[TaskStatus.Running=2]="Running",TaskStatus[TaskStatus.RanToCompletion=3]="RanToCompletion",TaskStatus[TaskStatus.Cancelled=4]="Cancelled",TaskStatus[TaskStatus.Faulted=5]="Faulted"})(TaskStatus=Tasks.TaskStatus||(Tasks.TaskStatus={}));var TaskStatus,TaskException=(_super=>{function TaskException(message){message=_super.call(this,message)||this;return Object.defineProperty(message,"$type",{enumerable:!0,configurable:!0,get:function(){return"Accelatrix.Tasks.TaskException"}}),message}return __extends(TaskException,_super),TaskException})(self.Accelatrix.Exception),TaskAbortException=(_super=>{function TaskAbortException(message){message=_super.call(this,String.IsNullOrWhiteSpace(message)?"Task is being aborted.":message)||this;return Object.defineProperty(message,"$type",{enumerable:!0,configurable:!0,get:function(){return"Accelatrix.Tasks.TaskAbortException"}}),message}return __extends(TaskAbortException,_super),TaskAbortException})(Tasks.TaskException=TaskException),TaskPromise=(Tasks.TaskAbortException=TaskAbortException,(()=>{function TaskPromise(task,changeResolver,changeRejector,changeFinallizer){var _this=this;Object.defineProperty(this,"Cancel",{enumerable:!1,configurable:!1,value:function(){task.Cancel()}}),Object.defineProperty(this,"then",{enumerable:!1,configurable:!1,value:function(onfulfilled){return changeResolver(onfulfilled),_this}}),Object.defineProperty(this,"Then",{enumerable:!1,configurable:!1,value:function(onfulfilled){return changeResolver(onfulfilled),_this}}),Object.defineProperty(this,"catch",{enumerable:!1,configurable:!1,value:function(onrejected){return changeRejector(onrejected),_this}}),Object.defineProperty(this,"Catch",{enumerable:!1,configurable:!1,value:function(onrejected){return changeRejector(onrejected),_this}}),Object.defineProperty(this,"Finally",{enumerable:!1,configurable:!1,value:function(onFinished){return changeFinallizer(onFinished),_this}}),Object.defineProperty(this,"ContinueWith",{value:function(continueWith,merge){return self.Accelatrix.Async.Chain(_this,continueWith,merge)}})}return TaskPromise.prototype.Then=function(onfulfilled){return this},TaskPromise.prototype.then=function(onfulfilled){return this},TaskPromise.prototype.Catch=function(onrejected){return this},TaskPromise.prototype.catch=function(onrejected){return this},TaskPromise.prototype.Cancel=function(){return this},TaskPromise.prototype.Finally=function(callback){return this},TaskPromise.prototype.ContinueWith=function(continueWith,merge){return this},TaskPromise})()),TaskBase=(()=>{function TaskBase(actions,inputArguments){var _this=this;if(null==actions||!actions.Any())throw new self.Accelatrix.ArgumentNullException("actions");var me=this,resolver=function(){},rejector=function(ex){console.error(ex)},finalizer=function(){},myPromise=new TaskPromise(this,function(newResolver){return resolver=newResolver},function(newRejector){return rejector=newRejector},function(newFinalizer){return finalizer=newFinalizer}),workRoster=(Object.defineProperty(this,"GetAwaiter",{value:function(){return myPromise},enumerable:!1,configurable:!1}),{Actions:actions,InputArguments:inputArguments});""==workRoster.Actions[0]?workRoster=null:Object.defineProperty(this,"Activities",{get:function(){return workRoster},enumerable:!0}),Object.defineProperty(this,"Result",{get:function(){},set:function(value){if(!(_this.Status>=TaskStatus.RanToCompletion)){Object.defineProperty(_this,"Result",{get:function(){return value},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Exception",{get:function(){},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Status",{get:function(){return TaskStatus.RanToCompletion},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"IsComplete",{get:function(){return!0},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Cancel",{value:function(){},enumerable:!1,configurable:!1});try{null!=resolver&&resolver(value)}catch(e){}finally{null!=finalizer&&finalizer(me),finalizer=resolver=rejector=null}}},enumerable:!1,configurable:!0}),Object.defineProperty(this,"Exception",{get:function(){},set:function(value){_this.Status!=TaskStatus.Cancelled&&Object.defineProperty(_this,"Status",{get:function(){return TaskStatus.Faulted},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Result",{get:function(){},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Exception",{get:function(){return value},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Cancel",{value:function(){},enumerable:!1,configurable:!1});try{null!=rejector&&rejector(value)}catch(e){}finally{null!=finalizer&&finalizer(me)}},enumerable:!1,configurable:!0}),Object.defineProperty(this,"Start",{value:function(){if(_this.Status==TaskStatus.Created){if(_this.IsActionless)return self.Accelatrix.Async.AsPromise(void 0);TaskScheduler.Enqueue(_this)}return myPromise},enumerable:!1,configurable:!0});Object.defineProperty(this,"Cancel",{value:function(exception){if(!(_this.IsCancelled||_this.IsCompleted||_this.IsFaulted)){_this.Status<TaskStatus.RanToCompletion&&TaskScheduler.RemovePendingTask(_this),Object.defineProperty(_this,"Status",{get:function(){return TaskStatus.Cancelled},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"IsCancelled",{get:function(){return!0},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Result",{get:function(){},set:function(){return[]},enumerable:!1,configurable:!1});var abort=null!=exception?exception:new Tasks.TaskAbortException;Object.defineProperty(_this,"Exception",{get:function(){return abort},set:function(){return[]},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Cancel",{value:function(){},enumerable:!1,configurable:!1});try{null!=rejector&&rejector(abort)}catch(e){}finally{null!=finalizer&&finalizer(me)}}},enumerable:!1,configurable:!0})}return Object.defineProperty(TaskBase.prototype,"Activities",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"Status",{get:function(){return TaskStatus.Created},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"Result",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"Exception",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"IsFaulted",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"IsCompleted",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"IsCancelled",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"IsActionless",{get:function(){return null==this.Activities.Actions||!this.Activities.Actions.Any()||null==this.Activities.Actions[0]},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"IsNested",{get:function(){return null!=self.__WebWorkerNestingLevel__},enumerable:!1,configurable:!0}),TaskBase.prototype.Start=function(){return null},TaskBase.prototype.Cancel=function(exception){},TaskBase.prototype.GetAwaiter=function(){return null},TaskBase.CancelAll=function(){TaskScheduler.CancelAll()},TaskBase})(),Task=(_super=>{function Task(action,arg0,arg1,arg2){if(null==action)throw new self.Accelatrix.ArgumentNullException("action");return _super.call(this,[action],void 0===arg0?null:[arg0,arg1,arg2].TakeWhile(function(z){return void 0!==z}).ToList())||this}return __extends(Task,_super),Task.StartNew=function(action,arg0,arg1,arg2){action=new Task(action,arg0,arg1,arg2);return TaskScheduler.Enqueue(action),action},Task})(TaskBase),ActivitySet=(Tasks.Task=Task,(_super=>{function ActivitySet(actions,inputArguments){return _super.call(this,actions,inputArguments)||this}return __extends(ActivitySet,_super),ActivitySet.StartNew=function(actions,arg0,arg1,arg2){actions=new ActivitySet(actions,void 0===arg0?null:[arg0,arg1,arg2].TakeWhile(function(z){return void 0!==z}).ToList());return TaskScheduler.Enqueue(actions),actions},ActivitySet})(TaskBase)),ActivityStream=(Tasks.ActivitySet=ActivitySet,(_super=>{function ActivityStream(actions,inputArguments){return _super.call(this,actions,inputArguments)||this}return __extends(ActivityStream,_super),ActivityStream.StartNew=function(actions,arg0,arg1,arg2){actions=new ActivityStream(actions,void 0===arg0?null:[arg0,arg1,arg2].TakeWhile(function(z){return void 0!==z}).ToList());return TaskScheduler.Enqueue(actions),actions},ActivityStream})(TaskBase)),CombinedTask=(Tasks.ActivityStream=ActivityStream,(_super=>{function CombinedTask(actions,inputArguments){var onInterimResult,_this=_super.call(this,actions,inputArguments)||this,args=null==inputArguments||0==inputArguments.length?null:inputArguments,queue=[],result=[],onTaskCompleted=function(task){if(null!=task.Exception)null==_this.Exception&&(_this.Exception=task.Exception,queue.Where(function(z){return z.Status==TaskStatus.Running||z.Status==TaskStatus.WaitingToRun}).ForEach(function(z){return z.Cancel()}));else{0==result.length&&Object.defineProperty(_this,"Status",{get:function(){return TaskStatus.Running},enumerable:!1,configurable:!0}),result.push(task.Result);try{null!=onInterimResult&&onInterimResult(task.Result)}catch(ex){}finally{result.length==queue.length&&(_this.Result=result)}}},originalCancel=(Object.defineProperty(_this,"OnPartialResult",{value:function(onPartialResult){return onInterimResult=onPartialResult,_this},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Start",{value:function(){if(_this.Status==TaskStatus.Created){if(_this.IsActionless)return self.Accelatrix.Async.AsPromise(void 0);actions.Select(function(z){return z instanceof Function?new Task(z,args):z}).ForEach(function(z){if(z.Status>TaskStatus.Created)throw new TaskException("Cannot combine a task that has already been queue for execution.");null!=args&&(z.Activities.InputArguments=args),queue.push(z)}),queue.forEach(function(z){return z.Start().Finally(function(t){return onTaskCompleted(t)})}),Object.defineProperty(_this,"Status",{get:function(){return TaskStatus.WaitingToRun},enumerable:!1,configurable:!0})}return _this.GetAwaiter()},enumerable:!1,configurable:!1}),_this.Cancel);return Object.defineProperty(_this,"Cancel",{value:function(exception){originalCancel(exception),queue.Where(function(z){return z.Status==TaskStatus.Running||z.Status==TaskStatus.WaitingToRun}).ForEach(function(z){return z.Cancel()})},enumerable:!1,configurable:!0}),_this}return __extends(CombinedTask,_super),CombinedTask.prototype.OnPartialResult=function(onPartialResult){return null},CombinedTask.StartNew=function(actions,arg0,arg1,arg2){actions=new CombinedTask(actions,void 0===arg0?null:[arg0,arg1,arg2].TakeWhile(function(z){return void 0!==z}).ToList());return actions.Start(),actions},CombinedTask})(TaskBase)),StatefulActivity=(Tasks.CombinedTask=CombinedTask,(_super=>{function StatefulActivity(){function read(){return addToMembers("Read",null)}function concatRead(){return addToMembers("ConcatRead",null)}function set(dataTransform){return addToMembers("Set",[dataTransform])}function push(dataTransform){return addToMembers("Push",[dataTransform])}function readAndPush(dataTransform){return addToMembers("ReadAndPush",[dataTransform])}function pushAndEvaluate(dataTransform,evaluator){return addToMembers("PushAndEvaluate",[dataTransform,evaluator])}function streamPushAndEvaluate(dataTransform,evaluator,bufferSize){return addToMembers("StreamPushAndEvaluate",[dataTransform,evaluator,bufferSize])}var _this=this,me=(_this=_super.call(this,"input","if (this.toJSON == null) return null;\n                         var myProxy = new this.prototype.proxy(this.toJSON());\n                         return myProxy.Execute(input)")||this).bind(_this),sequenceID=((me.__proto__=_this).prototype.proxy=StatefulActivityProxy,StatefulActivityHandler.Sequence++),webWorkerId=null==self.__WebWorkerId__?"":self.__WebWorkerId__,myId=(null==self.__WebWorkerNestingLevel__?"":self.__WebWorkerNestingLevel__)+"_"+webWorkerId+"_"+sequenceID,addToMembers=(Object.defineProperty(me,"Id",{get:function(){return myId},enumerable:!0}),Object.defineProperty(_this,"Id",{get:function(){return myId},enumerable:!0}),Object.defineProperty(me,"Dispose",{value:function(){return StatefulActivityHandler.Drop(myId)},enumerable:!0}),Object.defineProperty(_this,"Dispose",{value:function(){return StatefulActivityHandler.Drop(myId)},enumerable:!0}),StatefulActivityHandler.Create(me),Object.defineProperty(_this,"toJSON",{enumerable:!1,configurable:!0,value:function(){return{$type:"Accelatrix.Tasks.StatefulActivityProxy",Id:myId,Members:[]}}}),Object.defineProperty(me,"toJSON",{enumerable:!1,configurable:!0,value:me.__proto__.toJSON}),function(operationName,args){var currentSequence=StatefulActivityHandler.Sequence,result=(StatefulActivityHandler.Sequence=sequenceID--,new StatefulActivity_1),currentSequence=(StatefulActivityHandler.Sequence=currentSequence,result),result=result.bind(result),originalJSON=_this.toJSON;return Object.defineProperty(currentSequence.__proto__,"toJSON",{enumerable:!1,configurable:!0,value:function(){var parent=originalJSON();return{$type:parent.$type,Id:parent.Id,Members:parent.Members.concat({Op:operationName,Args:args})}}}),Object.defineProperty(result,"toJSON",{enumerable:!1,configurable:!0,value:currentSequence.__proto__.toJSON}),result});Object.defineProperty(me,"Read",{enumerable:!1,value:read}),Object.defineProperty(_this,"Read",{enumerable:!1,value:read}),Object.defineProperty(me,"ConcatRead",{enumerable:!1,value:concatRead}),Object.defineProperty(_this,"ConcatRead",{enumerable:!1,value:concatRead}),Object.defineProperty(me,"Set",{enumerable:!1,value:set}),Object.defineProperty(_this,"Set",{enumerable:!1,value:set}),Object.defineProperty(me,"Push",{enumerable:!1,value:push}),Object.defineProperty(_this,"Push",{enumerable:!1,value:push}),Object.defineProperty(me,"ReadAndPush",{enumerable:!1,value:readAndPush}),Object.defineProperty(_this,"ReadAndPush",{enumerable:!1,value:readAndPush}),Object.defineProperty(me,"PushAndEvaluate",{enumerable:!1,value:pushAndEvaluate}),Object.defineProperty(_this,"PushAndEvaluate",{enumerable:!1,value:pushAndEvaluate});return Object.defineProperty(me,"StreamPushAndEvaluate",{enumerable:!1,value:streamPushAndEvaluate}),Object.defineProperty(_this,"StreamPushAndEvaluate",{enumerable:!1,value:streamPushAndEvaluate}),me}var StatefulActivity_1;return __extends(StatefulActivity,_super),StatefulActivity_1=StatefulActivity,Object.defineProperty(StatefulActivity.prototype,"Id",{get:function(){return null},enumerable:!1,configurable:!0}),StatefulActivity.prototype.Read=function(){return null},StatefulActivity.prototype.ConcatRead=function(){return null},StatefulActivity.prototype.ReadAndPush=function(dataTransform){return null},StatefulActivity.prototype.Push=function(dataTransform){return this},StatefulActivity.prototype.Set=function(dataTransform){return this},StatefulActivity.prototype.PushAndEvaluate=function(dataTransform,evaluator){return this},StatefulActivity.prototype.StreamPushAndEvaluate=function(dataTransform,evaluator,bufferSize){return this},StatefulActivity.prototype.Dispose=function(){StatefulActivityHandler.Drop(this.Id)},StatefulActivity.prototype.toJSON=function(){return null},StatefulActivity_1=__decorate([self.Accelatrix.Serialization.KnownType("Accelatrix.Tasks.StatefulActivity"),__metadata("design:paramtypes",[])],StatefulActivity)})(Function)),StatefulActivityProxy=(Tasks.StatefulActivity=StatefulActivity,(_super=>{function StatefulActivityProxy(structure,id,members){var _this,me=_this=_super.call(this,"input","return this.Execute(input);")||this,id=(null!=structure&&""!=structure.toString()||null==id||(structure={$type:"Accelatrix.Tasks.StatefulActivityProxy",Id:id,Members:members}),me.bind(me));return Object.defineProperty(id,"Execute",{enumerable:!1,value:function(input){return StatefulActivityHandler.Execute(structure,input)}}),Object.defineProperty(_this,"Execute",{enumerable:!1,value:function(input){return StatefulActivityHandler.Execute(structure,input)}}),Object.defineProperty(id,"toJSON",{value:function(){return structure}}),Object.defineProperty(_this,"toJSON",{value:function(){return structure}}),id}return __extends(StatefulActivityProxy,_super),__decorate([self.Accelatrix.Serialization.KnownType("Accelatrix.Tasks.StatefulActivityProxy"),__metadata("design:paramtypes",[Object,String,Array])],StatefulActivityProxy)})(Function));Object.defineProperty(TaskException.prototype.constructor,"name",{get:function(){return"TaskException"}}),Object.defineProperty(TaskAbortException.prototype.constructor,"name",{get:function(){return"TaskAbortException"}}),Object.defineProperty(TaskPromise.prototype.constructor,"name",{get:function(){return"TaskPromise"}}),Object.defineProperty(TaskBase.prototype.constructor,"name",{get:function(){return"TaskBase"}}),Object.defineProperty(Task.prototype.constructor,"name",{get:function(){return"Task"}}),Object.defineProperty(ActivitySet.prototype.constructor,"name",{get:function(){return"ActivitySet"}}),Object.defineProperty(ActivityStream.prototype.constructor,"name",{get:function(){return"ActivityStream"}}),Object.defineProperty(CombinedTask.prototype.constructor,"name",{get:function(){return"CombinedTask"}}),Object.defineProperty(StatefulActivity.prototype.constructor,"name",{get:function(){return"StatefulActivity"}}),Object.defineProperty(StatefulActivityProxy.prototype.constructor,"name",{get:function(){return"StatefulActivityProxy"}})})(Tasks=Accelatrix.Tasks||(Accelatrix.Tasks={})),Collections=Accelatrix.Collections||(Accelatrix.Collections={}),Array.prototype.ForAll=function(action){for(var tasks=[],i=0;i<this.length;i++)tasks.push(new Tasks.Task(action,this[i],i));return 0==tasks.length?self.Accelatrix.Async.AsPromise(null):Tasks.CombinedTask.StartNew(tasks).GetAwaiter()},self.Accelatrix.Collections.Enumerable.prototype.ForAll=function(action){for(var myEnumerator=this.GetEnumerator(),index=0,tasks=[];myEnumerator.MoveNext();)tasks.push(new Tasks.Task(action,myEnumerator.Current,index++));return 0==tasks.length?self.Accelatrix.Async.AsPromise(null):Tasks.CombinedTask.StartNew(tasks).GetAwaiter()},!function(TaskScheduler){var _a,maxParallelism=8,dataPassingMethod=Tasks.DataPassingMethod.Clone,webWorkersCode=`var AccelatrixWebWorker,WebWorkerUtil,__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};(AccelatrixWebWorker=>{var originalAddEventListener,onMessageSubscribers,postWorkloadCleanUp,isWebWorker=!String.IsNullOrWhiteSpace(self.__WebWorkerScripts__),isWorking=!1,interimResultFromWorkloadStream=void 0;function WorkloadReceived(workload,cleanUpAtEnd){isWorking=!0,self.Accelatrix.Tasks.Config.MaxParallelism=workload.MaxParallelismForChildren,null!=workload.Culture&&(self.Accelatrix.Globalization.DefaultFormatting=workload.Culture),WebWorkerUtil.WorkOnSequenceOfActivities(workload.ChainOfActions,void 0===interimResultFromWorkloadStream?workload.InputArguments:[interimResultFromWorkloadStream],function(result,ex){AccelatrixWebWorker.outstandingAbort=null,isWorking=!workload.ReturnResult||null!=ex,interimResultFromWorkloadStream=workload.ReturnResult||null!=ex?void 0:result,null!=ex?(cleanUpAtEnd(),setTimeout(function(){throw ex},0)):(result=workload.ReturnResult?new WebWorkerUtil.WorkloadResult(result):new WebWorkerUtil.WorkloadResult(void 0,!0),cleanUpAtEnd(),workload.DataPassingMethod==self.Accelatrix.Tasks.DataPassingMethod.Clone?self.postMessage(result,null):(result=self.Accelatrix.Serialization.ToJSON(result),self.postMessage(result,null)))})}AccelatrixWebWorker.outstandingAbort=null,isWebWorker&&(postWorkloadCleanUp=function(){},self.addEventListener("message",function(e){if("Abort"==e.data){if(interimResultFromWorkloadStream=void 0,null!=AccelatrixWebWorker.outstandingAbort)try{AccelatrixWebWorker.outstandingAbort()}catch(ex){}isWorking&&self.Accelatrix.Tasks.Task.CancelAll()}else if("string"==typeof e.data){if(0<=e.data.indexOf('"$type":"WebWorkerUtil.Workload"')){var message=void 0;try{message=self.Accelatrix.Serialization.FromJSON(e.data)}catch(ex){throw isWorking=!1,interimResultFromWorkloadStream=void 0,ex}"Workload"==message.GetType().Name&&WorkloadReceived(message,postWorkloadCleanUp)}}else{message=e.data.GetType();"Workload"==message.Name||"WebWorkerUtil.Workload"==message.Alias?WorkloadReceived(e.data,postWorkloadCleanUp):"PackagedWorkload"!=message.Name&&"WebWorkerUtil.PackagedWorkload"!=message.Alias||WorkloadReceived(WebWorkerUtil.Workload.UnpackWorkload(e.data),postWorkloadCleanUp)}}),originalAddEventListener=self.addEventListener,onMessageSubscribers=[],postWorkloadCleanUp=function(){onMessageSubscribers.ForEach(function(z){return self.removeEventListener("message",z)}),onMessageSubscribers=[]},self.addEventListener=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];"message"==args[0]&&onMessageSubscribers.push(args[1]),originalAddEventListener.apply(self,args)})})(AccelatrixWebWorker=AccelatrixWebWorker||{}),(WebWorkerUtil=>{var isWebWorker=!String.IsNullOrWhiteSpace(self.__WebWorkerScripts__),Workload=(WebWorkerUtil.WorkOnSequenceOfActivities=function WorkOnSequenceOfActivities(activities,inputArgs,callback){try{if((AccelatrixWebWorker.outstandingAbort=null)==activities)callback(null==inputArgs||0==inputArgs.length?null:inputArgs[0],null);else{activities=activities.Freeze();var handleResult=function(r,e){null!=e?callback(null,e):(r=>null!=r&&(IsPromise(r)||IsTask(r)||IsAwaitable(r)))(r)?WorkOnSequenceOfActivities([r].Concat(activities),null,callback):null!=activities&&activities.Any()?WorkOnSequenceOfActivities(activities,[r],callback):r instanceof Function?WorkOnSequenceOfActivities([r],null,callback):callback(r,null)},activity=activities.FirstOrNull();if(null==activity)WorkOnSequenceOfActivities(null,inputArgs,callback);else if(IsPromise(activity))Date.now(),activity.catch(function(e){handleResult(null,e)}),activity.then(function(r){handleResult(r,null)}),null!=activity.cancel&&activity.cancel instanceof Function?AccelatrixWebWorker.outstandingAbort=activity.cancel:null!=activity.Cancel&&activity.Cancel instanceof Function&&(AccelatrixWebWorker.outstandingAbort=activity.Cancel);else if(IsTask(activity)&&activity.Status!=self.Accelatrix.Tasks.TaskStatus.WaitingToRun&&activity.Status!=self.Accelatrix.Tasks.TaskStatus.Running){var task=activity;if(task.IsCancelled||task.IsFaulted)handleResult(null,task.Exception);else if(task.IsCompleted)handleResult(task.Result,null);else if(self.Accelatrix.Tasks.Config.MaxParallelism<=0||isWebWorker)WorkOnSequenceOfActivities(task.Activities.Actions.Concat(activities),null!=inputArgs&&inputArgs.Any()?inputArgs:task.Activities.InputArguments,callback);else try{null!=inputArgs&&inputArgs.Any()&&(task.Activities.InputArguments=inputArgs),task.Start().Finally(function(t){return handleResult(t.Result,t.Exception)}),AccelatrixWebWorker.outstandingAbort=task.Cancel}catch(ex){handleResult(null,ex)}}else if(IsAwaitable(activity)){var promise=activity.GetAwaiter();promise.catch(function(e){handleResult(null,e)}),promise.then(function(r){handleResult(r,null)}),null!=promise.cancel&&promise.cancel instanceof Function?AccelatrixWebWorker.outstandingAbort=promise.cancel:null!=promise.Cancel&&promise.Cancel instanceof Function&&(AccelatrixWebWorker.outstandingAbort=promise.Cancel)}else if(activity instanceof Function)try{var fResult=activity.apply(null,null==inputArgs?null:null==inputArgs.Any?[inputArgs]:inputArgs.Any()?inputArgs:null);handleResult(fResult,null)}catch(ex){handleResult(null,ex)}else handleResult(activity,null)}}catch(unhandledException){console.error(unhandledException),callback(null,unhandledException)}},(()=>{function Workload(chainOfActions,inputArguments,returnResult,maxParallelismForChildren,dataPassingMethod,cultureChange){if(null==chainOfActions||!chainOfActions.Any())throw new self.Accelatrix.ArgumentNullException("chainOfActions");var myActions=chainOfActions.ToList();myActions.Where(IsTask).Select(function(z){return z}).Where(function(z){return z.Status==self.Accelatrix.Tasks.TaskStatus.Running||z.Status==self.Accelatrix.Tasks.TaskStatus.WaitingToRun}).Take(1).ForEach(function(z){throw new self.Accelatrix.Tasks.TaskException("Cannot process a task that is already in the execution queue.")}),Object.defineProperty(this,"ChainOfActions",{get:function(){return myActions},enumerable:!0}),Object.defineProperty(this,"InputArguments",{get:function(){return null==inputArguments?[]:inputArguments},enumerable:!0}),Object.defineProperty(this,"MaxParallelismForChildren",{get:function(){return maxParallelismForChildren},enumerable:!0}),Object.defineProperty(this,"DataPassingMethod",{get:function(){return dataPassingMethod},enumerable:!0}),Object.defineProperty(this,"ReturnResult",{get:function(){return returnResult},enumerable:!0}),Object.defineProperty(this,"Culture",{get:function(){return cultureChange},enumerable:!0})}return Object.defineProperty(Workload.prototype,"ChainOfActions",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Workload.prototype,"MaxParallelismForChildren",{get:function(){return 8},enumerable:!1,configurable:!0}),Object.defineProperty(Workload.prototype,"DataPassingMethod",{get:function(){return self.Accelatrix.Tasks.DataPassingMethod.TypedSerialization},enumerable:!1,configurable:!0}),Object.defineProperty(Workload.prototype,"InputArguments",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Workload.prototype,"Culture",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Workload.prototype,"ReturnResult",{get:function(){return!0},enumerable:!1,configurable:!0}),Workload.prototype.AsMessage=function(){return PackagedWorkload.AsMessage(this)},Workload.UnpackWorkload=function(packagedWorkload){return PackagedWorkload.UnpackWorkload(packagedWorkload)},__decorate([self.Accelatrix.Serialization.KnownType("WebWorkerUtil.Workload"),__metadata("design:paramtypes",[Array,Array,Boolean,Number,String,Object])],Workload)})()),PackagedWorkload=(WebWorkerUtil.Workload=Workload,(()=>{function PackagedWorkload(workload){Object.defineProperty(this,"$type",{get:function(){return"WebWorkerUtil.PackagedWorkload"},enumerable:!0});var inputArgs=PackagedWorkload_1.PackageInputArguments(workload.InputArguments);null!=workload.InputArguments&&workload.InputArguments.splice(0,workload.InputArguments.length),Object.defineProperty(this,"Workload",{enumerable:!0,get:function(){return self.Accelatrix.Serialization.ToJSON(workload)}}),Object.defineProperty(this,"InputArguments",{enumerable:!0,get:function(){return inputArgs}})}var PackagedWorkload_1=PackagedWorkload;return Object.defineProperty(PackagedWorkload.prototype,"Workload",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(PackagedWorkload.prototype,"InputArguments",{get:function(){return null},enumerable:!1,configurable:!0}),PackagedWorkload.PackageInputArguments=function(inputArgs){return null!=inputArgs&&inputArgs.Any()?inputArgs.Select(function(z){return PackagedWorkload_1.IsEnumerable(z)?PackagedWorkload_1.PackageEnumerable(z):PackagedWorkload_1.HasNonClonable(z)?"JSON:"+self.Accelatrix.Serialization.ToJSON(z):z}).ToList():inputArgs},PackagedWorkload.UnPackageInputArguments=function(inputArgs){return null!=inputArgs&&inputArgs.Any()?inputArgs.Select(function(z){return PackagedWorkload_1.IsEnumerable(z)?PackagedWorkload_1.UnpackEnumerable(z):null==z||"string"!=typeof z||"JSON:"!=z.substring(0,5)?z:self.Accelatrix.Serialization.FromJSON(z.substring(5))}).ToList():inputArgs},PackagedWorkload.HasNonClonable=function(obj){return null!=obj&&(obj instanceof Function||obj instanceof RegExp||(obj instanceof Array?obj.Where(function(z){return PackagedWorkload_1.HasNonClonable(z)}).Any():!(obj instanceof Boolean||"boolean"==typeof obj||obj instanceof String||"string"==typeof obj||obj instanceof Number||"number"==typeof obj||obj instanceof Date)&&Object.keys(obj).Select(function(z){return obj[z]}).Where(function(z){return null!=z}).Where(function(z){return PackagedWorkload_1.HasNonClonable(z)}).Any()))},PackagedWorkload.IsEnumerable=function(obj){return null!=obj&&(null!=obj.Any&&obj.Any instanceof Function&&!(obj instanceof Array)&&obj.toJSON instanceof Function||null!=obj.$type&&"EnumerableWrapper"==obj.$type)},PackagedWorkload.PackageEnumerable=function(obj){var description,data,enumerableType;return null==obj?obj:0!=(description=obj.toJSON()).Members.length&&description.Members[0]instanceof Array?(data=description.Members[0],description.Members[0]=[],enumerableType=description.$type,delete description.$type,{$type:"EnumerableWrapper",Data:data,Enumerable:self.Accelatrix.Serialization.ToJSON(description),EnumerableType:enumerableType}):"JSON:"+self.Accelatrix.Serialization.ToJSON(obj)},PackagedWorkload.UnpackEnumerable=function(obj){var data=obj.Data,description=self.Accelatrix.Serialization.FromJSON(obj.Enumerable);return description.Members[0]=data,description.$type=obj.EnumerableType,self.Accelatrix.Serialization.FromJSON(description)},PackagedWorkload.AsMessage=function(workload){return workload.DataPassingMethod!=self.Accelatrix.Tasks.DataPassingMethod.TypedSerialization&&null!=workload.InputArguments&&workload.InputArguments.Any()?new PackagedWorkload_1(workload):self.Accelatrix.Serialization.ToJSON(workload)},PackagedWorkload.UnpackWorkload=function(packagedWorkload){var result=self.Accelatrix.Serialization.FromJSON(packagedWorkload.Workload),packagedWorkload=PackagedWorkload_1.UnPackageInputArguments(packagedWorkload.InputArguments);return null!=packagedWorkload&&packagedWorkload.ForEach(function(z){return result.InputArguments.push(z)}),result},PackagedWorkload_1=__decorate([self.Accelatrix.Serialization.KnownType("WebWorkerUtil.PackagedWorkload"),__metadata("design:paramtypes",[Workload])],PackagedWorkload)})()),WorkloadResult=(()=>{function WorkloadResult(result,resultRetained){Object.defineProperty(this,"Result",{get:function(){return result},enumerable:!0}),Object.defineProperty(this,"ResultRetained",{get:function(){return!0===resultRetained},enumerable:!0})}return Object.defineProperty(WorkloadResult.prototype,"Result",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(WorkloadResult.prototype,"ResultRetained",{get:function(){return!1},enumerable:!1,configurable:!0}),__decorate([self.Accelatrix.Serialization.KnownType("WebWorkerUtil.WorkloadResult"),__metadata("design:paramtypes",[Object,Boolean])],WorkloadResult)})(),StatefulActivityWriteRequest=(WebWorkerUtil.WorkloadResult=WorkloadResult,(()=>{function StatefulActivityWriteRequest(id,data,append){Object.defineProperty(this,"Id",{get:function(){return id},enumerable:!0}),Object.defineProperty(this,"Data",{get:function(){return data},enumerable:!0}),Object.defineProperty(this,"Append",{get:function(){return append},enumerable:!0})}return Object.defineProperty(StatefulActivityWriteRequest.prototype,"Id",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityWriteRequest.prototype,"Data",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityWriteRequest.prototype,"Append",{get:function(){return null},enumerable:!1,configurable:!0}),__decorate([self.Accelatrix.Serialization.KnownType("WebWorkerUtil.StatefulActivityWriteRequest"),__metadata("design:paramtypes",[String,Object,Boolean])],StatefulActivityWriteRequest)})()),StatefulActivityReadRequest=(WebWorkerUtil.StatefulActivityWriteRequest=StatefulActivityWriteRequest,(()=>{function StatefulActivityReadRequest(id,requestId,transform){Object.defineProperty(this,"Id",{get:function(){return id},enumerable:!0}),Object.defineProperty(this,"RequestId",{get:function(){return requestId},enumerable:!0}),Object.defineProperty(this,"Transform",{get:function(){return transform},enumerable:!0})}return Object.defineProperty(StatefulActivityReadRequest.prototype,"Id",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityReadRequest.prototype,"RequestId",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityReadRequest.prototype,"Transform",{get:function(){return null},enumerable:!1,configurable:!0}),__decorate([self.Accelatrix.Serialization.KnownType("WebWorkerUtil.StatefulActivityReadRequest"),__metadata("design:paramtypes",[String,String,Function])],StatefulActivityReadRequest)})()),StatefulActivityReadAndPushRequest=(WebWorkerUtil.StatefulActivityReadRequest=StatefulActivityReadRequest,(()=>{function StatefulActivityReadAndPushRequest(id,requestId,data,transform){Object.defineProperty(this,"Id",{get:function(){return id},enumerable:!0}),Object.defineProperty(this,"RequestId",{get:function(){return requestId},enumerable:!0}),Object.defineProperty(this,"Transform",{get:function(){return transform},enumerable:!0}),Object.defineProperty(this,"Data",{get:function(){return data},enumerable:!0})}return Object.defineProperty(StatefulActivityReadAndPushRequest.prototype,"Id",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityReadAndPushRequest.prototype,"RequestId",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityReadAndPushRequest.prototype,"Transform",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityReadAndPushRequest.prototype,"Data",{get:function(){return null},enumerable:!1,configurable:!0}),__decorate([self.Accelatrix.Serialization.KnownType("WebWorkerUtil.StatefulActivityReadAndPushRequest"),__metadata("design:paramtypes",[String,String,Object,Function])],StatefulActivityReadAndPushRequest)})()),StatefulActivityReadResponse=(WebWorkerUtil.StatefulActivityReadAndPushRequest=StatefulActivityReadAndPushRequest,(()=>{function StatefulActivityReadResponse(id,requestId,data){Object.defineProperty(this,"Id",{get:function(){return id},enumerable:!0}),Object.defineProperty(this,"RequestId",{get:function(){return requestId},enumerable:!0}),Object.defineProperty(this,"Data",{get:function(){return data},enumerable:!0})}return Object.defineProperty(StatefulActivityReadResponse.prototype,"Id",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityReadResponse.prototype,"RequestId",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityReadResponse.prototype,"Data",{get:function(){return null},enumerable:!1,configurable:!0}),__decorate([self.Accelatrix.Serialization.KnownType("WebWorkerUtil.StatefulActivityReadResponse"),__metadata("design:paramtypes",[String,String,Object])],StatefulActivityReadResponse)})()),StatefulActivityPushAndEvaluateRequest=(WebWorkerUtil.StatefulActivityReadResponse=StatefulActivityReadResponse,(()=>{function StatefulActivityPushAndEvaluateRequest(id,requestId,predicate,data){Object.defineProperty(this,"Id",{get:function(){return id},enumerable:!0}),Object.defineProperty(this,"RequestId",{get:function(){return requestId},enumerable:!0}),Object.defineProperty(this,"Predicate",{get:function(){return predicate},enumerable:!0}),Object.defineProperty(this,"Data",{get:function(){return data},enumerable:!0})}return Object.defineProperty(StatefulActivityPushAndEvaluateRequest.prototype,"Id",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityPushAndEvaluateRequest.prototype,"RequestId",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityPushAndEvaluateRequest.prototype,"Predicate",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityPushAndEvaluateRequest.prototype,"Data",{get:function(){return null},enumerable:!1,configurable:!0}),__decorate([self.Accelatrix.Serialization.KnownType("WebWorkerUtil.StatefulActivityPushAndEvaluateRequest"),__metadata("design:paramtypes",[String,String,Function,Object])],StatefulActivityPushAndEvaluateRequest)})()),StatefulActivityEvaluateResponse=(WebWorkerUtil.StatefulActivityPushAndEvaluateRequest=StatefulActivityPushAndEvaluateRequest,(()=>{function StatefulActivityEvaluateResponse(id,requestId,result){Object.defineProperty(this,"Id",{get:function(){return id},enumerable:!0}),Object.defineProperty(this,"RequestId",{get:function(){return requestId},enumerable:!0}),Object.defineProperty(this,"Result",{get:function(){return result},enumerable:!0})}return Object.defineProperty(StatefulActivityEvaluateResponse.prototype,"Id",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityEvaluateResponse.prototype,"RequestId",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(StatefulActivityEvaluateResponse.prototype,"Result",{get:function(){return null},enumerable:!1,configurable:!0}),__decorate([self.Accelatrix.Serialization.KnownType("WebWorkerUtil.StatefulActivityEvaluateResponse"),__metadata("design:paramtypes",[String,String,Object])],StatefulActivityEvaluateResponse)})());function IsPromise(obj){return null!=obj&&null!=obj.then&&obj.then instanceof Function&&null!=obj.catch&&obj.catch instanceof Function}function IsAwaitable(obj){return null!=obj&&null!=obj.GetAwaiter&&obj.GetAwaiter instanceof Function&&IsPromise(obj.GetAwaiter())}function IsTask(obj){return null!=obj&&null!=obj.Start&&obj.Start instanceof Function&&IsAwaitable(obj)}WebWorkerUtil.StatefulActivityEvaluateResponse=StatefulActivityEvaluateResponse,WebWorkerUtil.IsPromise=IsPromise,WebWorkerUtil.IsAwaitable=IsAwaitable,WebWorkerUtil.IsTask=IsTask,Object.defineProperty(Workload.prototype.constructor,"name",{get:function(){return"Workload"}}),Object.defineProperty(PackagedWorkload.prototype.constructor,"name",{get:function(){return"PackagedWorkload"}}),Object.defineProperty(WorkloadResult.prototype.constructor,"name",{get:function(){return"WorkloadResult"}}),Object.defineProperty(StatefulActivityWriteRequest.prototype.constructor,"name",{get:function(){return"StatefulActivityWriteRequest"}}),Object.defineProperty(StatefulActivityReadRequest.prototype.constructor,"name",{get:function(){return"StatefulActivityReadRequest"}}),Object.defineProperty(StatefulActivityReadAndPushRequest.prototype.constructor,"name",{get:function(){return"StatefulActivityReadAndPushRequest"}}),Object.defineProperty(StatefulActivityReadResponse.prototype.constructor,"name",{get:function(){return"StatefulActivityReadResponse"}}),Object.defineProperty(StatefulActivityPushAndEvaluateRequest.prototype.constructor,"name",{get:function(){return"StatefulActivityPushAndEvaluateRequest"}}),Object.defineProperty(StatefulActivityEvaluateResponse.prototype.constructor,"name",{get:function(){return"StatefulActivityEvaluateResponse"}})})(WebWorkerUtil=WebWorkerUtil||{});`,workerId=0;function IsTask(obj){return WebWorkerUtil.IsTask(obj)}function IsNested(){return null!=self.__WebWorkerNestingLevel__}function Enqueue(task){Queue.Enqueue(task)}function RemovePendingTask(task){Queue.RemovePendingTask(task)}function CancelAll(){Queue.CancelAll()}function Broadcast(msg,exceptedTo){Queue.Broadcast(msg,exceptedTo)}function SpawnWorker(){var blob,workerCode='var __WebWorkerScripts__ = [{"SourceType":"PlainText","Contents": "'+ScriptHandler.ScriptContents().replace(/\\/g,"\\\\").replace(/\"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"}];\nvar __WebWorkerNestingLevel__ = '+(null==self.__WebWorkerNestingLevel__?0:self.__WebWorkerNestingLevel__+1)+";\nvar __WebWorkerId__ = "+workerId+++";\n"+ScriptHandler.ScriptContents()+"\n"+webWorkersCode,worker=null;if(null==Blob)worker=new Worker("data:text/javascript;charset=US-ASCII,"+encodeURIComponent(workerCode));else{try{blob=new Blob([workerCode],{type:"application/javascript"})}catch(e){(blob=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder)).append(workerCode),blob=blob.getBlob()}worker=new Worker(URL.createObjectURL(blob))}return worker}IsNested()||eval(webWorkersCode),TaskScheduler.config=new((()=>{function TasksConfig(){}return Object.defineProperty(TasksConfig.prototype,"Scripts",{get:function(){return ScriptHandler.scriptSources},enumerable:!1,configurable:!0}),Object.defineProperty(TasksConfig.prototype,"MaxParallelism",{get:function(){if(null==maxParallelism)try{maxParallelism=null!=self&&null!=self.clientInformation&&1<self.clientInformation.hardwareConcurrency?2*self.clientInformation.hardwareConcurrency:IsNested()?2:8}catch(e){maxParallelism=IsNested()?2:8}return maxParallelism},set:function(value){value!=maxParallelism&&(maxParallelism=value)},enumerable:!1,configurable:!0}),Object.defineProperty(TasksConfig.prototype,"DataPassingMethod",{get:function(){return dataPassingMethod},set:function(value){dataPassingMethod=null==value?Tasks.DataPassingMethod.Clone:value},enumerable:!1,configurable:!0}),TasksConfig})()),TaskScheduler.IsTask=IsTask,TaskScheduler.IsNested=IsNested,TaskScheduler.Enqueue=Enqueue,TaskScheduler.RemovePendingTask=RemovePendingTask,TaskScheduler.CancelAll=CancelAll,TaskScheduler.Broadcast=Broadcast;var Queue=(_a=(()=>{function TaskSchedulerQueue(){this.pending=[],this.workers=[],this.activeWorkers=0}return Object.defineProperty(TaskSchedulerQueue.prototype,"Pending",{get:function(){return this.pending},enumerable:!1,configurable:!0}),Object.defineProperty(TaskSchedulerQueue.prototype,"Workers",{get:function(){return this.workers},enumerable:!1,configurable:!0}),Object.defineProperty(TaskSchedulerQueue.prototype,"ActiveWorkers",{get:function(){return this.activeWorkers},set:function(value){this.activeWorkers=value},enumerable:!1,configurable:!0}),Object.defineProperty(TaskSchedulerQueue.prototype,"RunInSync",{get:function(){return Tasks.Config.MaxParallelism<=0},enumerable:!1,configurable:!0}),TaskSchedulerQueue.prototype.Enqueue=function(task){var _this=this;null!=task&&((task=task.GetType().IsArray?task:[task]).Where(function(z){return z.IsActionless&&z.Status==Tasks.TaskStatus.Created}).ForEach(function(z){z.Result=void 0}),(task=task.Where(function(z){return!(z.IsActionless&&z.Status==Tasks.TaskStatus.Created)}).ToList()).ForEach(function(z){Object.defineProperty(z,"Status",{get:function(){return Tasks.TaskStatus.WaitingToRun},configurable:!0}),_this.Pending.push(z)}),this.DequeueNext())},TaskSchedulerQueue.prototype.RemovePendingTask=function(task){var activeQ,me,timer,timerResolver,taskEntry;null!=task&&(null!=(taskEntry=this.Pending.Select(function(z,i){return{Task:z,Index:i}}).Where(function(z){return z.Task===task}).FirstOrNull())?this.Pending.splice(taskEntry.Index,1):null!=(activeQ=this.Workers.Where(function(z){return z.Task===task}).FirstOrNull())&&(activeQ.IsBusy?(me=this,timer=setTimeout(function(){null!=activeQ.Worker&&(activeQ.Worker.terminate(),null!=activeQ.Task)&&null==activeQ.Task.Exception&&(activeQ.Task.Exception=new Tasks.TaskAbortException),me.workers=me.Workers.Where(function(z){return z!=activeQ}).ToList(),--me.ActiveWorkers},TaskSchedulerQueue.CANCEL_TIMEOUT),timerResolver=function(){return clearTimeout(timer)},activeQ.Task=null,taskEntry={},Object.defineProperty(taskEntry,"Result",{get:function(){},set:function(value){return timerResolver()}}),Object.defineProperty(taskEntry,"Exception",{get:function(){},set:function(value){return timerResolver()}}),activeQ.Task=taskEntry):null!=activeQ&&(activeQ.Task=null),activeQ.Worker.postMessage("Abort")),this.DequeueNext())},Object.defineProperty(TaskSchedulerQueue.prototype,"MaxParallelismForChildren",{get:function(){return this.ActiveWorkers>=Tasks.Config.MaxParallelism?0:Math.floor(Math.sqrt(Tasks.Config.MaxParallelism-this.ActiveWorkers))},enumerable:!1,configurable:!0}),TaskSchedulerQueue.prototype.DequeueNext=function(){var nextTask,me,hasReturned,capacity,need,_this=this;ScriptHandler.ScriptsObtained()?0!=(need=this.Pending.length)&&(Queue.RunInSync?(nextTask=this.Pending.shift(),me=this,hasReturned=!1,null==self.WebWorkerUtil&&(self.WebWorkerUtil=WebWorkerUtil),WebWorkerUtil.WorkOnSequenceOfActivities(nextTask.Activities.Actions,nextTask.Activities.InputArguments,function(result,exception){hasReturned?null!=exception?nextTask.Exception=exception:nextTask.Result=result:setTimeout(function(){null!=exception?nextTask.Exception=exception:nextTask.Result=result,me.DequeueNext()},0)}),hasReturned=!0):(capacity=Tasks.Config.MaxParallelism-this.ActiveWorkers)<=0||0!=(need=self.Accelatrix.Collections.Enumerable.Range(0,need<=capacity?need:capacity).Select(function(z){return _this.GetWorker()}).TakeWhile(function(z){return null!=z}).ToList()).length&&(this.ActiveWorkers+=need.length,need.ForEach(function(z){z.Task=_this.Pending.shift(),null==z.Task?z.IsBusy=!1:_this.AssignWork(z)}))):(me=this,ScriptHandler.GetScriptContents(function(){me.DequeueNext()}))},TaskSchedulerQueue.prototype.GetWorker=function(){var me,newWorker,_this=this,available=this.Workers.Where(function(z){return null!=z.Worker}).Where(function(z){var isBusy=z.IsBusy;return 0==isBusy&&(z.IsBusy=!0),0==isBusy}).FirstOrNull();return null!=available?available:(me=this).Workers.length<Tasks.Config.MaxParallelism?((newWorker={Worker:SpawnWorker(),Task:null,IsBusy:!0,Culture:null,Id:workerId,NestingLevel:null==self.__WebWorkerNestingLevel__?0:self.__WebWorkerNestingLevel__}).Worker.onmessage=function(message){var theTask,theResult;_this.StatefulActivityMessages(message.data,newWorker.Worker,newWorker.Id)||(message=null==(theTask=newWorker.Task)?null:"string"==typeof message.data?self.Accelatrix.Serialization.FromJSON(message.data):message.data,theResult=null==message?null:message.Result,null!=theTask&&message.ResultRetained?_this.AssignWork(newWorker):(setTimeout(function(){null!=theTask&&(theTask.Result=theResult)},0),null!=theTask&&(newWorker.Task=null,--me.ActiveWorkers),newWorker.IsBusy=null==newWorker.IsBusy&&null,me.DequeueNext()))},newWorker.Worker.onerror=function(exception){var theTask;null!=newWorker.Task&&(theTask=newWorker.Task,setTimeout(function(){null!=theTask&&(theTask.Exception=null==exception.error?new Tasks.TaskException(exception.message):exception.error)},0),newWorker.Task=null),newWorker.IsBusy=!1,--me.ActiveWorkers,me.DequeueNext()},this.Workers.push(newWorker),newWorker):null},TaskSchedulerQueue.prototype.AssignWork=function(worker){Object.defineProperty(worker.Task,"Status",{get:function(){return Tasks.TaskStatus.Running},configurable:!0}),worker.IsBusy=!0;var actions,task=worker.Task,isEnumerationOfActions=null!=task.Activities&&null!=task.Activities.Actions&&!task.Activities.Actions.GetType().IsArray,myActions=(isEnumerationOfActions?((actions=(myActions=task.Activities.Actions.Freeze()).Take(TaskSchedulerQueue.NUMBER_OF_BUFFERED_ACTIONS).ToList()).length<TaskSchedulerQueue.NUMBER_OF_BUFFERED_ACTIONS||!myActions.Any())&&(isEnumerationOfActions=!1):actions=task.Activities.Actions.ToList(),new WebWorkerUtil.Workload(actions,task.Activities.InputArguments,!isEnumerationOfActions,this.MaxParallelismForChildren,TaskScheduler.config.DataPassingMethod,worker.Culture==self.Accelatrix.Globalization.DefaultFormatting?null:self.Accelatrix.Globalization.DefaultFormatting));worker.Culture=self.Accelatrix.Globalization.DefaultFormatting,worker.Worker.postMessage(myActions.AsMessage(),null)},TaskSchedulerQueue.prototype.StatefulActivityMessages=function(msg,worker,workerId){if(null==msg)return!1;var messageType=null;if("string"==typeof msg){if(msg.indexOf('"$type":"WebWorkerUtil.StatefulActivity')<0)return!1}else if((messageType=msg.GetType()).Name.indexOf("StatefulActivity")<0&&(null==messageType.Alias||messageType.Alias.indexOf("StatefulActivity")<0))return!1;msg="string"==typeof msg?self.Accelatrix.Serialization.FromJSON(msg):msg;if((messageType=null==messageType?msg.GetType():messageType).Name==WebWorkerUtil.StatefulActivityWriteRequest.name||messageType.Alias==WebWorkerUtil.StatefulActivityWriteRequest.name||null!=messageType.Alias&&0<messageType.Alias.indexOf("."+WebWorkerUtil.StatefulActivityWriteRequest.name))return(writeRequest=msg).Append?StatefulActivityHandler.PushSync(writeRequest.Id,writeRequest.Data,null):StatefulActivityHandler.SetSync(writeRequest.Id,writeRequest.Data,null),!0;if(messageType.Name==WebWorkerUtil.StatefulActivityReadRequest.name||messageType.Alias==WebWorkerUtil.StatefulActivityReadRequest.name||null!=messageType.Alias&&0<messageType.Alias.indexOf("."+WebWorkerUtil.StatefulActivityReadRequest.name)){var readRequest=msg,writeRequest=null;try{writeRequest=StatefulActivityHandler.ReadSync(readRequest.Id)}catch(ex){writeRequest=ex}var readResponse=new WebWorkerUtil.StatefulActivityReadResponse(readRequest.Id,readRequest.RequestId,writeRequest);return worker.postMessage(self.Accelatrix.Serialization.ToJSON(readResponse),null),!0}if(messageType.Name==WebWorkerUtil.StatefulActivityReadAndPushRequest.name||messageType.Alias==WebWorkerUtil.StatefulActivityReadAndPushRequest.name||null!=messageType.Alias&&0<messageType.Alias.indexOf("."+WebWorkerUtil.StatefulActivityReadAndPushRequest.name)){writeRequest=msg;if(null!=(entry=StatefulActivityHandler.Get(writeRequest.Id))){var data=null==entry.Data?[]:entry.Data;try{var dataToPush=null==readRequest.Transform?readRequest.Transform(writeRequest.Data):writeRequest.Data;null==entry.Data?entry.Data=[dataToPush]:entry.Data.push(dataToPush)}catch(ex){data=ex}readResponse=new WebWorkerUtil.StatefulActivityReadResponse(readRequest.Id,readRequest.RequestId,data);worker.postMessage(self.Accelatrix.Serialization.ToJSON(readResponse),null)}return!0}if(messageType.Name==WebWorkerUtil.StatefulActivityPushAndEvaluateRequest.name||messageType.Alias==WebWorkerUtil.StatefulActivityPushAndEvaluateRequest.name||null!=messageType.Alias&&0<messageType.Alias.indexOf("."+WebWorkerUtil.StatefulActivityPushAndEvaluateRequest.name)){var entry,myResultingExpression,writeRequest=msg;if(null!=(entry=StatefulActivityHandler.Get(writeRequest.Id))){try{myResultingExpression=writeRequest.Predicate(null==entry.Data?[]:entry.Data,writeRequest.Data,writeRequest.Id),null==entry.Data?entry.Data=[writeRequest.Data]:entry.Data.push(writeRequest.Data)}catch(ex){myResultingExpression=ex}dataToPush=new WebWorkerUtil.StatefulActivityEvaluateResponse(writeRequest.Id,writeRequest.RequestId,myResultingExpression);worker.postMessage(self.Accelatrix.Serialization.ToJSON(dataToPush),null)}return!0}return messageType.Name==WebWorkerUtil.StatefulActivityReadResponse.name||messageType.Alias==WebWorkerUtil.StatefulActivityReadResponse.name||null!=messageType.Alias&&0<messageType.Alias.indexOf("."+WebWorkerUtil.StatefulActivityReadResponse.name)||messageType.Name==WebWorkerUtil.StatefulActivityEvaluateResponse.name||messageType.Alias==WebWorkerUtil.StatefulActivityEvaluateResponse.name||null!=messageType.Alias&&0<messageType.Alias.indexOf("."+WebWorkerUtil.StatefulActivityEvaluateResponse.name)},TaskSchedulerQueue.prototype.CancelAll=function(){this.Pending.ForEach(function(z){return z.Cancel()}),this.Workers.Where(function(z){return z.IsBusy}).ForEach(function(z){return z.Task.Cancel()})},TaskSchedulerQueue.prototype.KillAll=function(){this.pending=[],this.Workers.Where(function(z){return null!=z.Worker}).ForEach(function(z){return z.Worker.terminate()}),this.workers=[],this.ActiveWorkers=0},TaskSchedulerQueue.prototype.Broadcast=function(msg,exceptedTo){var whatToPost;null!=msg&&(whatToPost="String"==msg.GetType().Name?msg:self.Accelatrix.Serialization.ToJSON(msg),this.Workers.Where(function(z){return null==exceptedTo||exceptedTo.NotContains(z.Id)}).ForEach(function(z){return z.Worker.postMessage(whatToPost)}))},TaskSchedulerQueue})(),_a.CANCEL_TIMEOUT=null==self.__WebWorkerNestingLevel__?2e3:2e3/(self.__WebWorkerNestingLevel__*(1+self.__WebWorkerNestingLevel__)),_a.NUMBER_OF_BUFFERED_ACTIONS=3333,new _a);Object.defineProperty(TaskScheduler.config.constructor,"name",{get:function(){return"TasksConfig"}}),Object.defineProperty(Queue.constructor,"name",{get:function(){return"TaskSchedulerQueue"}})}(TaskScheduler=TaskScheduler||{}),(ScriptHandler=>{ScriptHandler.scriptSources=(TaskScheduler.IsNested()?(result=self.__WebWorkerScripts__,Object.defineProperty(result,"push",{enumerable:!1,value:function(){}})):(originalPush=(result=[(()=>{if(!TaskScheduler.IsNested()){var accelatrixLocation;try{accelatrixLocation=document.currentScript}catch(ex){}if(null==accelatrixLocation)try{for(var scripts=document.querySelectorAll("script"),i=0;i<scripts.length;i++){if(null!=scripts[i].getAttribute("src")&&0<=scripts[i].getAttribute("src").toLocaleLowerCase().indexOf("accelatrix"))return{SourceType:Tasks.TaskScriptSource.Url,Contents:scripts[i].getAttribute("src")};if(null!=scripts[i].innerText&&0<=scripts[i].innerText.indexOf("Accelatrix"))return{SourceType:Tasks.TaskScriptSource.PlainText,Contents:scripts[i].innerText}}}catch(ex){}else{if(null!=accelatrixLocation.innerText&&0<=accelatrixLocation.innerText.indexOf("Accelatrix"))return{SourceType:Tasks.TaskScriptSource.PlainText,Contents:accelatrixLocation.innerText};if(null!=accelatrixLocation.getAttribute("src"))return{SourceType:Tasks.TaskScriptSource.Url,Contents:accelatrixLocation.getAttribute("src")}}return{SourceType:Tasks.TaskScriptSource.Url,Contents:"https://ferreira-family.org/accelatrix/accelatrix.min.js"}}})()]).push.bind(result),Object.defineProperty(result,"push",{enumerable:!1,value:function(entry){null==entry||String.IsNullOrWhiteSpace(entry.SourceType)||String.IsNullOrWhiteSpace(entry.Contents)||(originalPush(entry),null!=scriptContents&&(scriptContents=void 0))}})),result);var result,originalPush,scriptContents=void 0;function GetScripts(callback){var sourceCount,result,checkEnded,loadScripts;void 0===scriptContents&&(scriptContents=null,sourceCount=ScriptHandler.scriptSources.length,result=[],checkEnded=function(){var fromIndex_1;result.length>=sourceCount&&(result.length<ScriptHandler.scriptSources.length?(fromIndex_1=sourceCount,sourceCount=ScriptHandler.scriptSources.length,loadScripts(fromIndex_1)):(scriptContents=result.OrderBy(function(z){return z.Index}).Select(function(z){return z.Contents}).ToList(),null!=callback&&callback()))},(loadScripts=function(fromIndex){ScriptHandler.scriptSources.Skip(fromIndex).ForEach(function(z,i){if(z.SourceType==Tasks.TaskScriptSource.PlainText)result.push({Index:fromIndex+i,Contents:fromIndex+i==0?UnpackJustAccelatrix(z.Contents):z.Contents});else{var xmlhttp,z=z.Contents,cache=!0,callback=function(r,e){if(null!=e)throw new Error(e);result.push({Index:fromIndex+i,Contents:fromIndex+i==0?UnpackJustAccelatrix(r):r}),checkEnded()};try{xmlhttp=null!=self.XMLHttpRequest?new XMLHttpRequest:new self.ActiveXObject("Microsoft.XMLHTTP")}catch(e){return void callback(null,e)}xmlhttp.onreadystatechange=function(){if(null!=xmlhttp&&xmlhttp.readyState==XMLHttpRequest.DONE)if(200==xmlhttp.status)callback(xmlhttp.responseText,null);else{var errorObj;try{errorObj=JSON.parse(xmlhttp.responseText)}catch(e){errorObj=xmlhttp.responseText}callback(null,errorObj)}},cache||(z+="?_"+Math.random()),xmlhttp.open("GET",z,!0),xmlhttp.send()}}),checkEnded()})(0))}function UnpackJustAccelatrix(contents){var start,endString,end;return null==contents?"":(start=(start=contents.indexOf("var Accelatrix,__extends="))<0?contents.indexOf("var __extends = (this"):start)<0||(end=(endString=';if("object"==typeof module&&"object"==typeof module.exports)module.exports=Accelatrix;Accelatrix.__esModule=Accelatrix;Accelatrix.Accelatrix=Accelatrix;if(self==null){self={}};self["Accelatrix"]=Accelatrix;').length+contents.lastIndexOf(endString))<endString.length?contents:contents.substring(start,end)}ScriptHandler.ScriptsObtained=function(){return null!=scriptContents},ScriptHandler.ScriptContents=function(){return null==scriptContents?"":scriptContents.Select(function(z,i){return 0==i?z.replace("1!=persistHashCode","1!=true").replace("persistHashCode == true","true == true"):z}).ToList().join("\n")},ScriptHandler.GetScriptContents=function(callback){null!=scriptContents&&0<scriptContents.length?null!=callback&&callback(scriptContents.join("\n")):GetScripts(function(){null!=callback&&callback(scriptContents.join("\n"))})}})(ScriptHandler=ScriptHandler||{}),(StatefulActivityHandler=>{var DEFAULT_BUFFER_SIZE_FOR_STREAM_STATEFUL_ACTIVITIES=5e3,StatefulActivities=(StatefulActivityHandler.Sequence=0,[]);function Get(id){return StatefulActivities.Where(function(z){return z.Id==id}).FirstOrNull()}function Execute(structure,data){var resolver,rejector,finalizer,canceller,myPromise,isBaseThread,currentActivityIndex,result,doActivity,fireExecution;return null!=structure&&null!=structure.Members&&structure.Members.Any()?(rejector=function(ex){console.error(ex)},finalizer=resolver=null,fireExecution=function(){},myPromise=new StatefulActivityPromise(canceller={Cancel:function(ex){fireExecution=function(){},doActivity(null,null!=ex?ex:new Tasks.TaskAbortException)}},function(newResolver){resolver=newResolver,fireExecution()},function(newRejector){rejector=newRejector},function(newFinalizer){finalizer=newFinalizer,fireExecution()}),isBaseThread=null!=Get(structure.Id),currentActivityIndex=0,result=data,doActivity=function(newData,exception){if(WebWorkerUtil.IsPromise(newData))newData.catch(function(ex){return doActivity(null,ex)}).then(function(z){return doActivity(z,null)}),null!=newData.Cancel&&newData.Cancel instanceof Function&&(canceller.Cancel=newData.Cancel);else if(canceller.Cancel=function(){},null!=exception){canceller.Cancel=function(){};try{null!=rejector&&rejector(exception)}catch(ex){}finally{null!=finalizer&&finalizer(),finalizer=resolver=rejector=null}}else if(result=newData,currentActivityIndex<=structure.Members.length-1)currentActivityIndex++,((canceller,id,op,args,data,isBaseThread,callback)=>{"Read"==op?isBaseThread?DoSyncActivity(canceller,ReadSync,[id],callback):((canceller,id,callback)=>{var msgId=Date.now().toString()+self.__WebWorkerId__,id=new WebWorkerUtil.StatefulActivityReadRequest(id,msgId,null);PostAndListen(canceller,id,callback)})(canceller,id,callback):"ConcatRead"==op?isBaseThread?DoSyncActivity(canceller,ConcatReadSync,[id,data],callback):((canceller,id,data,callback)=>{var msgId=Date.now().toString()+self.__WebWorkerId__,id=new WebWorkerUtil.StatefulActivityReadRequest(id,msgId,null);PostAndListen(canceller,id,function(r,ex){null!=ex?callback(null,ex):callback(null==r?data:r.concat(data),null)})})(canceller,id,data,callback):"PushAndEvaluate"==op?isBaseThread?DoSyncActivity(canceller,PushAndEvaluateSync,[id,data,args[0],args[1]],callback):((canceller,id,data,dataTransform,evaluator,callback)=>{var msgId=Date.now().toString()+self.__WebWorkerId__;function onResult(result,ex){null!=ex?callback(null,ex):(ex=null==result?data:result(untransformedDataToPost),callback(ex,null))}function post(dataToSendToWebWorker){null!=dataToSendToWebWorker&&dataToSendToWebWorker.Any&&(dataToSendToWebWorker=dataToSendToWebWorker.ToList()),WebWorkerUtil.IsPromise(dataToSendToWebWorker)?dataToSendToWebWorker.catch(function(ex){return onResult(null,ex)}).then(post):(dataToSendToWebWorker=new WebWorkerUtil.StatefulActivityPushAndEvaluateRequest(id,msgId,evaluator,dataToSendToWebWorker),PostAndListen(canceller,dataToSendToWebWorker,onResult))}(isEnumerable=null!=data&&null!=data.Any)&&(data=data.Freeze());var untransformedDataToPost=isEnumerable?data.ToList():data,isEnumerable=WebWorkerUtil.IsPromise(untransformedDataToPost),isEnumerable=null==dataTransform?untransformedDataToPost:isEnumerable?self.Accelatrix.Async.Chain(untransformedDataToPost,function(z){return dataTransform(untransformedDataToPost=z)}):dataTransform(untransformedDataToPost);post(isEnumerable)})(canceller,id,data,args[0],args[1],callback):"StreamPushAndEvaluate"==op?isBaseThread?DoSyncActivity(canceller,PushAndEvaluateSync,[id,data,args[0],args[1]],callback):((canceller,id,data,dataTransform,evaluator,bufferSize,accumulated,callback)=>{var msgId=Date.now().toString()+self.__WebWorkerId__,isEnumerable=((null==bufferSize||bufferSize<=0)&&(bufferSize=DEFAULT_BUFFER_SIZE_FOR_STREAM_STATEFUL_ACTIVITIES),null!=data&&null!=data.Any);function onResult(result,ex){null!=ex?callback(null,ex):(void 0===(ex=null==result?untransformedDataToPost:result(untransformedDataToPost))&&(hasMoreToServe=!1),isEnumerable&&hasMoreToServe&&null==accumulated?(accumulated=[],null!=ex&&null!=ex.ForEach?ex.ForEach(function(z){return accumulated.push(z)}):void 0!==ex&&accumulated.push(ex),accumulated.push(getNextbatch(accumulated.length)),result=new self.Accelatrix.Collections.AsyncEnumerable(accumulated),callback(result,null)):callback(ex,null))}function post(dataToSendToWebWorker){var isEmpty;null!=dataToSendToWebWorker&&dataToSendToWebWorker.Any&&(dataToSendToWebWorker=dataToSendToWebWorker.ToList()),WebWorkerUtil.IsPromise(dataToSendToWebWorker)?dataToSendToWebWorker.catch(function(ex){return onResult(null,ex)}).then(post):(isEmpty=null==dataToSendToWebWorker||null!=dataToSendToWebWorker.Any&&!dataToSendToWebWorker.Any())&&(null==untransformedDataToPost||null!=dataToSendToWebWorker.Any&&!untransformedDataToPost.Any())?(hasMoreToServe=!1,onResult(function(){},null)):isEmpty?(hasMoreToServe=!0,onResult(function(z){return z},null)):(isEmpty=new WebWorkerUtil.StatefulActivityPushAndEvaluateRequest(id,msgId,evaluator,dataToSendToWebWorker),PostAndListen(canceller,isEmpty,onResult))}isEnumerable&&(data=data.Freeze());var untransformedDataToPost=isEnumerable?data.Take(bufferSize).ToList():data,untransformedDataToPostIsPromise=WebWorkerUtil.IsPromise(untransformedDataToPost),hasMoreToServe=!!isEnumerable&&(!!untransformedDataToPostIsPromise||untransformedDataToPost.length>=bufferSize),untransformedDataToPostIsPromise=null==dataTransform?untransformedDataToPost:untransformedDataToPostIsPromise?self.Accelatrix.Async.Chain(untransformedDataToPost,function(z){return null!=(untransformedDataToPost=z).length&&z.length<bufferSize&&(hasMoreToServe=!1),dataTransform(z)}):dataTransform(untransformedDataToPost),getNextbatch=function(position){var promise=self.Accelatrix.Async.Chain(Execute({Id:id,Members:[{Op:"StreamPushAndEvaluate",Args:[dataTransform,evaluator,bufferSize,accumulated]}]},data),function(r){if(void 0!==r)return null==r||null==r.Any?accumulated[position]=r:r.Any()?r.ForEach(function(z,i){0==i?accumulated[position]=z:accumulated.push(z)}):accumulated[position]=void 0,accumulated.push(getNextbatch(accumulated.length)),accumulated[position];accumulated[position]=void 0});return promise.Blocking=!0,promise};post(untransformedDataToPostIsPromise)})(canceller,id,data,args[0],args[1],args[2],args[3],callback):"Push"==op?isBaseThread?DoSyncActivity(canceller,PushSync,[id,data,args[0]],callback):((id,data,dataTransform,callback)=>{function post(dataToSendToWebWorker){null!=dataToSendToWebWorker&&dataToSendToWebWorker.Any&&(dataToSendToWebWorker=dataToSendToWebWorker.ToList()),WebWorkerUtil.IsPromise(dataToSendToWebWorker)?dataToSendToWebWorker.catch(function(ex){return callback(null,ex)}).then(post):(dataToSendToWebWorker=new WebWorkerUtil.StatefulActivityWriteRequest(id,dataToPost,!0),self.postMessage(self.Accelatrix.Serialization.ToJSON(dataToSendToWebWorker),null),callback(null,null))}(isEnumerable=null!=data&&null!=data.Any)&&(data=data.Freeze());var untransformedDataToPost=isEnumerable?data.ToList():data,isEnumerable=WebWorkerUtil.IsPromise(untransformedDataToPost),dataToPost=null==dataTransform?untransformedDataToPost:isEnumerable?self.Accelatrix.Async.Chain(untransformedDataToPost,function(z){return dataTransform(untransformedDataToPost=z)}):dataTransform(untransformedDataToPost);post(dataToPost)})(id,data,args[0],callback):"Set"==op?isBaseThread?DoSyncActivity(canceller,SetSync,[id,data,args[0]],callback):((id,data,dataTransform,callback)=>{function post(dataToSendToWebWorker){null!=dataToSendToWebWorker&&dataToSendToWebWorker.Any&&(dataToSendToWebWorker=dataToSendToWebWorker.ToList()),WebWorkerUtil.IsPromise(dataToSendToWebWorker)?dataToSendToWebWorker.catch(function(ex){return callback(null,ex)}).then(post):(dataToSendToWebWorker=new WebWorkerUtil.StatefulActivityWriteRequest(id,dataToPost,!1),self.postMessage(self.Accelatrix.Serialization.ToJSON(dataToSendToWebWorker),null),callback(null,null))}(isEnumerable=null!=data&&null!=data.Any)&&(data=data.Freeze());var untransformedDataToPost=isEnumerable?data.ToList():data,isEnumerable=WebWorkerUtil.IsPromise(untransformedDataToPost),dataToPost=null==dataTransform?untransformedDataToPost:isEnumerable?self.Accelatrix.Async.Chain(untransformedDataToPost,function(z){return dataTransform(untransformedDataToPost=z)}):dataTransform(untransformedDataToPost);post(dataToPost)})(id,data,args[0],callback):"ReadAndPush"==op&&(isBaseThread?DoSyncActivity(canceller,ReadAndPushSync,[id,data,args[0]],callback):((canceller,id,data,dataTransform,callback)=>{var msgId=Date.now().toString()+self.__WebWorkerId__;function onResult(result,ex){null!=ex?callback(null,ex):callback(result,null)}function post(dataToSendToWebWorker){null!=dataToSendToWebWorker&&dataToSendToWebWorker.Any&&(dataToSendToWebWorker=dataToSendToWebWorker.ToList()),WebWorkerUtil.IsPromise(dataToSendToWebWorker)?dataToSendToWebWorker.catch(function(ex){return onResult(null,ex)}).then(post):(dataToSendToWebWorker=new WebWorkerUtil.StatefulActivityReadAndPushRequest(id,msgId,dataToPost),PostAndListen(canceller,dataToSendToWebWorker,onResult))}(isEnumerable=null!=data&&null!=data.Any)&&(data=data.Freeze());var untransformedDataToPost=isEnumerable?data.ToList():data,isEnumerable=WebWorkerUtil.IsPromise(untransformedDataToPost),dataToPost=null==dataTransform?untransformedDataToPost:isEnumerable?self.Accelatrix.Async.Chain(untransformedDataToPost,function(z){return dataTransform(untransformedDataToPost=z)}):dataTransform(untransformedDataToPost);post(dataToPost)})(canceller,id,data,args[0],callback))})(canceller,structure.Id,structure.Members[currentActivityIndex-1].Op,structure.Members[currentActivityIndex-1].Args,result,isBaseThread,doActivity);else try{null!=resolver&&resolver(result)}catch(ex){null!=rejector&&rejector(ex)}finally{null!=finalizer&&finalizer(),finalizer=resolver=rejector=null}},fireExecution=function(){doActivity(data,null),fireExecution=function(){}},myPromise):self.Accelatrix.Async.AsPromise(data)}function DoSyncActivity(canceller,func,args,callback){var result,exception,originalCancel=canceller.Cancel;canceller.Cancel=function(){canceller.Cancel=function(){},exception=new Tasks.TaskAbortException,result=null};try{result=func.apply(void 0,args)}catch(ex){exception=ex}canceller.Cancel=originalCancel,callback(result,exception)}function PostAndListen(canceller,message,callback){if(null==message)throw new self.Accelatrix.ArgumentNullException("message");if(String.IsNullOrWhiteSpace(message.Id))throw new self.Accelatrix.ArgumentException("message","Message needs an Id.");if(String.IsNullOrWhiteSpace(message.RequestId))throw new self.Accelatrix.ArgumentException("message","Message needs a RequestId.");var originalCancel=canceller.Cancel,onMessage=(canceller.Cancel=function(ex){self.removeEventListener("message",onMessage),canceller.Cancel=originalCancel,callback(null,null!=ex?ex:new Tasks.TaskAbortException)},function(e){if(null!=e.data){var responseObject=null;if("string"==typeof e.data){if(String.IsNullOrWhiteSpace(e.data))return;if(e.data.indexOf('"'+message.Id+'"')<0||e.data.indexOf('"'+message.RequestId+'"')<0)return;try{responseObject=self.Accelatrix.Serialization.FromJSON(e.data)}catch(ex){self.removeEventListener("message",onMessage),canceller.Cancel=originalCancel,callback(null,ex)}}else responseObject=e.data;responseObject.Id==message.Id&&responseObject.RequestId==message.RequestId&&(self.removeEventListener("message",onMessage),canceller.Cancel=originalCancel,responseObject.Data instanceof Error?callback(null,responseObject.Data):responseObject.Result instanceof Error?callback(null,responseObject.Result):null!=responseObject.Data?callback(responseObject.Data,null):callback(responseObject.Result,null))}});self.addEventListener("message",onMessage);try{self.postMessage(self.Accelatrix.Serialization.ToJSON(message),null)}catch(ex){callback(null,ex),self.removeEventListener("message",onMessage),canceller.Cancel=originalCancel}}StatefulActivityHandler.Get=Get,StatefulActivityHandler.Drop=function(id){StatefulActivities=StatefulActivities.Where(function(z){return z.Id!=id}).ToList()},StatefulActivityHandler.Create=function(instance){var newEntry;StatefulActivities.Where(function(z){return z.Id==instance.Id}).Any()||(newEntry={Id:instance.Id,Data:null},StatefulActivities.push(newEntry))},StatefulActivityHandler.Execute=Execute;var StatefulActivityPromise=(()=>{function StatefulActivityPromise(canceller,changeResolver,changeRejector,changeFinallizer){var _this=this;Object.defineProperty(this,"Cancel",{enumerable:!1,configurable:!1,value:function(){canceller.Cancel()}}),Object.defineProperty(this,"then",{enumerable:!1,configurable:!1,value:function(onfulfilled){return changeResolver(onfulfilled),_this}}),Object.defineProperty(this,"Then",{enumerable:!1,configurable:!1,value:function(onfulfilled){return changeResolver(onfulfilled),_this}}),Object.defineProperty(this,"catch",{enumerable:!1,configurable:!1,value:function(onrejected){return changeRejector(onrejected),_this}}),Object.defineProperty(this,"Catch",{enumerable:!1,configurable:!1,value:function(onrejected){return changeRejector(onrejected),_this}}),Object.defineProperty(this,"Finally",{enumerable:!1,configurable:!1,value:function(onFinished){return changeFinallizer(onFinished),_this}}),Object.defineProperty(this,"ContinueWith",{value:function(continueWith,merge){return self.Accelatrix.Async.Chain(_this,continueWith,merge)}})}return StatefulActivityPromise.prototype.Then=function(onfulfilled){return this},StatefulActivityPromise.prototype.then=function(onfulfilled){return this},StatefulActivityPromise.prototype.Catch=function(onrejected){return this},StatefulActivityPromise.prototype.catch=function(onrejected){return this},StatefulActivityPromise.prototype.Cancel=function(){return this},StatefulActivityPromise.prototype.Finally=function(callback){return this},StatefulActivityPromise.prototype.ContinueWith=function(continueWith,merge){return this},StatefulActivityPromise})();function ReadSync(id){id=Get(id);return null==id.Data?[]:id.Data}function ConcatReadSync(id,data){id=Get(id);return(null==id.Data?[]:id.Data).concat(data)}function PushAndEvaluateSync(id,data,dataTransform,evaluator){var id=Get(id),existingData=null==id.Data?null:id.Data,dataTransform=(null==existingData&&(id.Data=[],existingData=[]),null==dataTransform?data:dataTransform(data));return id.Data.push(dataTransform),(null==evaluator?function(z){return z}:evaluator(existingData,dataTransform))(data)}function PushSync(id,data,dataTransform){id=Get(id),dataTransform=null==dataTransform?data:dataTransform(data);return null==id.Data&&(id.Data=[]),id.Data.push(dataTransform),data}function SetSync(id,data,dataTransform){id=Get(id),null==(null==id.Data?null:id.Data)&&(id.Data=[]),dataTransform=null==dataTransform?data:dataTransform(data);return id.Data=[dataTransform],data}function ReadAndPushSync(id,data,dataTransform){var id=Get(id),result=id.Data,dataTransform=(null==result&&(id.Data=[]),null==dataTransform?data:dataTransform(data));return id.Data.push(dataTransform),result}StatefulActivityHandler.ReadSync=ReadSync,StatefulActivityHandler.ConcatReadSync=ConcatReadSync,StatefulActivityHandler.PushSync=PushSync,StatefulActivityHandler.SetSync=SetSync,StatefulActivityHandler.ReadAndPushSync=ReadAndPushSync})(StatefulActivityHandler=StatefulActivityHandler||{})}(Accelatrix=Accelatrix||{});if("object"==typeof module&&"object"==typeof module.exports)module.exports=Accelatrix;Accelatrix.__esModule=Accelatrix;Accelatrix.Accelatrix=Accelatrix;if(self==null){self={}};self["Accelatrix"]=Accelatrix;
var Accelatrix,__extends=this&&this.__extends||(()=>{var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}})(),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){var op=[n,v];if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,(op=t?[2&op[0],t.value]:op)[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3]))_.label=op[1];else if(6===op[0]&&_.label<t[1])_.label=t[1],t=op;else{if(!(t&&_.label<t[2])){t[2]&&_.ops.pop(),_.trys.pop();continue}_.label=t[2],_.ops.push(op)}}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}};(Accelatrix=>{(Collections=>{var EnumerableSerialization,AsyncEnumerableSystem;(EnumerableSerialization=>{EnumerableSerialization.DataMember=function(argumentIsTypeOrConstructor){return function(target,propertyKey,descriptor){return((propertyKey,descriptor,argumentIsTypeOrConstructor)=>{var original=descriptor.value;descriptor.value=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var result=original.apply(this,args),parentOJson=this.toJSON.bind(this);return result.toJSON=function(){var typeOrConstructor,typeOrConstructorType,parent=parentOJson(),myArgs=null==argumentIsTypeOrConstructor||!0!==argumentIsTypeOrConstructor?args:args.ToList();return!0===argumentIsTypeOrConstructor&&myArgs.Any()&&null!=myArgs[0]&&"String"!=(typeOrConstructorType=(typeOrConstructor=myArgs[0]).GetType()).Name&&(typeOrConstructorType=(typeOrConstructorType.IsFunction?self.Accelatrix.Type.FromConstructor(typeOrConstructor):typeOrConstructor).GetFullName(),myArgs[0]=typeOrConstructorType),parent.Members.push({Op:propertyKey,Args:myArgs}),parent},result}})(propertyKey,descriptor,argumentIsTypeOrConstructor)}}})(EnumerableSerialization=EnumerableSerialization||{}),(AsyncEnumerableSystem=>{var AsyncEnumerable=(_super=>{function AsyncEnumerable(enumerable){var asyncEnumerable,originalGetEnumerator,enumerable=_super.call(this,IsPromise(enumerable)?new AsyncEnumerable_1([]).Concat(enumerable):enumerable)||this;return originalGetEnumerator=(asyncEnumerable=enumerable).GetEnumerator.bind(asyncEnumerable),Object.defineProperty(asyncEnumerable,"GetEnumerator",{value:function(){var originalMoveNext,myEnumerator=originalGetEnumerator();return"AsyncEnumerator"!=myEnumerator.$type&&(originalMoveNext=myEnumerator.MoveNext.bind(myEnumerator),Object.defineProperty(myEnumerator,"MoveNext",{value:function(){var hasMoved=originalMoveNext();return hasMoved&&void 0===myEnumerator.Current?myEnumerator.MoveNext():hasMoved},configurable:!1}),myEnumerator.$type="AsyncEnumerator"),myEnumerator}}),enumerable}var AsyncEnumerable_1;return __extends(AsyncEnumerable,_super),(AsyncEnumerable_1=AsyncEnumerable).prototype.ForEach=function(action){var finalizer,myEnumerator=this.GetEnumerator(),index=0,concurrency=0,proceed=!0,cancellers=[],timer=setTimeout(assessAndContinue,0),handler={Cancel:function(){clearTimeout(timer),proceed=!1;try{null!=finalizer&&finalizer(new self.Accelatrix.AbortException)}catch(ex){throw ex}finally{finalizer=null,handler.Cancel=function(){},cancellers.Where(function(z){return null!=z}).ForEach(function(z){try{z()}catch(ex){}}),cancellers=[]}},Finally:function(onFinished){return finalizer=onFinished,clearTimeout(timer),assessAndContinue(),handler}},finalise=function(ex){proceed=!1,null!=finalizer?finalizer(ex):null!=ex&&console.error(ex),finalizer=null,handler.Cancel(),finalise=function(){}},assessAndContinue=function(){if(proceed)if(myEnumerator.MoveNext())for(;proceed;){if(IsPromise(myEnumerator.Current)){var cancellerIndex=cancellers.length,isBlocking=(cancellers.push(null==myEnumerator.Current?null:myEnumerator.Current.Cancel),null!=myEnumerator.Current&&null!=myEnumerator.Current.catch&&myEnumerator.Current.catch instanceof Function&&myEnumerator.Current.catch(function(ex){cancellers[cancellerIndex]=null,finalise(ex)}),concurrency++,!0===myEnumerator.Current.Blocking);if(myEnumerator.Current.then(function(r){if(concurrency--,cancellers[cancellerIndex]=null,void 0===r)try{assessAndContinue()}catch(ex){finalise(ex)}else try{var result=null==action||action(r,index++);proceed=null==result||!(!1===result),assessAndContinue()}catch(ex){finalise(ex)}}),8<=concurrency||isBlocking)break}else try{var result=null==action||action(myEnumerator.Current,index++);if(!(proceed=null==result||!(!1===result)))return void finalise()}catch(ex){return void finalise(ex)}if(!myEnumerator.MoveNext()){proceed=!1,concurrency<=0&&finalise();break}}else concurrency<=0&&finalise();else finalise()};return handler},AsyncEnumerable.prototype.ForAll=function(action){return this.ToList().ContinueWith(function(z){return z.ForAll(action)},!0)},AsyncEnumerable.prototype.Any=function(){return self.Accelatrix.Async.Chain(this.FirstOrNull(),function(r){return!(void 0===r)})},AsyncEnumerable.prototype.NotAny=function(){return self.Accelatrix.Async.Chain(this.FirstOrNull(),function(r){return void 0===r})},AsyncEnumerable.prototype.ToList=function(){function doer(){var handler;hasStarted||(hasStarted=!0,handler=_this.ForEach(function(z){return result.push(z)}),canceller=handler.Cancel,handler.Finally(function(exception){try{null!=exception?null!=myRejector&&myRejector(exception):null!=myResolver&&myResolver(result)}catch(ex){null!=myRejector&&myRejector(ex)}finally{canceller=myRejector=myResolver=function(){},null!=finalizer&&finalizer(),finalizer=function(){}}}))}var key,myResolver,finalizer,_this=this,result=[],myPromise=(null!=this.Key&&(key=this.Key,Object.defineProperty(result,"Key",{get:function(){return key},enumerable:!0})),{}),myRejector=function(ex){console.error(ex)},canceller=function(){myPromise.then=myPromise.Then=function(){},null!=myRejector&&myRejector(new self.Accelatrix.AbortException),null!=finalizer&&finalizer(),finalizer=myRejector=myResolver=canceller=function(){}},hasStarted=!1;return Object.defineProperty(myPromise,"then",{value:function(onFullfilled){return myResolver=onFullfilled,doer(),myPromise}}),Object.defineProperty(myPromise,"Then",{value:function(onFullfilled){return myResolver=onFullfilled,doer(),myPromise}}),Object.defineProperty(myPromise,"catch",{value:function(onrejected){return myRejector=onrejected,myPromise}}),Object.defineProperty(myPromise,"Catch",{value:function(onrejected){return myRejector=onrejected,myPromise}}),Object.defineProperty(myPromise,"Finally",{value:function(onFinished){return finalizer=onFinished,doer(),myPromise}}),Object.defineProperty(myPromise,"Cancel",{value:function(){null!=canceller&&canceller()}}),Object.defineProperty(myPromise,"ContinueWith",{value:function(continueWith,merge){return self.Accelatrix.Async.Chain(myPromise,continueWith,merge)}}),myPromise},AsyncEnumerable.prototype.Count=function(){return self.Accelatrix.Async.Chain(this.ToList(),function(r){return r.length})},AsyncEnumerable.prototype.Freeze=function(){var me=this,myEnumerator=(Object.defineProperty(me,"Freeze",{value:function(){return me},enumerable:!1,configurable:!0}),me.GetEnumerator()),myFirstOrNull=(Object.defineProperty(me,"GetEnumerator",{value:function(){return myEnumerator},enumerable:!1,configurable:!0}),me.FirstOrNull.bind(me));return Object.defineProperty(me,"Any",{value:function(){var promise=myFirstOrNull();return self.Accelatrix.Async.Chain(promise,function(r){return void 0!==r&&(myEnumerator=new me.constructor([r]).Concat({GetEnumerator:function(){return myEnumerator}}).GetEnumerator(),!0)})},enumerable:!1,configurable:!0}),me},AsyncEnumerable.prototype.Select=function(selector){var me=this;return new this.constructor(function(){var myEnumerator,index;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=0,_a.label=1;case 1:return myEnumerator.MoveNext()?IsPromise(myEnumerator.Current)?[3,3]:[4,null==selector?myEnumerator.Current:selector(myEnumerator.Current,void 0===myEnumerator.Current?index:index++)]:[3,6];case 2:return _a.sent(),[3,5];case 3:return[4,self.Accelatrix.Async.Chain(myEnumerator.Current,function(r){var selectorResult;return void 0===r?r:IsPromise(selectorResult=null==selector?r:selector(r,index++))?self.Accelatrix.Async.Chain(selector,function(r2){return void 0===r2?void 0:r2(r)}):selectorResult},!0)];case 4:_a.sent(),_a.label=5;case 5:return[3,1];case 6:return[2]}})})},AsyncEnumerable.prototype.Where=function(selector){var me=this;return new this.constructor(function(){var myEnumerator,index,selectorResult;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=0,null==selector&&(selector=function(a,b){return!0}),_a.label=1;case 1:return myEnumerator.MoveNext()?IsPromise(myEnumerator.Current)?[3,7]:IsPromise(selectorResult=selector(myEnumerator.Current,index++))?[3,4]:1!=selectorResult?[3,3]:[4,myEnumerator.Current]:[3,10];case 2:_a.sent(),_a.label=3;case 3:return[3,6];case 4:return[4,self.Accelatrix.Async.Chain(selectorResult,function(r){return void 0===r||1!=r?void 0:myEnumerator.Current})];case 5:_a.sent(),_a.label=6;case 6:return[3,9];case 7:return[4,self.Accelatrix.Async.Chain(myEnumerator.Current,function(r){var selectorResult;if(void 0!==r)return IsPromise(selectorResult=selector(r,index++))?self.Accelatrix.Async.Chain(selectorResult,function(r2){return void 0!==r2&&r2?r:void 0}):void 0===r||0==selectorResult?void 0:r},!0)];case 8:_a.sent(),_a.label=9;case 9:return[3,1];case 10:return[2]}})})},AsyncEnumerable.prototype.OfType=function(typeConstructorOrType){return this.Where(function(z){return IsPromise(z)?self.Accelatrix.Async.Chain(z,function(r){return void 0===r?void 0:null==r||r.GetType().IsOfType(typeConstructorOrType)}):null==z||z.GetType().IsOfType(typeConstructorOrType)})},AsyncEnumerable.prototype.SelectMany=function(selector){var me=this;return new this.constructor(function(){var myEnumerator,index,children,myEntryPromise,childEnumerator;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=0,_a.label=1;case 1:if(!myEnumerator.MoveNext())return[3,11];if(IsPromise(myEnumerator.Current))return[3,5];children=null==selector?new me.constructor(myEnumerator.Current):new me.constructor(selector(myEnumerator.Current,index++)),childEnumerator=children.GetEnumerator(),_a.label=2;case 2:return childEnumerator.MoveNext()?[4,childEnumerator.Current]:[3,4];case 3:return _a.sent(),[3,2];case 4:return[3,10];case 5:myEntryPromise=myEnumerator.Current,childEnumerator=null,_a.label=6;case 6:return null!=childEnumerator?[3,8]:[4,self.Accelatrix.Async.Chain(myEntryPromise,function(r){return null==childEnumerator&&(r=void 0===r?[r]:null==selector?new me.constructor(r):new me.constructor(selector(r,index++)),childEnumerator=r.GetEnumerator()),childEnumerator.MoveNext(),childEnumerator.Current})];case 7:return _a.sent(),[3,6];case 8:return childEnumerator.MoveNext()?[4,childEnumerator.Current]:[3,10];case 9:return _a.sent(),[3,8];case 10:return[3,1];case 11:return[2]}})})},AsyncEnumerable.prototype.Concat=function(second){return IsPromise(second)?new AsyncEnumerable_1([this,new AsyncEnumerable_1([1]).Select(function(z){return second}).SelectMany(function(z){return z})]).SelectMany(function(z){return z}):_super.prototype.Concat.call(this,second)},AsyncEnumerable.prototype.ToEnumerable=function(){return _super.prototype.ToEnumerable.call(this)},AsyncEnumerable.prototype.FirstOrNull=function(){var myResolver,finalizer,_this=this,myRejector=function(ex){console.error(ex)},canceller=function(){null!=myRejector&&myRejector(new self.Accelatrix.AbortException),myResolver=myRejector=finalizer=canceller=function(){}},result=void 0,myPromise={},isDoing=!1;return Object.defineProperty(myPromise,"then",{value:function(onFullfilled){return myResolver=onFullfilled,isDoing||(isDoing=!0,onFullfilled=_this.ForEach(function(z){return result=z,!1}),canceller=onFullfilled.Cancel,onFullfilled.Finally(function(exception){try{null!=exception?null!=myRejector&&myRejector(exception):null!=myResolver&&myResolver(result)}catch(ex){null!=myRejector&&myRejector(ex)}finally{canceller=myRejector=myResolver=function(){},null!=finalizer&&finalizer(),finalizer=function(){}}})),myPromise}}),Object.defineProperty(myPromise,"Then",{value:function(onFullfilled){return myPromise.then(onFullfilled)}}),Object.defineProperty(myPromise,"catch",{value:function(onrejected){return myRejector=onrejected,myPromise}}),Object.defineProperty(myPromise,"Catch",{value:function(onrejected){return myPromise.catch(onrejected)}}),Object.defineProperty(myPromise,"Finally",{value:function(onFinished){return finalizer=onFinished,myPromise}}),Object.defineProperty(myPromise,"Cancel",{value:function(){null!=canceller&&canceller()}}),Object.defineProperty(myPromise,"ContinueWith",{value:function(continueWith,merge){return self.Accelatrix.Async.Chain(myPromise,continueWith,merge)}}),myPromise},AsyncEnumerable.prototype.LastOrNull=function(){return self.Accelatrix.Async.Chain(this.ToList(),function(r){return null==r?null:r[r.length-1]})},AsyncEnumerable.prototype.Reverse=function(){return self.Accelatrix.Async.Chain(this.ToList(),function(r){return null==r?null:r.Reverse()})},AsyncEnumerable.prototype.NotNullOrEmpty=function(){return _super.prototype.NotNullOrEmpty.call(this)},AsyncEnumerable.prototype.Contains=function(element){var me=this;return IsPromise(element)?self.Accelatrix.Async.Chain(element,function(r){return me.Contains(r)},!0):new this.constructor(function(){var myEnumerator,hasFound;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),hasFound=!1,_a.label=1;case 1:return hasFound||!myEnumerator.MoveNext()?[3,7]:IsPromise(myEnumerator.Current)?[3,4]:Object.AreEqual(myEnumerator.Current,element)?[4,hasFound=!0]:[3,3];case 2:_a.sent(),_a.label=3;case 3:return[3,6];case 4:return[4,self.Accelatrix.Async.Chain(myEnumerator.Current,function(r){if(void 0!==r&&!hasFound)return!!(hasFound=Object.AreEqual(r,element))||void 0})];case 5:_a.sent(),_a.label=6;case 6:return[3,1];case 7:return[2]}})}).Any()},AsyncEnumerable.prototype.NotContains=function(element){var me=this;return IsPromise(element)?self.Accelatrix.Async.Chain(element,function(r){return me.NotContains(r)},!0):new this.constructor(function(){var myEnumerator,hasFound;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),hasFound=!1,_a.label=1;case 1:return hasFound||!myEnumerator.MoveNext()?[3,7]:IsPromise(myEnumerator.Current)?[3,4]:Object.AreEqual(myEnumerator.Current,element)?[4,!(hasFound=!0)]:[3,3];case 2:_a.sent(),_a.label=3;case 3:return[3,6];case 4:return[4,self.Accelatrix.Async.Chain(myEnumerator.Current,function(r){if(void 0!==r&&!hasFound)return!(hasFound=Object.AreEqual(r,element))&&void 0})];case 5:_a.sent(),_a.label=6;case 6:return[3,1];case 7:return[2]}})}).NotAny()},AsyncEnumerable.prototype.OrderBy=function(comparer){return self.Accelatrix.Async.Chain(this.ToList(),function(r){return null==r?null:r.OrderBy(comparer)})},AsyncEnumerable.prototype.OrderByDescending=function(comparer){return self.Accelatrix.Async.Chain(this.ToList(),function(r){return null==r?null:r.OrderByDescending(comparer)})},AsyncEnumerable.prototype.Distinct=function(equalityComparer){function selector(element){if(0!=popped.length)for(var i=0;i<popped.length;i++){if(popped[i]==element)return 1;if(null!=popped[i]&&comparer(popped[i],element))return 1}}var me=this,popped=[],comparer=null!=equalityComparer?equalityComparer:function(a,b){return Object.AreEqual(a,b)};return new this.constructor(function(){var myEnumerator,currentPromise;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),_a.label=1;case 1:return myEnumerator.MoveNext()?IsPromise(myEnumerator.Current)?[3,4]:selector(myEnumerator.Current)?[3,3]:(popped.push(myEnumerator.Current),[4,myEnumerator.Current]):[3,7];case 2:_a.sent(),_a.label=3;case 3:return[3,6];case 4:return currentPromise=myEnumerator.Current,[4,self.Accelatrix.Async.Chain(currentPromise,function(r){return void 0===r?r:selector(r)?void 0:(popped.push(r),r)})];case 5:_a.sent(),_a.label=6;case 6:return[3,1];case 7:return[2]}})})},AsyncEnumerable.prototype.TakeWhileDistinct=function(){function selector(element){if(0!=popped.length)for(var i=0;i<popped.length;i++)if(Object.AreEqual(popped[i],element))return 1}var me=this,popped=[];return new this.constructor(function(){var myEnumerator,stop,currentPromise;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),stop=!1,_a.label=1;case 1:return stop||!myEnumerator.MoveNext()?[3,8]:IsPromise(myEnumerator.Current)?[3,5]:selector(myEnumerator.Current)?[3,3]:(popped.push(myEnumerator.Current),[4,myEnumerator.Current]);case 2:return _a.sent(),[3,4];case 3:stop=!0,_a.label=4;case 4:return[3,7];case 5:return currentPromise=myEnumerator.Current,[4,self.Accelatrix.Async.Chain(currentPromise,function(r){if(void 0!==r&&!stop)return selector(r)?void(stop=!0):(popped.push(r),r)})];case 6:_a.sent(),_a.label=7;case 7:return[3,1];case 8:return[2]}})})},AsyncEnumerable.prototype.SkipWhileDistinct=function(){function selector(element){if(0!=popped.length)for(var i=0;i<popped.length;i++)if(Object.AreEqual(popped[i],element))return 1}var me=this,popped=[];return new this.constructor(function(){var myEnumerator,stopSkipping,currentPromise;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),stopSkipping=!1,_a.label=1;case 1:return myEnumerator.MoveNext()?IsPromise(myEnumerator.Current)?[3,4]:(selector(myEnumerator.Current)?(stopSkipping=!0,popped=null):stopSkipping||popped.push(myEnumerator.Current),stopSkipping?[4,myEnumerator.Current]:[3,3]):[3,7];case 2:_a.sent(),_a.label=3;case 3:return[3,6];case 4:return currentPromise=myEnumerator.Current,[4,self.Accelatrix.Async.Chain(currentPromise,function(r){if(void 0!==r&&stopSkipping)return selector(r)?(stopSkipping=!0,popped=null):stopSkipping||popped.push(r),stopSkipping?r:void 0})];case 5:_a.sent(),_a.label=6;case 6:return[3,1];case 7:return[2]}})})},AsyncEnumerable.prototype.Skip=function(count){var me=this;return new this.constructor(function(){var myEnumerator,index,currentPromise;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=0,_a.label=1;case 1:return myEnumerator.MoveNext()?IsPromise(myEnumerator.Current)?[3,4]:index++>count-1?[4,myEnumerator.Current]:[3,3]:[3,7];case 2:_a.sent(),_a.label=3;case 3:return[3,6];case 4:return currentPromise=myEnumerator.Current,[4,self.Accelatrix.Async.Chain(currentPromise,function(r){return void 0!==r&&index++>count-1?r:void 0})];case 5:_a.sent(),_a.label=6;case 6:return[3,1];case 7:return[2]}})})},AsyncEnumerable.prototype.Take=function(count){var me=this;return new this.constructor(function(){var myEnumerator,index,take,currentPromise;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),take=!(index=0),_a.label=1;case 1:return take&&myEnumerator.MoveNext()?IsPromise(myEnumerator.Current)?[3,3]:(take=index++<count-1,[4,myEnumerator.Current]):[3,6];case 2:return _a.sent(),[3,5];case 3:return currentPromise=myEnumerator.Current,[4,self.Accelatrix.Async.Chain(currentPromise,function(r){if(void 0!==r&&take)return take=index++<count-1,r})];case 4:_a.sent(),_a.label=5;case 5:return[3,1];case 6:return[2]}})})},AsyncEnumerable.prototype.SkipWhile=function(condition){var me=this;return new this.constructor(function(){var myEnumerator,endedSkipping,currentPromise;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),endedSkipping=!1,_a.label=1;case 1:return myEnumerator.MoveNext()?IsPromise(myEnumerator.Current)?[3,4]:(endedSkipping=endedSkipping||null==condition||!condition(myEnumerator.Current))?[4,myEnumerator.Current]:[3,3]:[3,7];case 2:_a.sent(),_a.label=3;case 3:return[3,6];case 4:return currentPromise=myEnumerator.Current,[4,self.Accelatrix.Async.Chain(currentPromise,function(r){return void 0!==r&&!stop&&(endedSkipping=endedSkipping||null==condition||!condition(r))?r:void 0})];case 5:_a.sent(),_a.label=6;case 6:return[3,1];case 7:return[2]}})})},AsyncEnumerable.prototype.TakeWhile=function(condition){var me=this;return new this.constructor(function(){var myEnumerator,taking,currentPromise;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),taking=!0,_a.label=1;case 1:return taking&&myEnumerator.MoveNext()?IsPromise(myEnumerator.Current)?[3,4]:(taking=(taking||null==condition)&&condition(myEnumerator.Current))?[4,myEnumerator.Current]:[3,3]:[3,7];case 2:_a.sent(),_a.label=3;case 3:return[3,6];case 4:return currentPromise=myEnumerator.Current,[4,self.Accelatrix.Async.Chain(currentPromise,function(r){return void 0!==r&&!stop&&(taking=(taking||null==condition)&&condition(r))?r:void 0})];case 5:_a.sent(),_a.label=6;case 6:return[3,1];case 7:return[2]}})})},AsyncEnumerable.prototype.Union=function(sequence){var _this=this,sequence=null==sequence?null:new this.constructor(sequence);return null==sequence?this:this.Concat(sequence.Where(function(z){return self.Accelatrix.Async.Chain(_this.Contains(z),function(z){return void 0===z?z:!z})}))},AsyncEnumerable.prototype.GroupBy=function(keySelector){var me=this,popped=[];return new this.constructor(function(){var poppedGroupCount,myEnumerator,lineEnumerator,groupsEnumerator,lineIterator,valuesIterator;return __generator(this,function(_a){switch(_a.label){case 0:poppedGroupCount=0,myEnumerator=me.GetEnumerator(),lineIterator=function(){var i,_loop_2,currentPromise;return __generator(this,function(_a){switch(_a.label){case 0:i=0,_loop_2=function(){var transformed_1,poppedEntry;return __generator(this,function(_a){switch(_a.label){case 0:return IsPromise(myEnumerator.Current)?[3,2]:(transformed_1=keySelector(myEnumerator.Current,i++),poppedEntry=popped.Where(function(z){return Object.AreEqual(z.Key,transformed_1)}).FirstOrNull(),null==poppedEntry&&(poppedEntry={Key:transformed_1,Values:[]},popped.push(poppedEntry)),poppedEntry.Values.push(myEnumerator.Current),[4,poppedEntry]);case 1:return _a.sent(),[3,4];case 2:return currentPromise=myEnumerator.Current,[4,self.Accelatrix.Async.Chain(currentPromise,function(r){var transformed,poppedEntry,newKey;if(void 0!==r)return transformed=keySelector(r,i++),(newKey=null==(poppedEntry=popped.Where(function(z){return Object.AreEqual(z.Key,transformed)}).FirstOrNull()))&&popped.push(poppedEntry={Key:transformed,Values:[]}),poppedEntry.Values.push(r),newKey?poppedEntry:{Key:poppedEntry.Key,Values:[r],IsCumulative:!0}})];case 3:_a.sent(),_a.label=4;case 4:return[2]}})},_a.label=1;case 1:return myEnumerator.MoveNext()?[5,_loop_2()]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})},lineEnumerator=new me.constructor(lineIterator).GetEnumerator(),lineIterator=function(){return __generator(this,function(_a){switch(_a.label){case 0:if(!lineEnumerator.MoveNext())return[3,7];if(IsPromise(lineEnumerator.Current))return[3,4];_a.label=1;case 1:return poppedGroupCount<popped.length?[4,popped[++poppedGroupCount-1]]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[3,6];case 4:return[4,lineEnumerator.Current];case 5:_a.sent(),_a.label=6;case 6:return[3,0];case 7:return[2]}})},groupsEnumerator=new me.constructor(lineIterator).GetEnumerator(),lineIterator=function(){var currentKey_1,loadedValues_1;return __generator(this,function(_a){switch(_a.label){case 0:return IsPromise(groupsEnumerator.Current)?[3,2]:(currentKey_1=groupsEnumerator.Current.Key,loadedValues_1=groupsEnumerator.Current.Values,valuesIterator=function(){var nextIndex,currentPromise;return __generator(this,function(_a){switch(_a.label){case 0:nextIndex=0,_a.label=1;case 1:return nextIndex<loadedValues_1.length?[4,loadedValues_1[nextIndex++]]:[3,3];case 2:return _a.sent(),[3,1];case 3:if(!lineEnumerator.MoveNext())return[3,10];if(IsPromise(lineEnumerator.Current))return[3,7];_a.label=4;case 4:return nextIndex<loadedValues_1.length?[4,loadedValues_1[nextIndex++]]:[3,6];case 5:return _a.sent(),[3,4];case 6:return[3,9];case 7:return currentPromise=lineEnumerator.Current,[4,self.Accelatrix.Async.Chain(currentPromise,function(rslt){return void 0!==rslt&&null!=rslt&&Object.AreEqual(rslt.Key,currentKey_1)?rslt.Values.FirstOrNull():void 0})];case 8:_a.sent(),_a.label=9;case 9:return[3,3];case 10:return[2]}})},valuesIterator=new me.constructor(valuesIterator),Object.defineProperty(valuesIterator,"Key",{get:function(){return currentKey_1},enumerable:!0}),[4,valuesIterator]);case 1:return _a.sent(),[3,4];case 2:return valuesIterator=groupsEnumerator.Current,[4,self.Accelatrix.Async.Chain(valuesIterator,function(r){var currentKey,loadedValues;return void 0===r?r:(currentKey=r.Key,loadedValues=r.Values,r.IsCumulative?void 0:(poppedGroupCount++,r=new me.constructor(function(){var nextIndex,currentPromise;return __generator(this,function(_a){switch(_a.label){case 0:nextIndex=0,_a.label=1;case 1:return nextIndex<loadedValues.length?[4,loadedValues[nextIndex++]]:[3,3];case 2:return _a.sent(),[3,1];case 3:if(!lineEnumerator.MoveNext())return[3,10];if(IsPromise(lineEnumerator.Current))return[3,7];_a.label=4;case 4:return nextIndex<loadedValues.length?[4,loadedValues[nextIndex++]]:[3,6];case 5:return _a.sent(),[3,4];case 6:return[3,9];case 7:return currentPromise=lineEnumerator.Current,[4,self.Accelatrix.Async.Chain(currentPromise,function(rslt){return void 0!==rslt&&null!=rslt&&Object.AreEqual(rslt.Key,currentKey)?rslt.Values.FirstOrNull():void 0})];case 8:_a.sent(),_a.label=9;case 9:return[3,3];case 10:return[2]}})}),Object.defineProperty(r,"Key",{get:function(){return currentKey},enumerable:!0}),r))})];case 3:_a.sent(),_a.label=4;case 4:return[2]}})},_a.label=1;case 1:return groupsEnumerator.MoveNext()?[5,lineIterator()]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})})},AsyncEnumerable.prototype.Zip=function(second,resultSelector){var what=null==second?[]:second,outputProducer=null!=resultSelector?resultSelector:function(element,second,index){return{Item1:element,Item2:second}},me=this;return new this.constructor(function(){var enumerator1,enumerator2,keepGoing,index,one,two,ele1,ele2;return __generator(this,function(_a){switch(_a.label){case 0:enumerator1=me.GetEnumerator(),enumerator2=what.GetEnumerator(),keepGoing=!0,index=0,_a.label=1;case 1:return keepGoing?(one=enumerator1.MoveNext(),two=enumerator2.MoveNext(),keepGoing=one||two,ele1=enumerator1.Current,ele2=enumerator2.Current,void 0===ele1&&void 0===ele2?(keepGoing=!1,[2]):IsPromise(ele1)||IsPromise(ele2)?[3,3]:[4,outputProducer(ele1,ele2,index++)]):[3,10];case 2:return _a.sent(),[3,9];case 3:return IsPromise(ele1)?[3,5]:[4,self.Accelatrix.Async.Chain(ele2,function(r){return void 0===r?r:outputProducer(ele1,r,index++)})];case 4:return _a.sent(),[3,9];case 5:return IsPromise(ele2)?[3,7]:[4,self.Accelatrix.Async.Chain(ele1,function(r){return void 0===r?r:outputProducer(r,ele2,index++)})];case 6:return _a.sent(),[3,9];case 7:return[4,self.Accelatrix.Async.Chain(ele1,function(r){return self.Accelatrix.Async.Chain(ele2,function(r2){if(void 0!==r||void 0!==r2)return outputProducer(r,r2,index++);keepGoing=!1})},!0)];case 8:_a.sent(),_a.label=9;case 9:return[3,1];case 10:return[2]}})})},AsyncEnumerable.prototype.Interleave=function(second){return null==second?this:this.Zip(second,function(a,b){return[a,b]}).SelectMany(function(z){return z})},AsyncEnumerable.prototype.Intersect=function(sequence){var me=this,what=sequence;return new this.constructor(function(){var myEnumerator,secondEnumerator,reachedEnd,popped,pullNextEnum2;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),secondEnumerator=what.GetEnumerator(),reachedEnd=!1,popped=[],pullNextEnum2=function(enum1){if(secondEnumerator.MoveNext())return IsPromise(secondEnumerator.Current)?self.Accelatrix.Async.Chain(secondEnumerator.Current,function(enum2){if(void 0!==enum2)return popped.unshift(enum2),Object.AreEqual(enum1,enum2)?enum1:pullNextEnum2(enum1)},!0):void 0!==secondEnumerator.Current?(popped.unshift(secondEnumerator.Current),Object.AreEqual(enum1,secondEnumerator.Current)?enum1:pullNextEnum2(enum1)):void 0;reachedEnd=!0},_a.label=1;case 1:return myEnumerator.MoveNext()?[4,self.Accelatrix.Async.Chain(myEnumerator.Current,function(enum1){if(void 0!==enum1)return popped.Contains(enum1)?enum1:reachedEnd?void 0:pullNextEnum2(enum1)},!0)]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})})},AsyncEnumerable.prototype.Except=function(sequence){var me=this,what=sequence;return new this.constructor(function(){var myEnumerator,secondEnumerator,reachedEnd,popped,pullNextEnum2;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),secondEnumerator=what.GetEnumerator(),reachedEnd=!1,popped=[],pullNextEnum2=function(enum1){return secondEnumerator.MoveNext()?IsPromise(secondEnumerator.Current)?self.Accelatrix.Async.Chain(secondEnumerator.Current,function(enum2){return void 0===enum2?enum1:(popped.unshift(enum2),Object.AreEqual(enum1,enum2)?void 0:pullNextEnum2(enum1))},!0):void 0===secondEnumerator.Current?enum1:(popped.unshift(secondEnumerator.Current),Object.AreEqual(enum1,secondEnumerator.Current)?void 0:pullNextEnum2(enum1)):(reachedEnd=!0,enum1)},_a.label=1;case 1:return myEnumerator.MoveNext()?[4,self.Accelatrix.Async.Chain(myEnumerator.Current,function(enum1){if(void 0!==enum1&&!popped.Contains(enum1))return reachedEnd?enum1:pullNextEnum2(enum1)},!0)]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})})},AsyncEnumerable.prototype.ToDictionary=function(keySelector,valueSelector){return self.Accelatrix.Async.Chain(this.ToList(),function(r){return r.ToDictionary(keySelector,valueSelector)})},AsyncEnumerable.prototype.Sum=function(selector){return self.Accelatrix.Async.Chain(this.Select(selector).ToList(),function(r){return r.Sum()})},AsyncEnumerable.prototype.Average=function(selector){return self.Accelatrix.Async.Chain(this.Select(selector).ToList(),function(r){return r.Average()})},AsyncEnumerable.prototype.Max=function(comparer){return self.Accelatrix.Async.Chain(this.ToList(),function(r){return r.Max(comparer)})},AsyncEnumerable.prototype.Min=function(comparer){return self.Accelatrix.Async.Chain(this.ToList(),function(r){return r.Min(comparer)})},__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"Select",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"Where",null),__decorate([EnumerableSerialization.DataMember(!0),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"OfType",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"SelectMany",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"Concat",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"ToEnumerable",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"Reverse",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"NotNullOrEmpty",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"OrderBy",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"OrderByDescending",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"Distinct",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"TakeWhileDistinct",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"SkipWhileDistinct",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Number]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"Skip",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Number]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"Take",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"SkipWhile",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"TakeWhile",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"Union",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"GroupBy",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Function]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"Zip",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"Interleave",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"Intersect",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],AsyncEnumerable.prototype,"Except",null),AsyncEnumerable_1=__decorate([self.Accelatrix.Serialization.KnownType("Accelatrix.Collections.AsyncEnumerable"),__metadata("design:paramtypes",[Object])],AsyncEnumerable)})(self.Accelatrix.Collections.Enumerable);function IsPromise(value){return self.Accelatrix.Async.IsPromise(value)}AsyncEnumerableSystem.AsyncEnumerable=AsyncEnumerable,Object.getOwnPropertyNames(self.Accelatrix.Collections.Enumerable.prototype).Where(function(z){return"toJSON"!=z&&"GetEnumerator"!=z&&"constructor"!=z}).Except(Object.getOwnPropertyNames(AsyncEnumerable.prototype)).ForEach(function(z){Object.defineProperty(AsyncEnumerable.prototype,z,{value:function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var currentPromise=this.ToList(),currentPromise=new AsyncEnumerable([currentPromise]).Select(function(r){return void 0===r?void 0:r["ToArray"==z&&r instanceof Array?"ToList":z].apply(r,args)}).SelectMany(function(r){return r}),parentOJson=this.toJSON.bind(this);return currentPromise.toJSON=function(){var parent=parentOJson();return parent.Members.push({Op:z,Args:args}),parent},currentPromise}})})})(AsyncEnumerableSystem=AsyncEnumerableSystem||{}),Collections.AsyncEnumerable=AsyncEnumerableSystem.AsyncEnumerable,Object.defineProperty(Collections.AsyncEnumerable.prototype.constructor,"name",{get:function(){return"AsyncEnumerable"}})})(Accelatrix.Collections||(Accelatrix.Collections={}))})(Accelatrix=Accelatrix||{});if("object"==typeof module&&"object"==typeof module.exports)module.exports=Accelatrix;Accelatrix.__esModule=Accelatrix;Accelatrix.Accelatrix=Accelatrix;if(self==null){self={}};self["Accelatrix"]=Accelatrix;
var Accelatrix,__extends=this&&this.__extends||(()=>{var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}})(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};(Accelatrix=>{(Collections=>{var ParallelQuerySystem;(ParallelQuerySystem=>{var MIN_MEMBERS_FOR_MULTIPLE_THREADS=1e4;function AsParallel(){return new Accelatrix.Collections.ParallelQuery(this)}Object.defineProperty(AsParallel,"name",{get:function(){return"AsParallel"}}),self.Accelatrix.Collections.Enumerable.AddFunctionalMethod(AsParallel);var PackagedParallelActivityType,ParallelQuery=(_super=>{function ParallelQuery(enumerable){function scalarDoer(actionName,actionArgs,onResultAction){function returnResult(result,ex){try{null!=ex?null!=rejector&&rejector(ex):null!=resolver&&resolver(result)}catch(e){}finally{execPromise=null,canceller.Cancel=function(){},null!=finalizer&&finalizer(),finalizer=resolver=rejector=null}}var execPromise,resolver=null,rejector=function(ex){console.error(ex)},finalizer=null,canceller={Cancel:function(ex){return returnResult(null,new self.Accelatrix.Tasks.TaskAbortException)}},isDoing=!1,myPromise=new ParallelQueryScalarPromise(canceller,function(newResolver){resolver=newResolver,doer()},function(newRejector){return rejector=newRejector},function(newFinalizer){return finalizer=newFinalizer}),myJSON=_this.toJSON.bind(_this),doer=(Object.defineProperty(_this,"toJSON",{value:function(){var myresult=myJSON();return myresult.Members.push({Op:actionName,Args:actionArgs}),myresult}}),function(){isDoing||(isDoing=!0,(execPromise=_this.GetAwaiter()).Catch(function(ex){returnResult(null,ex)}),execPromise.OnPartialResult(function(z){z=onResultAction(z,!0);z.Handled&&returnResult(z.Result,null)}),execPromise.Then(function(r){r=onResultAction(r,!1);returnResult(r.Result,null)}))});return myPromise}var _this=_super.call(this,enumerable)||this;null!=enumerable.toJSON&&enumerable.GetType()!=_this.GetType()&&(_this.toJSON=enumerable.toJSON);return Object.defineProperty(_this,"Any",{enumerable:!1,value:function(){return scalarDoer("Any",null,function(result,isPartial){return{Handled:!isPartial||null!=result&&1==result,Result:isPartial?null==result?null:1==result:result.Where(function(z){return 1==z}).Any()}})}}),Object.defineProperty(_this,"NotAny",{enumerable:!1,value:function(element){return _this.Any().ContinueWith(function(z){return!z})}}),Object.defineProperty(_this,"Contains",{enumerable:!1,value:function(element){return scalarDoer("Contains",[element],function(result,isPartial){return{Handled:!isPartial||null!=result&&1==result,Result:isPartial?null==result?null:1==result:result.Where(function(z){return 1==z}).Any()}})}}),Object.defineProperty(_this,"NotContains",{enumerable:!1,value:function(element){return _this.Contains(element).ContinueWith(function(z){return!z})}}),Object.defineProperty(_this,"FirstOrNull",{enumerable:!1,value:function(){return scalarDoer("FirstOrNull",null,function(result,isPartial){return{Handled:!isPartial||null!=result,Result:isPartial?result:result.Where(function(z){return null!=z}).FirstOrNull()}})}}),Object.defineProperty(_this,"LastOrNull",{enumerable:!1,value:function(){return scalarDoer("LastOrNull",null,function(result,isPartial){return{Handled:!!isPartial&&null!=result,Result:isPartial?null:result.Where(function(z){return null!=z}).LastOrNull()}})}}),Object.defineProperty(_this,"Count",{enumerable:!1,value:function(){return scalarDoer("Count",null,function(result,isPartial){return{Handled:!isPartial,Result:isPartial?null:result.Sum()}})}}),Object.defineProperty(_this,"Sum",{enumerable:!1,value:function(selector){return scalarDoer("Sum",null==selector?null:[selector],function(result,isPartial){return{Handled:!isPartial,Result:isPartial?null:result.Sum()}})}}),Object.defineProperty(_this,"Average",{enumerable:!1,value:function(selector){return scalarDoer(function(z,selector){return z.Select(function(w){return null==selector?w:selector(z)}).ToList().ContinueWith(function(w){return w.Take(1).Where(function(z){return null!=z&&z instanceof Date}).Any()?{Count:1,Sum:w.Average()}:{Count:w.Count(),Sum:w.Sum()}})},null==selector?null:[selector],function(result,isPartial){return{Handled:!isPartial,Result:null!=result&&null!=(isPartial=result)&&isPartial.Any()?isPartial.Take(1).Where(function(z){return null!=z.Sum&&z.Sum instanceof Date}).Any()?(dates=isPartial.Select(function(z){return z.Sum}).Select(function(z){return z.getTime()}).ToList(),min=dates.Min(),dates=dates.Select(function(z){return z-min}).Sum(),countDates=isPartial.Select(function(z){return z.Count}).Sum(),new Date(min+Math.round(dates/countDates))):(dates=isPartial.Select(function(z){return z.Sum}).Sum(),countDates=isPartial.Select(function(z){return z.Count}).Sum(),null!=dates.Amount?dates.Amount=dates.Amount/countDates:dates/=countDates,dates):null};var min,dates,countDates})}}),Object.defineProperty(_this,"Min",{enumerable:!1,value:function(selector){return scalarDoer("Min",null==selector?null:[selector],function(result,isPartial){return{Handled:!isPartial,Result:isPartial?null:result.Min()}})}}),Object.defineProperty(_this,"Max",{enumerable:!1,value:function(selector){return scalarDoer("Max",null==selector?null:[selector],function(result,isPartial){return{Handled:!isPartial,Result:isPartial?null:result.Max()}})}}),Object.defineProperty(_this,"ToDictionary",{enumerable:!1,value:function(keySelector,valueSelector){return scalarDoer("ToDictionary",[keySelector,valueSelector],function(result,isPartial){return{Handled:!isPartial,Result:isPartial||null==result?null:result.GroupBy(function(z){return z.Key}).ToDictionary(function(a){return a.Key},function(b){return b.Select(function(z){return z.Value}).SelectMany(function(z){return z}).SelectMany(function(z){return z}).ToList()})}})}}),Object.defineProperty(_this,"AsParallel",{enumerable:!1,value:function(){return _this}}),_this}return __extends(ParallelQuery,_super),ParallelQuery.prototype.GetAwaiter=function(){return Execute(this)},ParallelQuery.prototype.ForEach=function(action){var finalizer,awaiter=this.GetAwaiter(),index=0,endResult=void 0,canceller=function(){null!=awaiter&&null!=awaiter.Cancel&&awaiter.Cancel()},result=(awaiter.catch(function(ex){(canceller=null)!=finalizer&&finalizer(ex),endResult=ex}).then(function(z){(z=>{(null==z||null==z.Any?[z]:z).ForEach(function(w){try{var result=null==action||action(w,index++);if(!(null==result||!(!1===result)))return awaiter.Cancel(),result}catch(ex){throw awaiter.Cancel(),ex}})})(z),(canceller=null)!=finalizer&&finalizer(),endResult=null}),{Cancel:function(){null!=canceller&&canceller()},Finally:function(onFinished){return finalizer=onFinished,void 0!==endResult&&onFinished(null!=endResult?endResult:void 0),result}});return result},__decorate([self.Accelatrix.Serialization.KnownType("Accelatrix.Collections.ParallelQuery"),__metadata("design:paramtypes",[Object])],ParallelQuery)})(self.Accelatrix.Collections.AsyncEnumerable),ParallelQueryPromise=(ParallelQuerySystem.ParallelQuery=ParallelQuery,(()=>{function ParallelQueryPromise(taskPromise,task,statefulActivities,postParallelActivities,log){var finalizer,_this=this,rejector=function(ex){console.error(ex)};null!=log&&(log.push("Parallel"),log.push(Date.now())),taskPromise.Finally(function(t){null!=statefulActivities&&statefulActivities.forEach(function(z){return z.Dispose()}),null!=log&&(log.push("Done"),log.push(Date.now()),setTimeout(function(){return console.log(log)},1e3)),(statefulActivities=null)!=finalizer&&finalizer()}),Object.defineProperty(this,"Cancel",{enumerable:!1,configurable:!1,value:function(){taskPromise.Cancel(),null!=statefulActivities&&statefulActivities.forEach(function(z){return z.Dispose()}),statefulActivities=null}}),Object.defineProperty(this,"then",{enumerable:!1,configurable:!1,value:function(onfulfilled){return taskPromise.Then(function(result){if(null!=onfulfilled){var finalResult;try{finalResult=result.SelectMany(function(z){return z}),null!=postParallelActivities&&postParallelActivities.ForEach(function(z){return finalResult=z(finalResult)}),finalResult=finalResult.ToList()}catch(ex){(onfulfilled=null)!=rejector&&rejector(ex)}null!=onfulfilled&&onfulfilled(finalResult)}}),_this}}),Object.defineProperty(this,"Then",{enumerable:!1,configurable:!1,value:function(onfulfilled){return _this.then(onfulfilled)}}),Object.defineProperty(this,"catch",{enumerable:!1,configurable:!1,value:function(onrejected){return rejector=onrejected,taskPromise.Catch(function(ex){null!=onrejected&&onrejected(ex)}),_this}}),Object.defineProperty(this,"Catch",{enumerable:!1,configurable:!1,value:function(onrejected){return _this.catch(onrejected)}}),Object.defineProperty(this,"Finally",{enumerable:!1,configurable:!1,value:function(onFinished){return finalizer=onFinished,_this}}),Object.defineProperty(this,"OnPartialResult",{enumerable:!1,configurable:!1,value:function(onPartialResult){return task.OnPartialResult(function(r){null!=log&&(log.push("Partial result"),log.push(Date.now())),null!=onPartialResult&&onPartialResult(r)}),_this}}),Object.defineProperty(this,"ContinueWith",{value:function(continueWith,merge){return self.Accelatrix.Async.Chain(_this,continueWith,merge)}})}return ParallelQueryPromise.prototype.OnPartialResult=function(onPartialResult){return this},ParallelQueryPromise.prototype.Then=function(onfulfilled){return this},ParallelQueryPromise.prototype.then=function(onfulfilled){return this},ParallelQueryPromise.prototype.Catch=function(onrejected){return this},ParallelQueryPromise.prototype.catch=function(onrejected){return this},ParallelQueryPromise.prototype.Cancel=function(){return this},ParallelQueryPromise.prototype.Finally=function(callback){return this},ParallelQueryPromise.prototype.ContinueWith=function(continueWith,merge){return this},ParallelQueryPromise})()),ParallelQueryScalarPromise=(()=>{function ParallelQueryScalarPromise(canceller,changeResolver,changeRejector,changeFinallizer){var _this=this;Object.defineProperty(this,"Cancel",{enumerable:!1,configurable:!1,value:function(){canceller.Cancel()}}),Object.defineProperty(this,"then",{enumerable:!1,configurable:!1,value:function(onfulfilled){return changeResolver(onfulfilled),_this}}),Object.defineProperty(this,"Then",{enumerable:!1,configurable:!1,value:function(onfulfilled){return changeResolver(onfulfilled),_this}}),Object.defineProperty(this,"catch",{enumerable:!1,configurable:!1,value:function(onrejected){return changeRejector(onrejected),_this}}),Object.defineProperty(this,"Catch",{enumerable:!1,configurable:!1,value:function(onrejected){return changeRejector(onrejected),_this}}),Object.defineProperty(this,"Finally",{enumerable:!1,configurable:!1,value:function(onFinished){return changeFinallizer(onFinished),_this}}),Object.defineProperty(this,"ContinueWith",{value:function(continueWith,merge){return self.Accelatrix.Async.Chain(_this,continueWith,merge)}})}return ParallelQueryScalarPromise.prototype.Then=function(onfulfilled){return this},ParallelQueryScalarPromise.prototype.then=function(onfulfilled){return this},ParallelQueryScalarPromise.prototype.Catch=function(onrejected){return this},ParallelQueryScalarPromise.prototype.catch=function(onrejected){return this},ParallelQueryScalarPromise.prototype.Cancel=function(){return this},ParallelQueryScalarPromise.prototype.Finally=function(callback){return this},ParallelQueryScalarPromise.prototype.ContinueWith=function(continueWith,merge){return this},ParallelQueryScalarPromise})(),ParallelQueryStreamPromise=(_super=>{function ParallelQueryStreamPromise(canceller,changeResolver,changeRejector,changeFinallizer,changeOnPartialResult){var _this=_super.call(this,canceller,changeResolver,changeRejector,changeFinallizer)||this;return Object.defineProperty(_this,"OnPartialResult",{enumerable:!1,configurable:!1,value:function(onPartialResult){return changeOnPartialResult(onPartialResult),_this}}),_this}return __extends(ParallelQueryStreamPromise,_super),ParallelQueryStreamPromise.prototype.OnPartialResult=function(onPartialResult){return this},ParallelQueryStreamPromise})(ParallelQueryScalarPromise);function Execute(parallelQuery){var activities,minMembersInPartition,queryAnalysis=(parallelQuery=>{for(var root=(parallelQuery=parallelQuery.toJSON()).Members,start=root[0],isArray=!1,range=null,isGenerator=!1;null!=start;){var startType=start.GetType();startType.IsArray?(isArray=!0,start=null):startType.IsFunction?(isGenerator=!0,start=null):null!=start.Op?start.Op.GetType().IsFunction&&"Enumerable_Range"==start.Op.name&&null!=start.Args&&2==start.Args.length?(range={Start:start.Args[0],Count:start.Args[1]},root=start,start=null):(start=start.Op,root=start):startType.IsOfType(self.Accelatrix.Collections.Enumerable)&&(startType=start.toJSON(),root[0]=startType,root=startType.Members,start=root[0])}var blackList=["Accelatrix.Collections.Enumerable","Enumerable.Range","Enumerable(","Accelatrix.Collections.ParallelQuery","ParallelQuery.Range","ParallelQuery(","Accelatrix.Collections.AsyncEnumerable","AsyncEnumerable.Range","AsyncEnumerable(","Accelatrix.Collections.AsyncEnumerable"],parallelQuery={IsArray:isArray,IsGenerator:isGenerator,Range:range,Host:root,Structure:parallelQuery,LinearActivitySequence:Object.FlattenHierarchy(parallelQuery,function(z){return null!=z.Members?z.Members:null!=z.Args?z.Args:null!=z.toJSON?z.toJSON.Members:z instanceof Function?z:null}).Skip(1).Select(function(z){return z}).ToList(),DataSources:[]};return null!=(parallelQuery=__assign(__assign({},parallelQuery),{DataSources:parallelQuery.LinearActivitySequence.Select(function(z,i){return{LinearActivitySequence:i,Activity:z,IsRootSource:z==root[0]}}).Where(function(z){return z.Activity!=root}).Where(function(z){return z.Activity.GetType().IsArray||z.Activity.GetType().IsFunction&&blackList.Where(function(w){return 0<=z.Activity.toString().indexOf(w)}).Any()}).ToList()})).Range&&(parallelQuery.DataSources=[{LinearActivitySequence:0,Activity:parallelQuery.Host.Op,IsRootSource:!0}].concat(parallelQuery.DataSources)),parallelQuery})(parallelQuery),splitBetweenSyncAndParallel=(queryAnalysis=>{var lastLinearActivityDataSource,indexOfAsParallel=queryAnalysis.LinearActivitySequence.Select(function(z,i){return{Index:i,Activity:z}}).Where(function(z){return"AsParallel"==z.Activity.Op}).Select(function(z){return z.Index}).FirstOrNull();return null==indexOfAsParallel?(lastLinearActivityDataSource=queryAnalysis.DataSources.Select(function(z){return z.LinearActivitySequence}).LastOrNull(),lastLinearActivityDataSource=queryAnalysis.LinearActivitySequence.Take(lastLinearActivityDataSource+1).Where(function(z){return null!=z.Op}).Count()+1,{Sync:queryAnalysis.Structure.Members.Take(lastLinearActivityDataSource).ToList(),Parallel:queryAnalysis.Structure.Members.Skip(lastLinearActivityDataSource).ToList(),CanPartition:1==queryAnalysis.DataSources.length&&(!(queryAnalysis.DataSources[0].Activity instanceof Function)||null!=queryAnalysis.Range&&0<=queryAnalysis.DataSources[0].Activity.toString().indexOf("Enumerable.Range")||0<=queryAnalysis.DataSources[0].Activity.toString().indexOf("ParallelQuery.Range")),CanNeverPartition:queryAnalysis.DataSources.Where(function(z){return z.Activity instanceof Function&&(null==queryAnalysis.Range||z.Activity.toString().indexOf("Enumerable.Range")<0&&z.Activity.toString().indexOf("AsyncEnumerable.Range")<0&&z.Activity.toString().indexOf("ParallelQuery.Range")<0)}).Any(),PostParallelActivities:[]}):(lastLinearActivityDataSource=queryAnalysis.DataSources.Where(function(z){return z.LinearActivitySequence<indexOfAsParallel}).ToList().length,{Sync:queryAnalysis.Structure.Members.TakeWhile(function(z){return"AsParallel"!=z.Op}).ToList(),Parallel:queryAnalysis.Structure.Members.SkipWhile(function(z){return"AsParallel"!=z.Op}).Where(function(z){return"AsParallel"!=z.Op}).ToList(),CanPartition:lastLinearActivityDataSource<=1&&(!queryAnalysis.IsGenerator||null!=queryAnalysis.Range),CanNeverPartition:queryAnalysis.DataSources.Take(lastLinearActivityDataSource).Where(function(z){return z.Activity instanceof Function&&(null==queryAnalysis.Range||z.Activity.toString().indexOf("Enumerable.Range")<0&&z.Activity.toString().indexOf("AsyncEnumerable.Range")<0&&z.Activity.toString().indexOf("ParallelQuery.Range")<0)}).Any(),PostParallelActivities:[]})})(queryAnalysis);return!(splitBetweenSyncAndParallel=(splitBetweenSyncAndParallel=>{var terminalOps,dangerousStatements,extractFirstOperation,count;return!splitBetweenSyncAndParallel.Parallel.Any()&&splitBetweenSyncAndParallel.CanNeverPartition||(terminalOps=["Any","FirsOrNull","LastOrNull","ToList"],dangerousStatements=["GroupBy","GroupByConsecutive"],0==(count=splitBetweenSyncAndParallel.Parallel.Where(function(z){return dangerousStatements.Contains(z.Op)}).Take(2).ToList().length))||1==count&&dangerousStatements.Contains(splitBetweenSyncAndParallel.Parallel.Where(function(z){return!terminalOps.Contains(z)}).Select(function(z){return z.Op}).LastOrNull())||(extractFirstOperation=function(inputFunc){inputFunc=inputFunc.toString().split(".");return 1==inputFunc.length?"":inputFunc[1].split("(")[0].split(" ")[0].trim()},null!=(count=splitBetweenSyncAndParallel.Parallel.GroupByConsecutive(function(z){return dangerousStatements.Contains(z.Op)}).SkipWhile(function(z){return 1!=z.Key}).Where(function(z){return 0==z.Key}).Select(function(z,i){return z.Select(function(w){return null!=w.Args&&w.Args.Any()&&("Where"!=w.Op||"Key"!=extractFirstOperation(w.Args[0]))?__assign(__assign({},w),{GroupIndex:i}):null}).Where(function(z){return null!=z}).Concat([{Op:"Select",Args:[function(x){return x}],GroupIndex:i}]).FirstOrNull()}).Where(function(z){return null!=z}).ToList().Where(function(z){return!("FirstOrNull"==z.Op||z.Args.Any()&&"Key"==extractFirstOperation(z.Args[0]))}).FirstOrNull())&&(count=splitBetweenSyncAndParallel.Parallel.Select(function(z,i){return{Index:i,Operation:z}}).Where(function(z){return dangerousStatements.Contains(z.Operation.Op)}).Skip(count.GroupIndex).Select(function(z){return z.Index}).FirstOrNull(),splitBetweenSyncAndParallel.PostParallelActivities=splitBetweenSyncAndParallel.Parallel.Skip(count).Select(function(z){return function(data){return data[z.Op].apply(data,z.Args)}}).ToList(),splitBetweenSyncAndParallel.Parallel=splitBetweenSyncAndParallel.Parallel.Take(count).ToList())),splitBetweenSyncAndParallel})(splitBetweenSyncAndParallel)).Parallel.Any()&&splitBetweenSyncAndParallel.CanNeverPartition?ExecuteSync(parallelQuery):!splitBetweenSyncAndParallel.CanPartition&&splitBetweenSyncAndParallel.CanNeverPartition?((syncEnumerableMembers,parallelEnumerableMembers,postParallelActivities)=>{function runTasks(){var availableThoughput=0==self.Accelatrix.Tasks.Config.MaxParallelism?1:self.Accelatrix.Tasks.Config.MaxParallelism-ongoingTasks.length;self.Accelatrix.Collections.Enumerable.Range(0,availableThoughput).Select(function(z){return source.Take(bufferLength).ToList()}).TakeWhile(function(z){return null!=z&&z.Any()}).Select(function(buffer){return new self.Accelatrix.Tasks.Task(function(rootEnumeration,actionRoster){return actionRoster.Execute(rootEnumeration)},buffer,null!=activities||(buffer=source.Any(),null!=activities)?activities:PackagedParallelActionSet.FromParallelMembers(parallelEnumerableMembers,buffer))}).ToList().ForEach(function(z){ongoingTasks.push(z),z.Start().Finally(function(t){if(ongoingTasks=ongoingTasks.Where(function(w){return w!=z}).ToList(),null!=t.Exception){ongoingTasks.ForEach(function(w){return w.Cancel()});try{source=[],null!=rejector&&rejector(t.Exception)}catch(ex){}finally{null!=finalizer&&finalizer(),onpartialResult=rejector=resolver=null,canceller.Cancel=function(){}}}else{results.push(t.Result);try{null!=onpartialResult&&onpartialResult(t.Result)}catch(ex){console.error(ex)}(source.Any()||0!=ongoingTasks.length?runTasks:resolveResult)()}})})}var activities,source=StructureToEnumeration(syncEnumerableMembers).Freeze(),bufferLength=MinMembersInPartition(parallelEnumerableMembers),ongoingTasks=[],resolver=null,rejector=function(ex){console.error(ex)},finalizer=null,onpartialResult=null,canceller={Cancel:function(ex){try{var myRejector=rejector;rejector=null,ongoingTasks.ForEach(function(z){return z.Cancel()}),source=[],null!=myRejector&&myRejector(new self.Accelatrix.Tasks.TaskAbortException)}catch(ex){}finally{ongoingTasks.ForEach(function(z){return z.Cancel()}),null!=finalizer&&finalizer(),onpartialResult=finalizer=resolver=rejector=null}}},resolveImmediatelly=!1,results=[],syncEnumerableMembers=new ParallelQueryStreamPromise(canceller,function(newResolver){resolver=newResolver,resolveImmediatelly&&resolveResult()},function(newRejector){return rejector=newRejector},function(newFinalizer){return finalizer=newFinalizer},function(newOnPartialResult){return onpartialResult=newOnPartialResult}),resolveResult=function(){try{var finalResult=results.SelectMany(function(z){return z});[null==activities?null:activities.PostParallelActivity].Concat(postParallelActivities).Where(function(z){return null!=z}).ToList().ForEach(function(z){return finalResult=z(finalResult)}),finalResult=finalResult.ToList(),null!=resolver&&(rejector=null,resolver(finalResult))}catch(ex){null!=rejector&&rejector(ex)}finally{null!=finalizer&&finalizer(),finalizer=rejector=resolver=null,canceller.Cancel=function(){},(onpartialResult=null)!=activities&&null!=activities.StatefulActivities&&activities.StatefulActivities.ForEach(function(z){return z.Dispose()}),activities=null}};return source.Any()?runTasks():resolveImmediatelly=!0,syncEnumerableMembers})(splitBetweenSyncAndParallel.Sync,splitBetweenSyncAndParallel.Parallel,splitBetweenSyncAndParallel.PostParallelActivities):(minMembersInPartition=MinMembersInPartition(splitBetweenSyncAndParallel.Parallel),(queryAnalysis=((parallelQueryDescriptor,syncEnumerableMembers,needsCommit,numberOfPartitions,minMembersInPartition)=>DoPartition(syncEnumerableMembers=needsCommit?{IsArray:!0,IsGenerator:!(needsCommit={$type:"Accelatrix.Collections.Enumerable",Members:[StructureToEnumeration(syncEnumerableMembers).ToList()]}),Range:null,Host:needsCommit.Members,Structure:needsCommit}:(needsCommit={$type:"Accelatrix.Collections.Enumerable",Members:syncEnumerableMembers},{IsArray:parallelQueryDescriptor.IsArray,IsGenerator:parallelQueryDescriptor.IsGenerator,Range:parallelQueryDescriptor.Range,Host:parallelQueryDescriptor.IsArray?needsCommit.Members:parallelQueryDescriptor.Host,Structure:needsCommit}),numberOfPartitions,minMembersInPartition))(queryAnalysis,splitBetweenSyncAndParallel.Sync,!splitBetweenSyncAndParallel.CanPartition,self.Accelatrix.Tasks.Config.MaxParallelism,minMembersInPartition)).Any()&&(minMembersInPartition=splitBetweenSyncAndParallel.Parallel).Any()?(1<queryAnalysis.length&&"Distinct"==minMembersInPartition.LastOrNull().Op&&minMembersInPartition.push({Op:"Select",Args:[function(z){return z}]}),activities=PackagedParallelActionSet.FromParallelMembers(minMembersInPartition,1<queryAnalysis.length),minMembersInPartition=queryAnalysis.Select(function(inputEnumeration){return new self.Accelatrix.Tasks.Task(function(rootEnumeration,actionRoster){return actionRoster.Execute(rootEnumeration)},inputEnumeration,activities)}).ToList(),queryAnalysis=new self.Accelatrix.Tasks.CombinedTask(minMembersInPartition),minMembersInPartition=[activities.PostParallelActivity].Concat(splitBetweenSyncAndParallel.PostParallelActivities).Where(function(z){return null!=z}).ToList(),new ParallelQueryPromise(queryAnalysis.Start(),queryAnalysis,activities.StatefulActivities,minMembersInPartition,null)):ExecuteSync(parallelQuery))}function ExecuteSync(parallelQuery){var enumeration=StructureToEnumeration(parallelQuery.toJSON().Members.Where(function(z){return"AsParallel"!=z.Op}).ToList()),resolver=null,rejector=function(ex){console.error(ex)},finalizer=null,onpartialResult=null,isDoing=!1,parallelQuery=new ParallelQueryStreamPromise({Cancel:function(){}},function(newResolver){resolver=newResolver,doer()},function(newRejector){return rejector=newRejector},function(newFinalizer){return finalizer=newFinalizer},function(newOnPartialResult){return onpartialResult=newOnPartialResult}),doer=function(){if(!isDoing){isDoing=!0;try{var result=enumeration.ToList();null!=onpartialResult&&onpartialResult(result),null!=resolver&&resolver(result)}catch(ex){null!=rejector&&rejector(ex)}finally{null!=finalizer&&finalizer(),onpartialResult=finalizer=resolver=rejector=null}}};return parallelQuery}function StructureToEnumeration(enumerationMembers){function unboxEnumerable(definition){var definition=definition.Members,isFunction=!(isEnumDefinition="Accelatrix.Collections.Enumerable"==definition[0].$type||"Accelatrix.Collections.AsyncEnumerable"==definition[0].$type||"Accelatrix.Collections.ParallelQuery"==definition[0].$type)&&definition[0].Op instanceof Function,isEnumDefinition=isEnumDefinition?unboxEnumerable(definition[0]):isFunction?definition[0].Op.apply(null,definition[0].Args):definition[0],result=isFunction?isEnumDefinition:new self.Accelatrix.Collections.Enumerable(isEnumDefinition);return definition.Skip(1).ForEach(function(z){return result=result[z.Op].apply(result,z.Args)}),result}return unboxEnumerable({$type:"Accelatrix.Collections.Enumerable",Members:enumerationMembers})}function DoPartition(enumerationRoot,numberOfPartitions,minMembersInPartition){var nonParallelComponent=enumerationRoot.Structure.Members;if(numberOfPartitions<=1||enumerationRoot.IsGenerator&&null==enumerationRoot.Range)return[StructureToEnumeration(nonParallelComponent)];for(var nonParallelComponent=enumerationRoot.IsArray?enumerationRoot.Host[0].length:enumerationRoot.Range.Count,numberOfItemsPerPartition=Math.ceil(nonParallelComponent/numberOfPartitions),outstandingCount=(numberOfItemsPerPartition<minMembersInPartition&&(numberOfItemsPerPartition=minMembersInPartition,1<(numberOfPartitions=Math.ceil(nonParallelComponent/numberOfItemsPerPartition)))&&(numberOfItemsPerPartition=Math.ceil(nonParallelComponent/numberOfPartitions)),nonParallelComponent),tranchNumber=-1,sourceData=enumerationRoot.IsArray?enumerationRoot.Host[0]:null,result=[];0<outstandingCount;){var countInThisPartition=0<=(outstandingCount-=numberOfItemsPerPartition)?numberOfItemsPerPartition:numberOfItemsPerPartition+outstandingCount;tranchNumber++,enumerationRoot.IsArray?enumerationRoot.Host[0]=sourceData.Skip(tranchNumber*numberOfItemsPerPartition).Take(countInThisPartition).ToList():(enumerationRoot.Host.Args[0]=enumerationRoot.Range.Start+tranchNumber*numberOfItemsPerPartition,enumerationRoot.Host.Args[1]=countInThisPartition);countInThisPartition=StructureToEnumeration(enumerationRoot.Structure.Members);enumerationRoot.IsArray?enumerationRoot.Host[0]=sourceData:(enumerationRoot.Host.Args[0]=enumerationRoot.Range.Start,enumerationRoot.Host.Args[1]=enumerationRoot.Range.Count),result.push(countInThisPartition)}return result}function MinMembersInPartition(parallelEnumerableMembers){return parallelEnumerableMembers.Where(function(z){return null!=z&&("Distinct"==z.Op||"Union"==z.Op)}).Any()?Math.ceil(MIN_MEMBERS_FOR_MULTIPLE_THREADS/4):parallelEnumerableMembers.Where(function(z){return null!=z&&("Except"==z.Op||"Intersect"==z.Op)}).Any()?Math.ceil(MIN_MEMBERS_FOR_MULTIPLE_THREADS/3):MIN_MEMBERS_FOR_MULTIPLE_THREADS}ParallelQuerySystem.Execute=Execute,(PackagedParallelActivityType=>{PackagedParallelActivityType[PackagedParallelActivityType.ParallelActivity=0]="ParallelActivity",PackagedParallelActivityType[PackagedParallelActivityType.LastParallelActivity=1]="LastParallelActivity",PackagedParallelActivityType[PackagedParallelActivityType.LastParallelActivityPostParallel=2]="LastParallelActivityPostParallel"})(PackagedParallelActivityType=PackagedParallelActivityType||{});var PackagedParallelActionSet=(()=>{function PackagedParallelActionSet(activities,statefulActivities,postParallelActivity){Object.defineProperty(this,"CanClone",{enumerable:!0,get:function(){return function(){return!1}}}),Object.defineProperty(this,"StatefulActivities",{enumerable:!1,get:function(){return statefulActivities}}),Object.defineProperty(this,"PostParallelActivity",{enumerable:!1,get:function(){return postParallelActivity}}),Object.defineProperty(this,"Activities",{enumerable:!0,get:function(){return activities}})}var PackagedParallelActionSet_1=PackagedParallelActionSet;return Object.defineProperty(PackagedParallelActionSet.prototype,"StatefulActivities",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(PackagedParallelActionSet.prototype,"Activities",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(PackagedParallelActionSet.prototype,"PostParallelActivity",{get:function(){return null},enumerable:!1,configurable:!0}),PackagedParallelActionSet.FromParallelMembers=function(parallelEnumerableMembers,isQueryPartitioned){var statefulActivities,activities;return isQueryPartitioned?(isQueryPartitioned=null==(isQueryPartitioned=parallelEnumerableMembers.Any()&&null!=PackagedParallelActionSet_1[parallelEnumerableMembers[parallelEnumerableMembers.length-1].Op]?PackagedParallelActionSet_1[parallelEnumerableMembers[parallelEnumerableMembers.length-1].Op](parallelEnumerableMembers[parallelEnumerableMembers.length-1].Args,statefulActivities,PackagedParallelActivityType.LastParallelActivityPostParallel):null)?null:PackagedParallelActionSet_1.UnpackActivities(isQueryPartitioned).FirstOrNull(),statefulActivities=[],activities=parallelEnumerableMembers.Select(function(z,i){return null==PackagedParallelActionSet_1[z.Op]?[z]:PackagedParallelActionSet_1[z.Op](z.Args,statefulActivities,i+1==parallelEnumerableMembers.length?PackagedParallelActivityType.LastParallelActivity:PackagedParallelActivityType.ParallelActivity)}).SelectMany(function(z){return z}).ToList(),new PackagedParallelActionSet_1(activities,statefulActivities,isQueryPartitioned)):new PackagedParallelActionSet_1(parallelEnumerableMembers,null,null)},PackagedParallelActionSet.prototype.Execute=function(rootEnumeration){function resolveResult(result,exception){try{null!=exception?null!=rejector&&rejector(exception):null!=resolver&&resolver(result)}catch(ex){}finally{null!=finalizer&&finalizer(),finalizer=rejector=resolver=null,canceller.Cancel=function(){}}}var resolver=null,rejector=function(ex){console.error(ex)},finalizer=null,canceller={Cancel:function(){}},isDoing=!1,myPromise=new ParallelQueryScalarPromise(canceller,function(newResolver){resolver=newResolver,isDoing||(isDoing=!0,WebWorkerUtil.WorkOnSequenceOfActivities(activities,[rootEnumeration],function(result,ex){resolveResult(result,ex)}))},function(newRejector){return rejector=newRejector},function(newFinalizer){return finalizer=newFinalizer}),activities=[function(data){return null==data?data:new self.Accelatrix.Collections.AsyncEnumerable(data)}].Concat(this.UnpackActivities()).Concat([function(data){return null==data||null==data.ToList?data:data.ToList()}]).Concat([function(data){return null==data||null==data.ToList?data:PackagedParallelActionSet_1.ResolveAsyncEnumerations(data)}]).ToList();return canceller.Cancel=function(){resolveResult(null,new self.Accelatrix.Tasks.TaskAbortException);activities.LastOrNull()},myPromise},PackagedParallelActionSet.ResolveAsyncEnumerations=function(collection){var promises;return null==collection||null==collection.ToList?collection:(promises=collection.Select(function(z){return{Element:z,IsPromise:self.Accelatrix.Async.IsPromise(z),IsEnumerable:null!=z&&"Enumerable"==z.constructor.name,IsAsyncEnumerable:null!=z&&"AsyncEnumerable"==z.constructor.name}}).Select(function(z){return{Element:!z.IsPromise&&(z.IsAsyncEnumerable||z.IsEnumerable)?z.Element.ToList():z.Element,IsPromise:z.IsPromise||z.IsAsyncEnumerable}}).ToList()).Where(function(z){return z.IsPromise}).Any()?self.Accelatrix.Async.CombineAll(promises.Where(function(z){return z.IsPromise}).Select(function(z){return z.Element}).ToList()).ContinueWith(function(z){var pendingResult=promises.Where(function(z){return z.IsPromise}).ToList(),z=(z.ForEach(function(w,i){return pendingResult[i].Element=w}),promises.Select(function(w){return w.Element}).Where(function(w){return!(void 0===w)}).ToList());return PackagedParallelActionSet_1.ResolveAsyncEnumerations(z)},!0):promises.Select(function(z){return z.Element}).Where(function(w){return!(void 0===w)}).ToList()},PackagedParallelActionSet.UnpackActivities=function(activities){return null==activities?[]:activities.Select(function(z){return z.Op instanceof Function?function(data){return z.Op.apply(data,[data].concat(z.Args))}:function(data){return data[z.Op].apply(data,z.Args)}}).ToList()},PackagedParallelActionSet.prototype.UnpackActivities=function(){return PackagedParallelActionSet_1.UnpackActivities(this.Activities)},PackagedParallelActionSet.Concat=function(args,statefulActivities,activityType){return activityType==PackagedParallelActivityType.LastParallelActivity?[{Op:"Select",Args:[function(z){return z}]}]:activityType==PackagedParallelActivityType.LastParallelActivityPostParallel?[{Op:"Concat",Args:args}]:(activityType=new self.Accelatrix.Tasks.StatefulActivity,statefulActivities.push(activityType),[{Op:function(data,concatData){return[data,concatData]},Args:args},{Op:activityType.PushAndEvaluate(function(){return 1},function(existing,current){return 0<existing.length?function(z){return z.FirstOrNull()}:function(z){return z.SelectMany(function(w){return w})}}),Args:args}])},PackagedParallelActionSet.Take=function(args,statefulActivities,activityType){return activityType==PackagedParallelActivityType.LastParallelActivity||activityType==PackagedParallelActivityType.LastParallelActivityPostParallel?[{Op:"Take",Args:args}]:(activityType=new self.Accelatrix.Tasks.StatefulActivity,statefulActivities.push(activityType),statefulActivities=new Function("existing","current","return new Function('data', 'return data[0].Concat(data[1]).Take("+args[0]+" - ' + existing.Sum() + ')')"),[{Op:function(data,takeCount){return data.Freeze().Take(takeCount).ToList().ContinueWith(function(r){return void 0===r?r:[r,data]})},Args:args},{Op:activityType.PushAndEvaluate(function(data){return data[0].length},statefulActivities),Args:args}])},PackagedParallelActionSet.Skip=function(args,statefulActivities,activityType){return activityType==PackagedParallelActivityType.LastParallelActivityPostParallel?null:(activityType=new self.Accelatrix.Tasks.StatefulActivity,statefulActivities.push(activityType),statefulActivities=new Function("existing","current","return new Function('data', 'return data[0].Concat(data[1]).Skip("+args[0]+" - ' + existing.Sum() + ')')"),[{Op:function(data,skipCount){return data.Freeze().Take(skipCount).ToList().ContinueWith(function(r){return void 0===r?r:[r,data]})},Args:args},{Op:activityType.PushAndEvaluate(function(data){return data[0].length},statefulActivities),Args:args}])},PackagedParallelActionSet.Distinct=function(args,statefulActivities,activityType){return activityType==PackagedParallelActivityType.LastParallelActivity||activityType==PackagedParallelActivityType.LastParallelActivityPostParallel?[{Op:"Distinct",Args:args}]:(activityType=new self.Accelatrix.Tasks.StatefulActivity,statefulActivities.push(activityType),statefulActivities=new Function("existing","current","return new Function('data', 'var hashes=[' + existing.SelectMany(function(z) { return z }).Distinct().Intersect(current).Distinct().ToList().join(',')  + ']; data.Take(1).ForEach(function(z) { return hashes.ForEach(w => z.RejectedHashes.push(w)) }); return data.Where(function(z) { return hashes.NotContains(z == null ? null : z.ElementHash) } ).Select(function(z) { return z.Element } )')"),[{Op:function(data,equalityComparer){var rejectedHashes=[];return data.Distinct(equalityComparer).Select(function(z){return{Element:z,ElementHash:null==z?null:z.GetHashCode(),RejectedHashes:rejectedHashes}}).Where(function(z){return z.RejectedHashes.NotContains(z.ElementHash)})},Args:args},{Op:activityType.StreamPushAndEvaluate(function(data){return data.Select(function(z){return z.ElementHash})},statefulActivities),Args:args}])},PackagedParallelActionSet.TakeWhileDistinct=function(args,statefulActivities,activityType){return activityType==PackagedParallelActivityType.LastParallelActivity?[{Op:"TakeWhileDistinct",Args:args}]:activityType==PackagedParallelActivityType.LastParallelActivityPostParallel?[{Op:"Distinct",Args:args}]:(statefulActivities=PackagedParallelActionSet_1.Distinct(args,statefulActivities,activityType),[{Op:"TakeWhileDistinct",Args:args}].Concat(statefulActivities))},PackagedParallelActionSet.Union=function(args,statefulActivities,activityType){return activityType==PackagedParallelActivityType.LastParallelActivity?[{Op:"Select",Args:[function(z){return z}]}]:activityType==PackagedParallelActivityType.LastParallelActivityPostParallel?[{Op:"Union",Args:args}]:(activityType=new self.Accelatrix.Tasks.StatefulActivity,statefulActivities.push(activityType),statefulActivities=new Function("existing","current","return new Function('data', 'var unionClaimed = ' + existing.Any() + ';var areTaken=' + JSON.stringify(existing.Concat(current).SelectMany(function(z) { return z }).Where(function(z) { return z.IsFirst }).Select(function(z) { return z.ElementHash }).Intersect(current.Select(function(z) { return z.ElementHash })).Distinct().ToList()) + ';return data.Select(function(z) { return ({ Element: z.Element, ElementHash: z.ElementHash, IsFirst: z.IsFirst, IsClaimedByFirst: z.IsClaimedByFirst != null ? z.IsClaimedByFirst : z.IsFirst || areTaken.Contains(z.ElementHash), UnionClaimed: unionClaimed }) }).ToList();')"),activityType=activityType.StreamPushAndEvaluate(function(data){return data.Where(function(z){return null==z.IsClaimedByFirst}).GroupBy(function(z){return z.ElementHash}).Select(function(z){return{ElementHash:z.Key,IsFirst:z.Where(function(w){return w.IsFirst}).Any()}})},statefulActivities),[{Op:function(data,sequence,statefulActivity){var unionClaimed=null,establishedElementOwnership=null;return statefulActivity(data.Select(function(z){return{Element:z,IsFirst:!0,T:self.__WebWorkerId__}}).Concat(sequence.Select(function(z){return{Element:z,IsFirst:!1,T:self.__WebWorkerId__}})).Select(function(z,i){var elementHash=null==z.Element?null:z.Element.GetHashCode();return{Element:z.Element,ElementHash:elementHash,IsFirst:z.IsFirst,IsClaimedByFirst:null==establishedElementOwnership?null:!0===unionClaimed||establishedElementOwnership.Where(function(w){return elementHash==w.ElementHash&&null!=w.IsClaimedByFirst}).Select(function(w){return w.IsClaimedByFirst}).FirstOrNull()}})).ContinueWith(function(elementOwnership){return establishedElementOwnership=new self.Accelatrix.Collections.Enumerable(elementOwnership).TakeWhile(function(w){return!self.Accelatrix.Async.IsPromise(w)}),new self.Accelatrix.Collections.AsyncEnumerable(elementOwnership).Select(function(z,i){return 0==i&&(unionClaimed=z.UnionClaimed),z}).Where(function(z){return z.IsFirst||!z.IsClaimedByFirst&&!1===unionClaimed}).Select(function(z){return z.Element})})},Args:[args[0],activityType]}])},PackagedParallelActionSet.GroupBy=function(args,statefulActivities,activityType){return activityType==PackagedParallelActivityType.LastParallelActivity?[{Op:"Select",Args:[function(z){return z}]}]:activityType==PackagedParallelActivityType.LastParallelActivityPostParallel?[{Op:"GroupBy",Args:args}]:(activityType=new self.Accelatrix.Tasks.StatefulActivity,statefulActivities.push(activityType),statefulActivities=activityType.StreamPushAndEvaluate(function(data){return data.Where(function(z){return null==z.IsMine}).Select(function(z){return z.KeyHash}).Distinct().Select(function(z){return{G:z,T:self.__WebWorkerId__}})},function(existing,current){existing=existing.SelectMany(function(z){return z}).Where(function(z){return null==z.Members}).Where(function(z){return current.Select(function(w){return w.G}).Contains(z.G)}).GroupBy(function(z){return z.G}).Where(function(z){return z.FirstOrNull().T!=current.FirstOrNull().T}).Select(function(z){return z.Key}).ToList();return new Function("return "+function(data){return data.Select(function(z){return{Key:z.Key,Element:z.Element,KeyHash:z.KeyHash,IsMine:"{0}".NotContains(z.KeyHash)}}).ToList()}.toString().replace("'{0}'",JSON.stringify(existing)))()}),[{Op:function(data,clause,groupStreamer){var establishedGroupOwnership=null;return groupStreamer(data.Select(function(z){var key=clause(z),keyHash=null==key?null:key.GetHashCode();return{Key:key,Element:z,KeyHash:keyHash,IsMine:null==establishedGroupOwnership?null:establishedGroupOwnership.Where(function(w){return keyHash==w.KeyHash}).Select(function(w){return w.IsMine}).FirstOrNull()}})).ContinueWith(function(groupOwnership){return establishedGroupOwnership=new self.Accelatrix.Collections.Enumerable(groupOwnership).TakeWhile(function(w){return!self.Accelatrix.Async.IsPromise(w)}),new self.Accelatrix.Collections.AsyncEnumerable(groupOwnership).Where(function(z){return z.IsMine}).GroupBy(function(z){return z.Key}).Select(function(z){var key=z.Key,z=new self.Accelatrix.Collections.AsyncEnumerable(z.Select(function(w){return w.Element}));return Object.defineProperty(z,"Key",{enumerable:!0,get:function(){return key}}),z})})},Args:[args[0],statefulActivities]}])},PackagedParallelActionSet.Except=function(args,statefulActivities,activityType){return activityType==PackagedParallelActivityType.LastParallelActivity?[{Op:"Select",Args:[function(z){return z}]}]:(PackagedParallelActivityType.LastParallelActivityPostParallel,[{Op:"Except",Args:args}])},PackagedParallelActionSet.Intersect=function(args,statefulActivities,activityType){return activityType==PackagedParallelActivityType.LastParallelActivity?[{Op:"Select",Args:[function(z){return z}]}]:(PackagedParallelActivityType.LastParallelActivityPostParallel,[{Op:"Intersect",Args:args}])},PackagedParallelActionSet.Interleave=function(args,statefulActivities,activityType){return activityType==PackagedParallelActivityType.LastParallelActivity?[{Op:"Select",Args:[function(z){return z}]}]:activityType==PackagedParallelActivityType.LastParallelActivityPostParallel?[{Op:"Interleave",Args:args}]:(activityType=new self.Accelatrix.Tasks.StatefulActivity,statefulActivities.push(activityType),statefulActivities=new Function("existing","current","return new Function('data', 'var totalTaken=' + existing.SelectMany(function(z) { return z}).Sum() + '; var myTake=' + current + ';return new Accelatrix.Collections.AsyncEnumerable(data.Select(function(z) { return z.Me})).Interleave(data.FirstOrNull().Sequence.Skip(totalTaken).Take(myTake))')"),[{Op:function(input,sequence){return input.Select(function(z){return{Me:z,Sequence:sequence}})},Args:args},{Op:activityType.StreamPushAndEvaluate(function(data){return data.length},statefulActivities),Args:args}])},PackagedParallelActionSet.Zip=function(args,statefulActivities,activityType){return activityType==PackagedParallelActivityType.LastParallelActivity?[{Op:"Select",Args:[function(z){return z}]}]:activityType==PackagedParallelActivityType.LastParallelActivityPostParallel?[{Op:"Zip",Args:args}]:(activityType=new self.Accelatrix.Tasks.StatefulActivity,statefulActivities.push(activityType),statefulActivities=new Function("existing","current","return new Function('data', 'var totalTaken=' + existing.SelectMany(function(z) { return z}).Sum() + '; var myTake=' + current + ';return new Accelatrix.Collections.AsyncEnumerable(data.Select(function(z) { return z.Me})).Zip(data.FirstOrNull().Sequence.Skip(totalTaken).Take(myTake))')"),[{Op:function(input,sequence){return input.Select(function(z){return{Me:z,Sequence:sequence}})},Args:args},{Op:activityType.StreamPushAndEvaluate(function(data){return data.length},statefulActivities),Args:args}])},PackagedParallelActionSet.OrderBy=function(args,statefulActivities,activityType){return[{Op:"OrderBy",Args:args}]},PackagedParallelActionSet.OrderByDescending=function(args,statefulActivities,activityType){return[{Op:"OrderByDescending",Args:args}]},PackagedParallelActionSet.Reverse=function(args,statefulActivities,activityType){return activityType==PackagedParallelActivityType.LastParallelActivityPostParallel?null:[{Op:"Reverse",Args:args}]},PackagedParallelActionSet_1=__decorate([self.Accelatrix.Serialization.KnownType("Accelatrix.Collections.ParallelQuery.PackagedParallelActionSet"),__metadata("design:paramtypes",[Array,Array,Object])],PackagedParallelActionSet)})();(()=>{function WaitingMembersPromise(statefulActivityId){Object.defineProperty(this,"StatefulActivityId",{enumerable:!0,get:function(){return statefulActivityId},set:function(value){return statefulActivityId=value}})}Object.defineProperty(WaitingMembersPromise.prototype,"StatefulActivityId",{get:function(){return null},enumerable:!1,configurable:!0}),__decorate([self.Accelatrix.Serialization.KnownType("Accelatrix.Collections.ParallelQuery.WaitingMembersPromise"),__metadata("design:paramtypes",[String])],WaitingMembersPromise)})()})(ParallelQuerySystem=ParallelQuerySystem||{}),Collections.ParallelQuery=ParallelQuerySystem.ParallelQuery,Object.defineProperty(Collections.ParallelQuery.prototype.constructor,"name",{get:function(){return"ParallelQuery"}})})(Accelatrix.Collections||(Accelatrix.Collections={}))})(Accelatrix=Accelatrix||{});if("object"==typeof module&&"object"==typeof module.exports)module.exports=Accelatrix;Accelatrix.__esModule=Accelatrix;Accelatrix.Accelatrix=Accelatrix;if(self==null){self={}};self["Accelatrix"]=Accelatrix;