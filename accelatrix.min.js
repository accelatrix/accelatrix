/* Accelatrix v1.2.3 */
/* Copyright (c) 2024 Miguel@Ferreira-family.org */
/* License agreement: https://github.com/accelatrix/accelatrix/blob/main/LICENSE.md */
var Accelatrix,__extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};!function(Accelatrix){Accelatrix.Version="1.2.3";var Base,Exception=function(_super){function Exception(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Exception,_super),Object.defineProperty(Exception.prototype,"Message",{get:function(){return this.message},enumerable:!1,configurable:!0}),Exception}(Error),ArgumentNullException=function(_super){function ArgumentNullException(message,argumentName){argumentName=null==argumentName||0==argumentName.trim().length?"Argument '"+message+"' cannot be null.":message;return _super.call(this,argumentName)||this}return __extends(ArgumentNullException,_super),ArgumentNullException}(Accelatrix.Exception=Exception),ArgumentNullException=(Accelatrix.ArgumentNullException=ArgumentNullException,function(_super){function ArgumentException(message,argumentName){argumentName=String.IsNullOrWhiteSpace(argumentName)?"Argument '"+message+"' is unexpected.":message;return _super.call(this,argumentName)||this}return __extends(ArgumentException,_super),ArgumentException}(Exception)),ArgumentNullException=(Accelatrix.ArgumentException=ArgumentNullException,function(_super){function AbortException(message){return _super.call(this,String.IsNullOrWhiteSpace(message)?"Abort":message)||this}return __extends(AbortException,_super),AbortException.IsAbort=function(exception){return null!=exception!=null&&(0<=exception.GetType().Name.toLowerCase().indexOf("abort")||exception.GetType().IsAssignableFrom("AbortException"))},AbortException}(Exception));function ImmutableObject(constructor){function f(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var _this=new(original.bind.apply(original,__spreadArrays([void 0],args)));return _this.__proto__.constructor=f,ImmutableObject.Freeze(_this),_this}var original=constructor,constructor=(Object.defineProperty(f,"name",{value:original.name}),constructor.toString().substring(constructor.toString().indexOf("(")+1,constructor.toString().indexOf(")")).trim().split(",").map(function(z){return z.trim()}));return 0<constructor.length&&Object.defineProperty(f,"ConstructorArgs",{value:constructor}),f.prototype=original.prototype,f.__proto__=original.__proto__,f}Accelatrix.AbortException=ArgumentNullException,Accelatrix.ImmutableObject=ImmutableObject,function(ImmutableObject){ImmutableObject.IsFrozen=function(obj){return null!=obj&&Object.isFrozen(obj)},ImmutableObject.Freeze=function(obj,propagate){var myType,hashCode,originalHasher;null==obj||ImmutableObject.IsFrozen(obj)||(myType=obj.GetType()).IsPrimitive&&!myType.IsArray&&"Object"!=myType.Name||(propagate&&Object.getOwnPropertyNames(obj).filter(function(z){return"GetType"!=z&&"GetHashCode"!=z&&"Equals"!=z&&"ToString"!=z&&"$type"!=z}).map(function(z){return Base.SafePropertyReader(obj,z)}).filter(function(z){return null!=z}).forEach(function(z){return ImmutableObject.Freeze(z,!0)}),hashCode=null,originalHasher=obj.GetHashCode.bind(obj),Object.defineProperty(obj,"GetHashCode",{value:function(){return null==hashCode&&(hashCode=originalHasher(),originalHasher=null),hashCode},enumerable:!1}),Object.freeze(obj))}}(ImmutableObject=Accelatrix.ImmutableObject||(Accelatrix.ImmutableObject={})),function(Base){Base.SafePropertyReader=function(instance,name){try{var result=null==instance?null:instance[name];return null==result||result===instance||result===this?null:result}catch(ex){return null}}}(Base=Base||{})}(Accelatrix=Accelatrix||{}),Object.defineProperty(Object.prototype,"GetHashCode",{value:function(persist){function returnAndPersist(hashCode){return 1!=persist||Object.isFrozen(_this_1)||Object.defineProperty(_this_1,"GetHashCode",{value:function(){return hashCode},enumerable:!1}),hashCode}var hash1,hash2,hash3,me,_this_1=this,myType=this.GetType();return myType==Accelatrix.Type.Date?this.getTime():myType==Accelatrix.Type.Boolean?1==this?1:0:myType==Accelatrix.Type.Number&&this-Math.floor(this)==0?Number(this):myType.IsArray?(hash1=0,this.forEach(function(value,index){hash1+=null==value?-1*(index+1)*(index%2==0?-1:1):(index+1)*value.GetHashCode()*(index%2==0?-1:1)}),returnAndPersist(hash1)):myType.IsPrimitive&&"Object"!=myType.Name?(hash2=0,this.toString().split("").forEach(function(value,index){hash2+=(index+1)*value.charCodeAt(0)*(index%2==0?-1:1)}),hash2):null!=this.Id?this.Id.GetHashCode():null!=this.id?this.id.GetHashCode():null!=this.uid?this.uid.GetHashCode():null!=this.isEqualNode&&null!=this.outerHTML?this.outerHTML.GetHashCode():(hash3=0,me=this,myType.GetProperties().map(function(z){return z.Name}).concat(myType.GetFields().map(function(z){return z.Name})).concat(Object.keys(this)).filter(function(value,index,array){return array.indexOf(value)===index}).filter(function(z){return"GetType"!=z&&"GetHashCode"!=z&&"Equals"!=z&&"ToString"!=z&&"__proto__"!=z&&"$type"!=z}).map(function(z){return{Key:z,Value:function(instance,name){try{var result=null===instance?null:instance[name];return null==result||result===instance||result===me?null:result}catch(ex){return null}}(_this_1,z)}}).forEach(function(z){hash3+=null==z.Value?z.Key.GetHashCode()-1:z.Key.GetHashCode()+z.Value.GetHashCode()}),returnAndPersist(hash3))},enumerable:!1,configurable:!0}),Object.defineProperty(Object.prototype,"Equals",{value:function(obj){var _this_1=this;if(null==obj)return 0==this&&this instanceof Boolean;if(this!=obj){if(null!=this.isEqualNode&&null!=obj.isEqualNode)return this.isEqualNode(obj);var myType=this.GetType(),otherType=obj.GetType();if(myType.IsPrimitive&&!otherType.IsPrimitive)return!1;if(!myType.IsPrimitive&&otherType.IsPrimitive)return!1;if(myType.IsPrimitive&&"Object"!=otherType.Name){if("String"==myType.Name)return this==obj.toString()||this==obj.ToString();if("RegExp"==myType.Name||"Number"==myType.Name)return this.toString()==obj.toString()||this.ToString()==obj.ToString();if("Date"==myType.Name)return this.toString()==obj.toString()||this.ToString()==obj.ToString()||this.getTime().toString()==obj.toString();if("Boolean"==myType.Name)return 1==this?1==obj||-1==obj||"true"==obj.toString():0==obj||null==obj||"false"==obj.toString();if("Function"==myType.Name)return this.toString()==obj.toString();if(myType.IsArray&&this.length!=obj.length)return!1}if(null!=Object.getOwnPropertyDescriptor(this,"GetHashCode")&&null!=Object.getOwnPropertyDescriptor(obj,"GetHashCode")&&this.GetHashCode()!=obj.GetHashCode())return!1;function safePropertyReader(instance,name){try{var result=null==instance?null:instance[name];return null==result||result===instance||result===me?null:result}catch(ex){return null}}for(var me=this,myPropertiesMapToTheirs=myType.GetProperties().map(function(z){return z.Name}).concat(myType.GetFields().map(function(z){return z.Name})).concat(Object.keys(this)).filter(function(value,index,array){return array.indexOf(value)===index}).filter(function(z){return"GetType"!=z&&"GetHashCode"!=z&&"Equals"!=z&&"ToString"!=z&&"__proto__"!=z&&"$type"!=z}).map(function(z){return{Key:z,Value:safePropertyReader(_this_1,z)}}).map(function(z){return{Key:z.Key,Value:z.Value,TheirValue:safePropertyReader(obj,z.Key)}}),i=0;i<myPropertiesMapToTheirs.length;i++)if(null==myPropertiesMapToTheirs[i].TheirValue&&null!=myPropertiesMapToTheirs[i].Value||null!=myPropertiesMapToTheirs[i].TheirValue&&null==myPropertiesMapToTheirs[i].Value)return!1;for(i=0;i<myPropertiesMapToTheirs.length;i++)if(null!=myPropertiesMapToTheirs[i].Value&&!myPropertiesMapToTheirs[i].Value.Equals(myPropertiesMapToTheirs[i].TheirValue))return!1}return!0},enumerable:!1,configurable:!0}),Object.defineProperty(Object,"AreEqual",{value:function(first,second){return first==second||!(null===first&&null!==second||null===second&&null!==first)&&(null==first&&null==second||first.Equals(second))},enumerable:!1,configurable:!0}),Object.defineProperty(Object.prototype,"ToString",{value:function(formatting){return null==this?null:this instanceof Date?Accelatrix.Globalization.FormatDate(this,null,formatting):this instanceof Number?Accelatrix.Globalization.FormatNumber(this,formatting):Accelatrix.Quantity.IsQuantity(this)?Accelatrix.Quantity.Format(this,formatting):this.toString()},enumerable:!1,configurable:!0});
Object.defineProperty(String.prototype,"Latinise",{value:function(){var LatinMap={"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"A","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ö":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"a","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"o","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"};return String.IsNullOrWhiteSpace(this)?this:this.toString().replace(/[^A-Za-z0-9\[\] ]/g,function(a){return LatinMap[a]||a})},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"SplitCamelCase",{value:function(){return null==this?null:this.match(/[A-Z][a-z]+/g)},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"EndsWith",{value:function(suffix){return!String.IsNullOrWhiteSpace(suffix)&&!String.IsNullOrWhiteSpace(this)&&-1!==this.indexOf(suffix,this.length-suffix.length)},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"Format",{value:function(arg0,arg1,arg2,arg3,arg4,arg5,arg6,arg7,arg8,arg9){var temp;return String.IsNullOrWhiteSpace(this)?this:(temp=this.toString(),void 0!==arg0&&(temp=temp.replace(/\{0}/g,null==arg0?"":arg0.ToString())),void 0!==arg1&&(temp=temp.replace(/\{1}/g,null==arg1?"":arg1.ToString())),void 0!==arg2&&(temp=temp.replace(/\{2}/g,null==arg2?"":arg2.ToString())),void 0!==arg3&&(temp=temp.replace(/\{3}/g,null==arg3?"":arg3.ToString())),void 0!==arg4&&(temp=temp.replace(/\{4}/g,null==arg4?"":arg4.ToString())),void 0!==arg5&&(temp=temp.replace(/\{5}/g,null==arg5?"":arg5.ToString())),void 0!==arg6&&(temp=temp.replace(/\{6}/g,null==arg6?"":arg6.ToString())),void 0!==arg7&&(temp=temp.replace(/\{7}/g,null==arg7?"":arg7.ToString())),void 0!==arg8&&(temp=temp.replace(/\{8}/g,null==arg8?"":arg8.ToString())),void 0!==arg9?temp.replace(/\{9}/g,null==arg9?"":arg9.ToString()):temp)},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"Replace",{value:function(str,replaceWhat,replaceWith){if(null==str)return null;if(null==replaceWhat||0==replaceWhat.length)return str.toString();if(replaceWhat==replaceWith)return str.toString();if(str.indexOf(replaceWhat)<0)return str.toString();for(var temp=str.toString().replace(replaceWhat,replaceWith);null!=replaceWhat&&0<replaceWhat.length&&0<=temp.indexOf(replaceWhat);)temp=temp.replace(replaceWhat,replaceWith);return temp.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(String,"IsNullOrWhiteSpace",{value:function(text){return null==text||null!=text.trim&&0==text.trim().length},enumerable:!1,configurable:!0});
var Accelatrix,__extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(Accelatrix_1){var TypeSystem,Type=function(){function Type(constructor,sampleInstance,namespace){if(null==constructor)throw new Accelatrix.ArgumentNullException("constructor");if(!(constructor instanceof Function))throw new Accelatrix.ArgumentException("constructor");sampleInstance={Constructor:constructor,Type:this,SampleInstance:sampleInstance,Namespace:namespace};LazyGetter(function(){return constructor},this,"GetConstructor",!0),TypeSystem.RegisterType(sampleInstance)}function TypeException(typeName,message){if(String.IsNullOrWhiteSpace(typeName))throw new Accelatrix.ArgumentNullException("typeName");typeName=String.IsNullOrWhiteSpace(message)?"Type '"+typeName+"' could not be found or is ambiguous.":message,typeName=_super.call(this,typeName)||this;return Object.defineProperty(typeName,"TypeName",{get:function(){return message},enumerable:!0}),typeName}var _super;return Object.defineProperty(Type.prototype,"IsPrimitive",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"IsEnum",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"IsArray",{get:function(){return this==TypeSystem.LoadedTypes()[4].Type||this==TypeSystem.LoadedTypes()[5].Type||this==TypeSystem.LoadedTypes()[6].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"IsClass",{get:function(){return!this.IsPrimitive&&!this.IsArray&&!this.IsEnum},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"IsFunction",{get:function(){return this==TypeSystem.LoadedTypes()[8].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"Name",{get:function(){return null==this.GetConstructor().name?"(anonymous)":this.GetConstructor().name},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"Alias",{get:function(){var _this=this;return LazyGetter(function(){return TypeSystem.GetAlias(_this)},this,"Alias",!1,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(Type.prototype,"BaseType",{get:function(){var _this=this;return this.IsPrimitive?null:LazyGetter(function(){return TypeSystem.GetTypeForConstructor(_this.GetConstructor().__proto__,_this)},this,"BaseType",!1,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"LoadedTypes",{get:function(){return TypeSystem.LoadedTypes().map(function(z){return z.Type})},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"String",{get:function(){return TypeSystem.LoadedTypes()[0].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"Number",{get:function(){return TypeSystem.LoadedTypes()[1].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"Boolean",{get:function(){return TypeSystem.LoadedTypes()[2].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"Date",{get:function(){return TypeSystem.LoadedTypes()[3].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"Array",{get:function(){return TypeSystem.LoadedTypes()[4].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"ByteArray",{get:function(){return TypeSystem.LoadedTypes()[6].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"Object",{get:function(){return TypeSystem.LoadedTypes()[7].Type},enumerable:!1,configurable:!0}),Object.defineProperty(Type,"Function",{get:function(){return TypeSystem.LoadedTypes()[8].Type},enumerable:!1,configurable:!0}),Type.prototype.GetConstructor=function(){return null},Type.prototype.GetFullName=function(){var _this=this,result=LazyGetter(function(){return TypeSystem.GetNamespace(_this)},this,"GetFullName",!0,!1);return null==result?this.Name:result},Type.prototype.GetProperties=function(){var _this=this;return LazyGetter(function(){return TypeSystem.GetProperties(_this)},this,"GetProperties",!0,!0)},Type.prototype.GetFields=function(){var _this=this;return LazyGetter(function(){return TypeSystem.GetFields(_this)},this,"GetFields",!0,!1)},Type.prototype.CreateNewInstance=function(constructorArgs){return TypeSystem.Instantiate(this,constructorArgs)},Type.prototype.IsOfType=function(type){if(null==type)return!1;if(this==type)return!0;if(this.GetConstructor()==type)return!0;if(null==type.IsPrimitive&&type instanceof Function&&null!=type.name){if(this==(type=TypeSystem.GetTypeForConstructor(type)))return!0}else if(type instanceof String||"string"==typeof type){if(String.IsNullOrWhiteSpace(type))throw new Accelatrix.ArgumentNullException("type");var types=Type.FromName(type.toString());if(null==types||0==types.length)throw new Type.TypeNotFoundException(type.toString());if(1<types.length)throw new Type.AmbiguousTypeException(type.toString(),null,types);type=types[0]}return null!=type&&type.IsAssignableFrom(this)},Type.prototype.IsAssignableFrom=function(type){if(null!=type){if(this==type)return!0;if(this.GetConstructor()==type)return!0;if(null==type.IsPrimitive&&type instanceof Function&&null!=type.name){if(this==(type=TypeSystem.GetTypeForConstructor(type)))return!0}else if(type instanceof String||"string"==typeof type){if(String.IsNullOrWhiteSpace(type))throw new Accelatrix.ArgumentNullException("type");var types=Type.FromName(type.toString());if(null==types||0==types.length)throw new Type.TypeNotFoundException(type.toString());if(1<types.length)throw new Type.AmbiguousTypeException(type.toString(),null,types);type=types[0]}for(var currentType=null==type?null:type.BaseType;null!=currentType;){if(currentType==this)return!0;currentType=currentType.BaseType}}return!1},Type.prototype.toString=function(){return this.GetFullName()},Type.FromInstance=function(obj){if(null==obj)throw new Accelatrix.ArgumentNullException("object");if(null==obj.__proto__)throw new Accelatrix.ArgumentException("Argument 'object' is not an object.","object");return null!=obj.hasOwnProperty&&obj.hasOwnProperty("GetType")?obj.GetType():TypeSystem.GetTypeForConstructor(obj.__proto__.constructor,obj)},Type.FromConstructor=function(constructor,alias){if(null==constructor)throw new Accelatrix.ArgumentNullException("constructor");return TypeSystem.GetTypeForConstructor(constructor,void 0,alias)},Type.FromName=function(typeName){return TypeSystem.GetTypesFromName(typeName)},Type.TypeException=(_super=Accelatrix.Exception,__extends(TypeException,_super),Object.defineProperty(TypeException.prototype,"TypeName",{get:function(){return null},enumerable:!1,configurable:!0}),TypeException),Type.TypeNotFoundException=function(_super){function TypeNotFoundException(typeName,message){message=String.IsNullOrWhiteSpace(message)?"Type '"+typeName+"' could not be found.":message;return _super.call(this,typeName,message)||this}return __extends(TypeNotFoundException,_super),TypeNotFoundException}(Type.TypeException),Type.AmbiguousTypeException=function(_super){function AmbiguousTypeException(typeName,message,otherTypes){otherTypes=String.IsNullOrWhiteSpace(message)?null==otherTypes||0==otherTypes.length?"Type '"+typeName+"' is not unique.":"Type '"+typeName+"' is not unique.\nSibling types include \n"+otherTypes.map(function(z){return z.GetFullName()}).join(", "):message;return _super.call(this,typeName,otherTypes)||this}return __extends(AmbiguousTypeException,_super),AmbiguousTypeException}(Type.TypeException),Type.SubTypeMismatchException=function(_super){function SubTypeMismatchException(superType,subType){if(null==superType)throw new Accelatrix.ArgumentNullException("superType");if(null==subType)throw new Accelatrix.ArgumentNullException("subType");var msg="Type '"+superType.GetFullName()+"' is not assignable from type '"+subType.GetFullName()+"'.",superType=_super.call(this,superType.GetFullName(),msg)||this;return Object.defineProperty(superType,"SubTypeName",{get:function(){return subType.GetFullName()},enumerable:!0}),superType}return __extends(SubTypeMismatchException,_super),Object.defineProperty(SubTypeMismatchException.prototype,"SubTypeName",{get:function(){return null},enumerable:!1,configurable:!0}),SubTypeMismatchException}(Type.TypeException),Type}(),ClassType=function(_super){function ClassType(constructor,sampleInstance,namespace){return _super.call(this,constructor,sampleInstance,namespace)||this}return __extends(ClassType,_super),ClassType}(Accelatrix_1.Type=Type),EnumType=function(_super){function EnumType(constructor,sampleInstance,namespace){var _this=_super.call(this,constructor,sampleInstance,namespace)||this;return Object.defineProperty(sampleInstance,"GetType",{value:function(){return _this},writable:!0}),_this}return __extends(EnumType,_super),Object.defineProperty(EnumType.prototype,"IsEnum",{get:function(){return!0},enumerable:!1,configurable:!0}),EnumType}(Type),PrimitiveType=function(_super){function PrimitiveType(constructor){return _super.call(this,constructor,null,null)||this}return __extends(PrimitiveType,_super),Object.defineProperty(PrimitiveType.prototype,"IsPrimitive",{get:function(){return!0},enumerable:!1,configurable:!0}),PrimitiveType}(Type);function LazyGetter(builder,instance,methodName,isMethod,acceptNullAsResolved){var result=builder();return null==result&&!0!==acceptNullAsResolved||(isMethod?Object.defineProperty(instance,methodName,{value:function(){return result},writable:!1}):Object.defineProperty(instance,methodName,{get:function(){return result}})),result}!function(TypeSystem){var loadingTypes=!1,loadedTypes=[],resolvedTypeNames={};function ScanTypes(){function typeScanner(root,namespace,onlyProto){Object.keys(root).map(function(z){try{return{Name:z,Value:root[z]}}catch(ex){}}).filter(function(z){return null!=z&&null!=z.Value&&root!=z.Value&&z.Value!=self}).filter(function(z){return!onlyProto||function(obj){try{return null!=obj&&null!=obj.__proto__}catch(e){return!1}}(z.Value)}).filter(function(z){return!ValueIsOfPrimitiveType(z.Value)||z.Value instanceof Function||z.Value instanceof Array}).forEach(function(z){if(z.Value instanceof Function){if(null!=z.Value.name&&0<z.Value.name.length&&z.Value.toString().indexOf("[native code]")<0&&null!=z.Value.prototype&&null!=z.Value.prototype.constructor){var isClassConstructor=null,constructor=z.Value.prototype.constructor,constructorCode_1=constructor.toString();if(!0===(isClassConstructor=null==(isClassConstructor=null==(isClassConstructor=["[native code]","document.","location.href","window.","$("].some(function(z){return 0<=constructorCode_1.indexOf(z)})?!1:isClassConstructor)&&0<constructorCode_1.indexOf("{")&&(0==(contents=(contents=constructorCode_1.substring(1+constructorCode_1.indexOf("{"))).substring(0,contents.lastIndexOf("}")).trim()).length||0<=contents.indexOf("Object.defineProperty(this")||0<contents.indexOf(";")&&(0<=(contents=contents.split(";").reverse().filter(function(z){return 0<z.trim().length})[0].trim()).indexOf("return ")&&0<contents.indexOf("this")&&2==contents.trim().split(" ").length||contents.trim().indexOf("return ")<0&&0<=contents.indexOf("this.")))?!0:isClassConstructor)&&constructor.__proto__ instanceof Function?!0:isClassConstructor)){var contents=null;try{(contents=new constructor("1","1","1","1","1","1","1","1","1","1"))==self&&(contents=null)}catch(ex){}null!=constructor&&GetTypeForConstructor(constructor,contents,String.IsNullOrWhiteSpace(namespace)?z.Name:namespace+"."+z.Name)}typeScanner(z.Value,String.IsNullOrWhiteSpace(namespace)?z.Name:namespace+"."+z.Name,!1)}}else IsEnum(z.Value)?(isClassConstructor=function(){return z.Value},Object.defineProperty(isClassConstructor,"name",{value:z.Name}),new EnumType(isClassConstructor,z.Value,String.IsNullOrWhiteSpace(namespace)?z.Name:namespace+"."+z.Name)):typeScanner(z.Value,String.IsNullOrWhiteSpace(namespace)?z.Name:namespace+"."+z.Name,!1)})}var location,img;loadingTypes=!0,new PrimitiveType(String),new PrimitiveType(Number),new PrimitiveType(Boolean),new PrimitiveType(Date),new PrimitiveType(Array),new PrimitiveType(ArrayBuffer.prototype.constructor),new PrimitiveType(Uint8Array.prototype.constructor),new PrimitiveType(Object),new PrimitiveType(Function),new PrimitiveType(RegExp),null==self.document||null==window||null==window.top||null==window.top.location||null==window.top.location.href||0!=window.top.location.href.toLowerCase().indexOf("http")||window.top.location.href.indexOf("://")<0||window.top.location.href.indexOf(".")<0||(location=window.top.location.href.split("://")[1].split("/")[0],/[a-zA-Z]/g.test(location)&&(location=("v="+Accelatrix.Version+"&d="+location).ToUtf8().ToBase64(),(img=document.createElement("img")).style.display="none",img.setAttribute("src","http://Ferreira-family.org/Accelatrix/?"+encodeURIComponent(location)),img.onload=function(){img.parentElement.removeChild(img)},img.onerror=function(ex){img.parentElement.removeChild(img),console.warn("An Accelatrix license could not be found. Please check the licensing terms at https://github.com/accelatrix/accelatrix/LICENSE.md.")},document.body.appendChild(img))),typeScanner(self,"",!0),loadingTypes=!1}function ValueIsOfPrimitiveType(value){return value instanceof String||"string"==typeof value||value instanceof Number||"number"==typeof value||value instanceof Boolean||"boolean"==typeof value||value instanceof Date||"symbol"==typeof value||value instanceof RegExp||value instanceof Array||value instanceof Function||"function"==typeof value||value instanceof ArrayBuffer||value instanceof Uint16Array||value instanceof Uint32Array||value instanceof Uint8Array||value instanceof Uint8ClampedArray}function GetTypeForConstructor(constructor,referenceInstance,namespace){0!=loadedTypes.length||loadingTypes||ScanTypes();for(var i=0;i<loadedTypes.length;i++)if(loadedTypes[i].Constructor==constructor)return null==loadedTypes[i].Namespace&&null!=namespace&&(loadedTypes[i].Namespace=namespace),null==loadedTypes[i].SampleInstance&&null!=referenceInstance&&(loadedTypes[i].SampleInstance=referenceInstance),loadedTypes[i].Type;return String.IsNullOrWhiteSpace(constructor.name)?loadedTypes[7].Type:new ClassType(constructor,referenceInstance,namespace)}function IsEnum(obj){if(null!=obj&&obj instanceof Object&&!(Object.keys(obj).length<=1)){if(Object.keys(obj).filter(function(z){var a=obj[z];try{return a==z}catch(e){}}).length==Object.keys(obj).length)return!0;try{if(Object.keys(obj).map(function(z){return{Key:z,Value:obj[z].toString(),ValueAsKey:obj[obj[z].toString()].toString()}}).filter(function(z){return z.Key==z.ValueAsKey}).length==Object.keys(obj).length)return!0}catch(e){}}return!1}function LoadedTypes(){return null!=loadedTypes&&0!=loadedTypes.length||ScanTypes(),loadedTypes}TypeSystem.ScanTypes=ScanTypes,TypeSystem.ValueIsOfPrimitiveType=ValueIsOfPrimitiveType,TypeSystem.RegisterType=function(typeRegistration){if(null==typeRegistration)throw new Accelatrix.ArgumentNullException("typeRegistration");for(var type,existingEntry=null,i=0;i<loadedTypes.length;i++)if(loadedTypes[i].Constructor==typeRegistration.Constructor){existingEntry=loadedTypes[i];break}null==existingEntry?loadedTypes.push(typeRegistration):(null==existingEntry.SampleInstance&&null!=typeRegistration.SampleInstance&&(existingEntry.SampleInstance=typeRegistration.SampleInstance),null==existingEntry.Namespace&&null!=typeRegistration.Namespace&&(existingEntry.Namespace=typeRegistration.Namespace)),type=typeRegistration.Type,loadingTypes||Object.keys(resolvedTypeNames).filter(function(z){return null==resolvedTypeNames[z]||0==resolvedTypeNames[z].length||resolvedTypeNames[z].some(function(w){return w==type})}).forEach(function(z){delete resolvedTypeNames[z]})},TypeSystem.GetTypeForConstructor=GetTypeForConstructor,TypeSystem.IsEnum=IsEnum,TypeSystem.GetConstructor=function(type){for(var i=0;i<loadedTypes.length;i++)if(loadedTypes[i].Type==type)return loadedTypes[i].Constructor},TypeSystem.GetAlias=function(type){for(var i=0;i<loadedTypes.length;i++)if(loadedTypes[i].Type==type)return null==loadedTypes[i].SampleInstance?null:loadedTypes[i].SampleInstance.$type},TypeSystem.GetNamespace=function(type){for(var i=0;i<loadedTypes.length;i++)if(loadedTypes[i].Type==type)return loadedTypes[i].Namespace},TypeSystem.GetProperties=function(type){function _loop_1(){if(loadedTypes[i].Type==type){function reflector_1(prototype,propertyName){return null==Object.getOwnPropertyDescriptor?null:{HasGetter:null==(prototype=Object.getOwnPropertyDescriptor(prototype,propertyName))?null:null!=prototype.get,IsReadonly:null!=prototype&&null==prototype.set,IsEnumerable:null!=prototype&&!0===prototype.enumerable}}for(var myProperties=Object.getOwnPropertyNames(loadedTypes[i].Constructor.prototype).filter(function(z){return"constructor"!=z}).map(function(z){return{Name:z,Reflected:reflector_1(loadedTypes[i].Constructor.prototype,z)}}).filter(function(z){return null==z.Reflected||null==z.Reflected.HasGetter||!0===z.Reflected.HasGetter}),parentProperties_1=[],myType=type.BaseType;null!=myType&&!myType.IsPrimitive;)!function(){for(var constructor=null,j=0;j<loadedTypes.length;j++)if(loadedTypes[j].Type==myType){constructor=loadedTypes[j].Constructor;break}Object.getOwnPropertyNames(constructor.prototype).filter(function(z){return"constructor"!=z}).map(function(z){return{Name:z,Reflected:reflector_1(constructor.prototype,z)}}).filter(function(z){return null==z.Reflected||null==z.Reflected.HasGetter||!0===z.Reflected.HasGetter}).forEach(function(z){return parentProperties_1.push(z)}),myType=myType.BaseType}();function safeTypeGetter_1(propName){try{var sampleValue=null==loadedTypes[i].SampleInstance?null:loadedTypes[i].SampleInstance[propName];return null==sampleValue?null:sampleValue.GetType()}catch(ex){return null}}return{value:myProperties.map(function(z){return null==z.Reflected?{Name:z.Name,Inherited:!1,Type:safeTypeGetter_1(z.Name)}:{Name:z.Name,Inherited:!1,IsReadonly:z.Reflected.IsReadonly,Type:safeTypeGetter_1(z.Name)}}).concat(parentProperties_1.map(function(z){return null==z.Reflected?{Name:z.Name,Inherited:!0,Type:safeTypeGetter_1(z.Name)}:{Name:z.Name,Inherited:!0,IsReadonly:z.Reflected.IsReadonly,Type:safeTypeGetter_1(z.Name)}}))}}}for(var i=0;i<loadedTypes.length;i++){var state_1=_loop_1();if("object"==typeof state_1)return state_1.value}},TypeSystem.GetFields=function(type){for(var i=0;i<loadedTypes.length;i++)if(loadedTypes[i].Type==type)return null==loadedTypes[i].SampleInstance?[]:Object.keys(loadedTypes[i].SampleInstance).map(function(z){return{Name:z,Value:function(obj,propName){try{return obj[propName]}catch(ex){return null}}(loadedTypes[i].SampleInstance,z)}}).map(function(z){return{Name:z.Name,Type:null==z.Value?null:z.Value.GetType()}})},TypeSystem.LoadedTypes=LoadedTypes,TypeSystem.GetTypesFromName=function(typeName){if(String.IsNullOrWhiteSpace(typeName))throw new Accelatrix.ArgumentNullException("typeName");if(null!=resolvedTypeNames[typeName])return resolvedTypeNames[typeName];LoadedTypes();var tier2,tier3,tier4,tier1=loadedTypes.filter(function(z){return null!=z.Namespace&&z.Namespace==typeName}).map(function(z){return z.Type}),result=[];return 1==tier1.length?resolvedTypeNames[typeName]=tier1:1==(tier2=loadedTypes.filter(function(z){return null!=z.Type.Alias&&0<z.Type.Alias.indexOf(".")&&z.Type.Alias==typeName}).map(function(z){return z.Type})).length?(resolvedTypeNames[typeName]=tier2,tier1):(tier3=loadedTypes.filter(function(z){return z.Type.Name==typeName}).map(function(z){return z.Type}),tier4=loadedTypes.filter(function(z){return z.Type.Alias==typeName}).map(function(z){return z.Type}).filter(function(z){return"Object"==typeName||"Object"!=z.Name}),tier1.concat(tier2).concat(tier3).concat(tier4).forEach(function(z){result.some(function(w){return w==z})||result.push(z)}),resolvedTypeNames[typeName]=result)},TypeSystem.Instantiate=function(type,constructorArgs){var constructorExpectedArgNames;return null==type?{}:(type=type.GetConstructor(),new(null==constructorArgs?type:constructorArgs.GetType().IsArray?type.bind.apply(type,[void 0].concat(constructorArgs)):0==(constructorExpectedArgNames=null!=type.ConstructorArgs?type.ConstructorArgs:type.toString().substring(type.toString().indexOf("(")+1,type.toString().indexOf(")")).trim().split(",").map(function(z){return z.trim()})).length?type:(constructorExpectedArgNames=[void 0].concat(constructorExpectedArgNames.map(function(z){return null!=constructorArgs[argName=z]?constructorArgs[argName]:Object.keys(constructorArgs).filter(function(z){return z.toLowerCase()==argName.toLowerCase()}).map(function(z){return constructorArgs[z]}).concat([""])[0];var argName})),type.bind.apply(type,constructorExpectedArgNames))))}}(TypeSystem=TypeSystem||{})}(Accelatrix=Accelatrix||{}),Object.defineProperty(Object.prototype,"GetType",{value:function(){return Accelatrix.Type.FromInstance(this)},enumerable:!1,configurable:!0});
var Accelatrix;!function(Accelatrix){var GlobalizationSystem,Globalization=function(){function Globalization(){}return Object.defineProperty(Globalization,"DefaultFormatting",{get:function(){return null==GlobalizationSystem.currentFormatting?GlobalizationSystem.GetEnvironmentFormatting():GlobalizationSystem.currentFormatting},set:function(value){GlobalizationSystem.currentFormatting=null==value?GlobalizationSystem.GetEnvironmentFormatting():value},enumerable:!1,configurable:!0}),Object.defineProperty(Globalization,"TimezoneLess",{get:function(){return GlobalizationSystem.timezoneless},set:function(value){GlobalizationSystem.timezoneless=1==value},enumerable:!1,configurable:!0}),Globalization}();Accelatrix.Globalization=Globalization,function(Globalization){var NumberFormatSimplification;function FormatDate(date,abbreviatedMonth,formats){if(null==date||null==date.getDate)return"";null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats));var day=0<=formats.ShortDatePattern.toLowerCase().indexOf("dd")&&date.getDate()<10?"0"+date.getDate():""+date.getDate(),abbreviatedMonth=0<=formats.ShortDatePattern.toLowerCase().indexOf("mmm")||0!=abbreviatedMonth?formats.AbbreviatedMonthNames[date.getMonth()]:0<=formats.ShortDatePattern.toLowerCase().indexOf("mm")&&date.getMonth()<9?"0"+(date.getMonth()+1):""+(date.getMonth()+1),date=0<=formats.ShortDatePattern.toLowerCase().indexOf("yyyy")?""+date.getFullYear():(""+date.getFullYear()).substring(2),formats=formats.ShortDatePattern;return 0<=formats.indexOf("yyyy")?formats=formats.replace("yyyy",date):0<=formats.indexOf("YYYY")?formats=formats.replace("YYYY",date):0<=formats.indexOf("YY")?formats=formats.replace("YY",date):0<=formats.indexOf("yy")&&(formats=formats.replace("yy",date)),0<=formats.indexOf("DD")?formats=formats.replace("DD",day):0<=formats.indexOf("dd")?formats=formats.replace("dd",day):0<=formats.indexOf("d")?formats=formats.replace("d",day):0<=formats.indexOf("D")&&(formats=formats.replace("D",day)),0<=formats.indexOf("MMMM")?formats=formats.replace("MMMM",abbreviatedMonth):0<=formats.indexOf("mmmm")?formats=formats.replace("mmmm",abbreviatedMonth):0<=formats.indexOf("MMM")?formats=formats.replace("MMM",abbreviatedMonth):0<=formats.indexOf("mmm")?formats=formats.replace("mmm",abbreviatedMonth):0<=formats.indexOf("MM")?formats=formats.replace("MM",abbreviatedMonth):0<=formats.indexOf("mm")?formats=formats.replace("mm",abbreviatedMonth):0<=formats.indexOf("M")?formats=formats.replace("M",abbreviatedMonth):0<=formats.indexOf("m")&&(formats=formats.replace("m",abbreviatedMonth)),formats}function Latinise(text){return String.IsNullOrWhiteSpace(text)?text:text.Latinise()}function ParseNumber(number,formats){null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats));var sep=null==formats.NumberGroupSeparator||0==formats.NumberGroupSeparator.length?" ":formats.NumberGroupSeparator,formats=null==formats.NumberDecimalSeparator||0==formats.NumberDecimalSeparator.length?".":formats.NumberDecimalSeparator,fixedNumber=Number(number.replace(new RegExp("/"+sep+"/g"),"").replace(new RegExp("/"+formats+"/g"),"."));if(isNaN(fixedNumber)){for(var temp="",theNumber=(number+"").replace(new RegExp("/"+sep+"/g"),"").replace(new RegExp("/"+formats+"/g"),"."),i=0;i<theNumber.length;i++)"1"!=theNumber[i]&&"2"!=theNumber[i]&&"3"!=theNumber[i]&&"4"!=theNumber[i]&&"5"!=theNumber[i]&&"6"!=theNumber[i]&&"7"!=theNumber[i]&&"8"!=theNumber[i]&&"9"!=theNumber[i]&&"0"!=theNumber[i]&&"."!=theNumber[i]||(temp+=theNumber[i]);"-"==theNumber.substring(0,1)&&(temp="-"+temp),fixedNumber=Number(temp)}return fixedNumber}!function(NumberFormatSimplification){NumberFormatSimplification[NumberFormatSimplification.None=0]="None",NumberFormatSimplification[NumberFormatSimplification.Simplify=1]="Simplify",NumberFormatSimplification[NumberFormatSimplification.Bytes=2]="Bytes"}(NumberFormatSimplification=Globalization.NumberFormatSimplification||(Globalization.NumberFormatSimplification={})),Globalization.FormatDate=FormatDate,Globalization.FormatDayMonth=function(date,formats){return null==date?"":(null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats)),""+date.getDate()+" "+formats.AbbreviatedMonthNames[date.getMonth()])},Globalization.FormatMonthYear=function(date,formats){return null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats)),formats.AbbreviatedMonthNames[date.getMonth()]+" "+(0<=formats.ShortDatePattern.toLowerCase().indexOf("yyyy")?""+date.getFullYear():(""+date.getFullYear()).substring(2))},Globalization.FormatDateTime=function(date,formats){return null==date?"":FormatDate(date,null,formats)+" "+date.getHours()+":"+date.getMinutes()+":"+date.getSeconds()},Globalization.FormatTime=function(date,formats){if(null==date)return"";null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats));var hours=!(0<formats.ShortTimePattern.toLowerCase().indexOf(" a")||0<formats.ShortTimePattern.toLowerCase().indexOf(" tt"))||date.getHours()<=12?date.getHours()+"":date.getHours()-12+"";return(1<hours.length||formats.ShortTimePattern.toLowerCase().indexOf("hh:")<0?hours:"0"+hours)+":"+(0<=formats.ShortTimePattern.toLowerCase().indexOf(":mm")&&date.getMinutes()<=9?"0"+date.getMinutes():""+date.getMinutes())+(0<formats.ShortTimePattern.toLowerCase().indexOf(" a")||0<formats.ShortTimePattern.toLowerCase().indexOf(" tt")?date.getHours()<12?" am":" pm":"")},Globalization.ParseMonthYear=function(monthYear,formats){if(null==monthYear||0==monthYear.length||monthYear.indexOf(" ")<0)return null;null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats));for(var monthName=monthYear.substring(0,monthYear.indexOf(" ")).toLocaleLowerCase(),monthNumber=0,i=0;i<formats.AbbreviatedMonthNames.length;i++)if(formats.AbbreviatedMonthNames[i].toLocaleLowerCase()==monthName){monthNumber=i;break}return monthYear=Number(monthYear.substring(monthYear.indexOf(" ")+1)),new Date(monthYear,monthNumber,1)},Globalization.ParseDate=function(date,formats){if(String.IsNullOrWhiteSpace(date))return new Date;null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats));var tentativeMonthName_1,partialMatches,dayPosition=(temp=formats.ShortDatePattern.toLowerCase()).indexOf("d")<temp.indexOf("m")&&temp.indexOf("d")<temp.indexOf("y")?0:temp.indexOf("d")>temp.indexOf("m")&&temp.indexOf("d")>temp.indexOf("y")?2:1,monthPosition=temp.indexOf("m")<temp.indexOf("d")&&temp.indexOf("m")<temp.indexOf("y")?0:temp.indexOf("m")>temp.indexOf("d")&&temp.indexOf("m")>temp.indexOf("y")?2:1,temp=temp.indexOf("y")<temp.indexOf("d")&&temp.indexOf("y")<temp.indexOf("m")?0:temp.indexOf("y")>temp.indexOf("d")&&temp.indexOf("y")>temp.indexOf("m")?2:1,dateSeparators=formats.ShortDatePattern.split(/(?:d|D|m|M|y|Y)+/).map(function(z){return 0<=z.indexOf(",")||0<=z.indexOf("-")||0<=z.indexOf("\\")||0<=z.indexOf("/")?z.trim():z}).filter(function(z){return 0<z.length}),tentativeParts=date.split(new RegExp("(?:"+dateSeparators.map(function(z){return"\\"+z}).filter(function(z){return 0<z.length}).join("|")+")+","g")).filter(function(z){return null!=z&&0<z.trim().length}),date=dayPosition>tentativeParts.length-1||0==tentativeParts[dayPosition].length||!/^\d+$/.test(tentativeParts[dayPosition])||parseInt(tentativeParts[dayPosition])<1?1:31<parseInt(tentativeParts[dayPosition])?31:parseInt(tentativeParts[dayPosition]),dayPosition=monthPosition>tentativeParts.length-1||0==tentativeParts[monthPosition].length?(new Date).getMonth()+1:/^\d+$/.test(tentativeParts[monthPosition])?12<parseInt(tentativeParts[monthPosition])?12:parseInt(tentativeParts[monthPosition])<1?1:parseInt(tentativeParts[monthPosition]):Latinise(formats.AbbreviatedMonthNames.toString()).toLowerCase().replace(/\./g,"").split(",").indexOf(Latinise(tentativeParts[monthPosition].toLowerCase().replace(/\./g,"")))+1,separatorsContainedInMonthName=dateSeparators.map(function(z){return z.trim()}).filter(function(z){return 0<formats.AbbreviatedMonthNames.filter(function(w){return 0<=w.indexOf(z)}).length}),dateSeparators=(0==dayPosition&&0<separatorsContainedInMonthName.length&&null!=tentativeParts[monthPosition]&&0<tentativeParts[monthPosition].length?(dateSeparators=Latinise(formats.AbbreviatedMonthNames.toString()).toLowerCase().replace(/\./g,"").split(","),tentativeMonthName_1=Latinise(tentativeParts[monthPosition].toLowerCase().replace(/\./g,"")),dayPosition=dateSeparators.map(function(z,i){return{Index:i+1,Name:z}}).filter(function(z){return 0<separatorsContainedInMonthName.filter(function(w){return tentativeMonthName_1+w==z.Name||w+tentativeMonthName_1==z.Name||0==tentativeMonthName_1.indexOf(w)&&tentativeMonthName_1.substring(w.length)==z.Name||tentativeMonthName_1.length>w.length&&tentativeMonthName_1.substring(0,tentativeMonthName_1.length-w.length)==z.Name}).length}).map(function(z){return z.Index}).concat([parseInt(tentativeMonthName_1.replace(/\D/g,""))]).concat([1]).filter(function(z){return null!=z&&!isNaN(z)})[0]):0==dayPosition&&null!=tentativeParts[monthPosition]&&0<tentativeParts[monthPosition].trim().length&&1<=(partialMatches=formats.AbbreviatedMonthNames.filter(function(z){return 0<=Latinise(z.toLowerCase()).indexOf(Latinise(tentativeParts[monthPosition].toLowerCase()))})).length&&(dayPosition=formats.AbbreviatedMonthNames.map(function(z,i){return{Index:i,Item:z}}).filter(function(z){return z.Item==partialMatches[0]}).map(function(z){return z.Index+1})[0]),dayPosition=dayPosition<=0?1:dayPosition,temp>tentativeParts.length-1||0==tentativeParts[temp].length||!/^\d+$/.test(tentativeParts[temp])||parseInt(tentativeParts[temp])<1?(new Date).getFullYear():2100<parseInt(tentativeParts[temp])?2100:null!=tentativeParts[temp]&&tentativeParts[temp].length<=2&&formats.ShortDatePattern.toLowerCase().indexOf("yyyy")<0?parseInt((new Date).getFullYear().toString().substring(0,2)+tentativeParts[temp]):parseInt(tentativeParts[temp]));return new Date(Number(dateSeparators),Number(dayPosition)-1,Number(date),0,0,0)},Globalization.FormatBoolean=function(value){return null==value?"":value.toString().toLowerCase()},Globalization.FormatNumber=function(number,precision,numberFormatSimplification,formats){if(null==number)return"";null==formats?formats=Globalization.DefaultFormatting:"String"==formats.GetType().Name&&(formats=LocaleFormatInfo.FromCultureCode(formats)),0==precision&&(precision=null);var sep=null==formats.NumberGroupSeparator||0==formats.NumberGroupSeparator.length?" ":formats.NumberGroupSeparator,dec=null==formats.NumberDecimalSeparator||0==formats.NumberDecimalSeparator.length?".":formats.NumberDecimalSeparator,kilo=null==formats.ThousandsSign||0==formats.ThousandsSign.length?"K":formats.ThousandsSign,mega=null==formats.MillionsSign||0==formats.MillionsSign.length?"M":formats.MillionsSign,giga=null==formats.BillionsSign||0==formats.BillionsSign.length?"B":formats.BillionsSign,number=number.GetType()!=Accelatrix.Type.Number?ParseNumber(""+number):number,simplificationBase=null==numberFormatSimplification?1:numberFormatSimplification==NumberFormatSimplification.Simplify||"Simplify"==numberFormatSimplification.toString()?1e3:1024,giga=null==numberFormatSimplification||numberFormatSimplification==NumberFormatSimplification.None||"None"==numberFormatSimplification.toString()||Math.abs(number)<simplificationBase?"":Math.round(10*Math.abs(number)/(simplificationBase*simplificationBase))/10<1?kilo:Math.round(10*Math.abs(number)/(simplificationBase*simplificationBase*simplificationBase))/10<1?mega:giga;precision=null==precision&&""==giga?0:""==giga?1<=Math.abs(precision)?Math.abs(precision):Math.pow(10,Math.abs(precision).toString().length-2):giga==kilo?0:10,number=""==giga?number:giga==kilo?Math.round(number/simplificationBase):giga==mega?number/(simplificationBase*simplificationBase):number/(simplificationBase*simplificationBase*simplificationBase);var result=(kilo=(null!=precision&&0<precision?(Math.round(number*precision)/precision).toString()+".":number.toString()+".").split("."))[0].replace(/\B(?=(\d{3})+(?!\d))/g,sep)+(kilo[1]?dec+kilo[1]:""),decimals=null==precision||precision<=0?0:1<=precision?(""+precision).length-1:(""+precision).split(".")[1].length-1;if(null!=decimals&&0<decimals){mega=0<=result.indexOf(dec)?result.split(dec)[1].length:0;0==mega&&(result+=dec);for(var i=mega;i<decimals;i++)result+="0"}return numberFormatSimplification==NumberFormatSimplification.Bytes&&""==giga&&-1!==result.indexOf(formats.NumberDecimalSeparator+"0",result.length-(formats.NumberDecimalSeparator+"0").length)&&(result=result.split(formats.NumberDecimalSeparator)[0]),numberFormatSimplification==NumberFormatSimplification.Bytes?result+" "+giga+"B":result+giga},Globalization.ParseNumber=ParseNumber;var LocaleFormatInfo=function(){function LocaleFormatInfo(shortDatePattern,shortTimePattern,numberDecimalSeparator,numberGroupSeparator,abbreviatedMonthNames,thousandsSign,millionsSign,billionsSign){if(String.IsNullOrWhiteSpace(shortDatePattern))throw new Accelatrix.ArgumentNullException("shortDatePattern");if(String.IsNullOrWhiteSpace(shortTimePattern))throw new Accelatrix.ArgumentNullException("shortTimePattern");if(String.IsNullOrWhiteSpace(numberDecimalSeparator))throw new Accelatrix.ArgumentNullException("numberDecimalSeparator");if(null==numberGroupSeparator||0==numberGroupSeparator.length)throw new Accelatrix.ArgumentNullException("numberGroupSeparator");if(null==abbreviatedMonthNames||0==abbreviatedMonthNames.length)throw new Accelatrix.ArgumentNullException("abbreviatedMonthNames");if(abbreviatedMonthNames.length<12)throw new Accelatrix.ArgumentException("'abbreviatedMonthNames' cannot contain less that 12 entries.");if(String.IsNullOrWhiteSpace(thousandsSign))throw new Accelatrix.ArgumentNullException("thousandsSign");if(String.IsNullOrWhiteSpace(millionsSign))throw new Accelatrix.ArgumentNullException("millionsSign");if(String.IsNullOrWhiteSpace(billionsSign))throw new Accelatrix.ArgumentNullException("billionsSign");Object.defineProperty(this,"ShortDatePattern",{get:function(){return shortDatePattern},enumerable:!0}),Object.defineProperty(this,"ShortTimePattern",{get:function(){return shortTimePattern},enumerable:!0}),Object.defineProperty(this,"NumberDecimalSeparator",{get:function(){return numberDecimalSeparator},enumerable:!0}),Object.defineProperty(this,"NumberGroupSeparator",{get:function(){return numberGroupSeparator},enumerable:!0}),Object.defineProperty(this,"AbbreviatedMonthNames",{get:function(){return abbreviatedMonthNames},enumerable:!0}),Object.defineProperty(this,"ThousandsSign",{get:function(){return thousandsSign},enumerable:!0}),Object.defineProperty(this,"MillionsSign",{get:function(){return millionsSign},enumerable:!0}),Object.defineProperty(this,"BillionsSign",{get:function(){return billionsSign},enumerable:!0}),Accelatrix.ImmutableObject.Freeze(this)}return Object.defineProperty(LocaleFormatInfo.prototype,"ShortDatePattern",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"ShortTimePattern",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"NumberDecimalSeparator",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"NumberGroupSeparator",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"AbbreviatedMonthNames",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"ThousandsSign",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"BillionsSign",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(LocaleFormatInfo.prototype,"MillionsSign",{get:function(){return null},enumerable:!1,configurable:!0}),LocaleFormatInfo.prototype.ToString=function(){return"[LocaleFormatInfo]"},LocaleFormatInfo.FromCultureCode=function(cultureCode){return GlobalizationSystem.GetFormattingForCultureCode(cultureCode)},LocaleFormatInfo.FromEnvironment=function(){return GlobalizationSystem.GetEnvironmentFormatting()},LocaleFormatInfo}();Globalization.LocaleFormatInfo=LocaleFormatInfo}(Globalization=Accelatrix.Globalization||(Accelatrix.Globalization={})),function(GlobalizationSystem){var environmentFormatting=null;function GetFormattingForCultureCode(cultureCode){(String.IsNullOrWhiteSpace(cultureCode)||null==cultureCode&&void 0!==cultureCode)&&(cultureCode=void 0);function getSymbol(value){return 31<Number(value)?"yyyy":0<=value.indexOf("4")?2==value.length?"mm":"m":0<=value.indexOf("3")?2==value.length?"dd":"d":"yyyy"}for(var sampleDate=new Date(2e3,3,3).toLocaleDateString(cultureCode,{day:"numeric",month:"numeric",year:"numeric"}),parts=sampleDate.split(/[^\d]/),separator=sampleDate.substring(parts[0].length,parts[0].length+1),separator=getSymbol(parts[0])+separator+getSymbol(parts[1])+separator+getSymbol(parts[2]),abbreviatedMonthNames=[],i=0;i<12;i++)abbreviatedMonthNames[i]=new Date(2e3,i,1).toLocaleString(void 0===cultureCode?"default":cultureCode,{month:"short"});var sampleDate2=new Date(2e3,2,3).toLocaleDateString(cultureCode,{day:"numeric",month:"short",year:"numeric"}),parts=(sampleDate.split("").forEach(function(z){return sampleDate2=sampleDate2.replace(z,"")}),0<sampleDate2.trim().length&&(separator=0<=separator.indexOf("mm")?separator.replace("mm","MMM"):separator.replace("m","MMM")),1.2.toLocaleString(cultureCode).replace("1","").replace("2","")),sampleDate=1e4.toLocaleString(cultureCode).replace("1","").replace(/0/g,""),timePattern=new Date(2e3,3,3,20,4,5).toLocaleTimeString(cultureCode);return timePattern=0<=(timePattern=0<=(timePattern=0<=(timePattern=0<=timePattern.indexOf("20")?timePattern.replace("20","hh"):timePattern.replace("8","h")).indexOf("04")?timePattern.replace("04","mm"):timePattern.replace("4","m")).indexOf("05")?timePattern.replace("05","ss"):timePattern.replace("5","s")).toLowerCase().indexOf("pm")?timePattern.replace(" pm"," a").replace(" PM"," a"):timePattern,new Globalization.LocaleFormatInfo(separator,timePattern,parts,sampleDate,abbreviatedMonthNames,"K","M","B")}GlobalizationSystem.currentFormatting=null,GlobalizationSystem.timezoneless=!0,GlobalizationSystem.GetEnvironmentFormatting=function(){if(null!=environmentFormatting)return environmentFormatting;try{environmentFormatting=GetFormattingForCultureCode()}catch(e){environmentFormatting=new Globalization.LocaleFormatInfo("dd/mm/yyyy","hh:mm",".","'",["Jan","Feb","Mar","Apr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dec"],"K","M","B")}finally{return environmentFormatting}},GlobalizationSystem.GetFormattingForCultureCode=GetFormattingForCultureCode}(GlobalizationSystem=GlobalizationSystem||{})}(Accelatrix=Accelatrix||{});
var Accelatrix,__extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};!function(Accelatrix){var NumberSystem,Quantity=function(){function Quantity(amount,unit,precision){var _this=this;if(null==amount)throw new Accelatrix.ArgumentNullException("amount");if(isNaN(Number(amount)))throw new Accelatrix.ArgumentException("'amount' needs to be a number.");if(null==unit||String.IsNullOrWhiteSpace(unit.toString()))throw new Accelatrix.ArgumentNullException("unit");isNaN(Number(precision))&&(precision=null);var myUnit="String"!=unit.GetType().Name?unit:new NumberSystem.Unit(unit.toString());amount=Number(amount),precision=null==precision?null:Number(precision),Object.defineProperty(this,"Amount",{get:function(){return amount},enumerable:!0}),Object.defineProperty(this,"Unit",{get:function(){return myUnit},enumerable:!0}),Object.defineProperty(this,"Precision",{get:function(){return precision},enumerable:!0}),Object.defineProperty(this,"ToString",{value:function(formatting){return Quantity.Format(_this,formatting)},enumerable:!1,configurable:!0})}return Object.defineProperty(Quantity.prototype,"Amount",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Quantity.prototype,"Unit",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Quantity.prototype,"Precision",{get:function(){return null},enumerable:!1,configurable:!0}),Quantity.prototype.Add=function(operands){return null==operands?this:(operands=operands.GetType().IsArray?[this].concat(operands):[this,operands],Quantity.Add(operands))},Quantity.IsQuantity=function(obj){return null!=obj&&("Number"==obj.GetType().Name||!(isNaN(obj.Amount)||null==obj.Unit||String.IsNullOrWhiteSpace(obj.Unit.Code)&&String.IsNullOrWhiteSpace(obj.Unit.Name)&&String.IsNullOrWhiteSpace(obj.Unit.ShortName)))},Quantity.Format=function(quantity,formatting){var unitString;return null==quantity?"":(unitString=null==quantity.Unit?"":null!=Object.getOwnPropertyDescriptor(quantity.Unit,"ToString")?quantity.Unit.ToString():null!=quantity.Unit.Code&&0<quantity.Unit.Code.trim().length?quantity.Unit.Code:null!=quantity.Unit.ShortName&&0<quantity.Unit.ShortName.trim().length?quantity.Unit.ShortName:null==quantity.Unit.Name?"":quantity.Unit.Name,null==quantity.Unit?Accelatrix.Globalization.FormatNumber(quantity.Amount,null==quantity.Precision?100:quantity.Precision,null,formatting):unitString.length<=1&&(null==quantity.Unit.Name||0==quantity.Unit.Name.length)?Accelatrix.Globalization.FormatNumber(quantity.Amount,null==quantity.Precision?100:quantity.Precision,null,formatting)+unitString:Accelatrix.Globalization.FormatNumber(quantity.Amount,null==quantity.Precision?100:quantity.Precision,null,formatting)+" "+unitString)},Quantity.Add=function(operands){if(null==operands||0==operands.length)return null;var template,arithmetcResult=0..Add(operands);if(null==arithmetcResult)return null;for(var i=0;i<operands.length;i++)Quantity.IsQuantity(operands[i])&&(null==template||operands[i].Precision>template.Precision)&&(template=operands[i]);if(null==template||"Number"==template.GetType().Name)return Quantity.Unitless(arithmetcResult);var proxy=JSON.parse(JSON.stringify(template));proxy.Amount=arithmetcResult,proxy.Unit=template.Unit,proxy.Precision=template.Precision;try{return template.GetType().CreateNewInstance(proxy)}catch(ex){return Object.UnboxDates(proxy),proxy}},Quantity.Generic=function(amount,unit,precision){return new NumberSystem.GenericQuantity(amount,unit,precision)},Quantity.Percentage=function(amount,precision){return new NumberSystem.Percentage(amount,precision)},Quantity.Unitless=function(amount,precision){return new NumberSystem.UnitlessQuantity(amount,precision)},Quantity}();Accelatrix.Quantity=Quantity,function(NumberSystem){var GenericQuantity=function(_super){function GenericQuantity(amount,unit,precision){return _super.call(this,amount,unit,precision)||this}return __extends(GenericQuantity,_super),__decorate([Accelatrix.ImmutableObject,__metadata("design:paramtypes",[Number,Object,Number])],GenericQuantity)}(Quantity),GenericQuantity=(NumberSystem.GenericQuantity=GenericQuantity,function(_super){function UnitlessQuantity(amount,precision){return _super.call(this,amount,new Unitless,precision)||this}return __extends(UnitlessQuantity,_super),__decorate([Accelatrix.ImmutableObject,__metadata("design:paramtypes",[Number,Number])],UnitlessQuantity)}(Quantity)),GenericQuantity=(NumberSystem.UnitlessQuantity=GenericQuantity,function(_super){function Percentage(amount,precision){var _this=_super.call(this,amount,"%",precision)||this;return Object.defineProperty(_this,"ToString",{value:function(formatting){return Accelatrix.Globalization.FormatNumber(_this.Amount,_this.Precision,null,formatting)+"%"},enumerable:!1}),_this}return __extends(Percentage,_super),__decorate([Accelatrix.ImmutableObject,__metadata("design:paramtypes",[Number,Number])],Percentage)}(Quantity)),GenericQuantity=(NumberSystem.Percentage=GenericQuantity,function(){function Unit(code,shortName,name){var _this=this;if(String.IsNullOrWhiteSpace(code))throw new Accelatrix.ArgumentNullException("code");String.IsNullOrWhiteSpace(shortName)&&String.IsNullOrWhiteSpace(name)?3<=code.length?Object.defineProperty(this,"Name",{get:function(){return code},enumerable:!0}):1<code.length?Object.defineProperty(this,"ShortName",{get:function(){return code},enumerable:!0}):Object.defineProperty(this,"Code",{get:function(){return code},enumerable:!0}):(String.IsNullOrWhiteSpace(shortName)||Object.defineProperty(this,"Name",{get:function(){return name},enumerable:!0}),Object.defineProperty(this,"ShortName",{get:function(){return shortName},enumerable:!0}),Object.defineProperty(this,"Code",{get:function(){return code},enumerable:!0})),Object.defineProperty(this,"ToString",{value:function(){return null!=_this.Code&&0<_this.Code.trim().length?_this.Code:null!=_this.ShortName&&0<_this.ShortName.trim().length?_this.ShortName:null==_this.Name?"":_this.Name},enumerable:!1})}return Object.defineProperty(Unit.prototype,"Name",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Unit.prototype,"Code",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Unit.prototype,"ShortName",{get:function(){return null},enumerable:!1,configurable:!0}),__decorate([Accelatrix.ImmutableObject,__metadata("design:paramtypes",[String,String,String])],Unit)}()),Unitless=(NumberSystem.Unit=GenericQuantity,function(){function Unitless(){Object.defineProperty(this,"ToString",{value:function(){return""},enumerable:!1}),Object.defineProperty(this,"Code",{get:function(){return""},enumerable:!0})}return Object.defineProperty(Unitless.prototype,"Name",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(Unitless.prototype,"Code",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(Unitless.prototype,"ShortName",{get:function(){return""},enumerable:!1,configurable:!0}),__decorate([Accelatrix.ImmutableObject,__metadata("design:paramtypes",[])],Unitless)}());NumberSystem.Unitless=Unitless}(NumberSystem=NumberSystem||{})}(Accelatrix=Accelatrix||{}),Object.defineProperty(Number.prototype,"Add",{value:function(operands,allowDifferentUnits){if(null==operands)return this;var typeOfOperands=operands.GetType(),arrOperands="Number"==typeOfOperands.Name?[operands]:Accelatrix.Quantity.IsQuantity(operands)?[operands.Amount]:typeOfOperands.IsArray?operands.filter(function(z){return null!=z}).map(function(z){return"Number"==z.GetType().Name?z:Accelatrix.Quantity.IsQuantity(z)?z.Amount:null}).filter(function(z){return null!=z}):[];if(arrOperands.push(this),(null==allowDifferentUnits||!allowDifferentUnits)&&typeOfOperands.IsArray)for(var allUnits=operands.filter(function(z){return null!=z&&null!=z.Unit}).map(function(z){return z.Unit}).sort(function(a,b){return b<a?1:a<b?-1:0}),i=0;i<allUnits.length-1;i++)if(!allUnits[i].Equals(allUnits[i+1]))return null;var total=0;return arrOperands.forEach(function(z){return total+=z}),total},enumerable:!1,configurable:!0}),Object.defineProperty(Number.prototype,"ToString",{value:function(precisionOrFormatting,formatting){formatting=null!=formatting?formatting:null==precisionOrFormatting||"Number"==precisionOrFormatting.GetType().Name?null:precisionOrFormatting,precisionOrFormatting=null==precisionOrFormatting||"Number"!=precisionOrFormatting.GetType().Name?null:precisionOrFormatting;return Accelatrix.Globalization.FormatNumber(this,precisionOrFormatting,null,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Number,"Parse",{value:function(numberString,formatting){return Accelatrix.Globalization.ParseNumber(numberString,formatting)},enumerable:!1,configurable:!0});
Object.defineProperty(Date.prototype,"ToDateTimeString",{value:function(formatting){return Accelatrix.Globalization.FormatDateTime(this,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"ToTimeString",{value:function(formatting){return Accelatrix.Globalization.FormatTime(this,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"ToDayMonthString",{value:function(formatting){return Accelatrix.Globalization.FormatDayMonth(this,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"ToMonthYearString",{value:function(formatting){return Accelatrix.Globalization.FormatMonthYear(this,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"Greater",{value:function(date){return this.getTime()>date.getTime()},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"GreaterOrEqual",{value:function(date){return this.getTime()>=date.getTime()},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"LesserOrEqual",{value:function(date){return this.getTime()<=date.getTime()},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"Lesser",{value:function(date){return this.getTime()<date.getTime()},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddYears",{value:function(years){var newDate=new Date(this);return newDate.setMilliseconds(this.getMilliseconds()),newDate.setFullYear(newDate.getFullYear()+years),newDate.getDate()==this.getDate()?newDate:newDate.getDate()>this.getDate()?newDate.AddDays(-1):newDate.AddDays(1)},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddMonths",{value:function(months){var newDate=new Date(this),isLastDayOfMonth=this.AddDays(1).getMonth()!=this.getMonth();return newDate.setMilliseconds(this.getMilliseconds()),isLastDayOfMonth?(newDate.setDate(1),newDate.setMonth(newDate.getMonth()+months+1),newDate.AddDays(-1)):newDate.setMonth(newDate.getMonth()+months),newDate.getDate()==this.getDate()?newDate:newDate.AddDays(-newDate.getDate())},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddMonths",{value:function(months){var newDate=new Date(this),isLastDayOfMonth=this.AddDays(1).getMonth()!=this.getMonth();return newDate.setMilliseconds(this.getMilliseconds()),isLastDayOfMonth?(newDate.setDate(1),newDate.setMonth(newDate.getMonth()+months+1),newDate.AddDays(-1)):newDate.setMonth(newDate.getMonth()+months),newDate.getDate()==this.getDate()?newDate:newDate.AddDays(-newDate.getDate())},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddDays",{value:function(days){var newDate=new Date(this);return newDate.setMilliseconds(this.getMilliseconds()),new Date(newDate.setDate(newDate.getDate()+days))},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddHours",{value:function(hours){var newDate=new Date(this);return newDate.setMilliseconds(this.getMilliseconds()),new Date(newDate.setHours(newDate.getHours()+hours))},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddMinutes",{value:function(minutes){var newDate=new Date(this);return newDate.setMilliseconds(this.getMilliseconds()),new Date(newDate.setMinutes(newDate.getMinutes()+minutes))},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddSeconds",{value:function(seconds){var newDate=new Date(this);return newDate.setMilliseconds(this.getMilliseconds()),new Date(newDate.setSeconds(newDate.getSeconds()+seconds))},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"AddMilliseconds",{value:function(milliseconds){var newDate=new Date(this);return newDate.setMilliseconds(this.getMilliseconds()),new Date(newDate.setMilliseconds(newDate.getMilliseconds()+milliseconds))},enumerable:!1,configurable:!0}),Object.defineProperty(Date.prototype,"DiffMonths",{value:function(date){var meDate=this.AddMilliseconds(1).getMonth()!=this.getMonth()?this.AddMilliseconds(1):this,date=date.AddMilliseconds(1).getMonth()!=date.getMonth()?date.AddMilliseconds(1):date;return 12*(meDate.getFullYear()-date.getFullYear())+(meDate.getMonth()-date.getMonth())+1},enumerable:!1,configurable:!0}),Object.defineProperty(Date,"FromMonthYear",{value:function(monthYear,formatting){return Accelatrix.Globalization.ParseMonthYear(monthYear,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Date,"Parse",{value:function(dateString,formatting){return Accelatrix.Globalization.ParseDate(dateString,formatting)},enumerable:!1,configurable:!0}),Object.defineProperty(Date,"Now",{get:function(){return new Date},enumerable:!1,configurable:!0}),Date.prototype.toJSON=function(){var offset,result=null==this?null:this.getFullYear()+"-"+(this.getMonth()<9?"0"+(this.getMonth()+1):this.getMonth()+1)+"-"+(this.getDate()<10?"0"+this.getDate():this.getDate())+"T"+(this.getHours()<10?"0"+this.getHours():this.getHours())+":"+(this.getMinutes()<10?"0"+this.getMinutes():this.getMinutes())+":"+(this.getSeconds()<10?"0"+this.getSeconds():this.getSeconds())+"."+(this.getMilliseconds()<100?"0":"")+(this.getMilliseconds()<10?"0":"")+this.getMilliseconds();return Accelatrix.Globalization.TimezoneLess||(0==offset?result+="+00:00":result=(result=(result+=0<(offset=this.getTimezoneOffset())?"-":"+")+(600<=(offset=Math.abs(offset))?Math.floor(offset/60)+":":60<=offset?"0"+Math.floor(offset/60)+":":"00:"))+(10<=(offset-=60*Math.floor(offset/60))?offset:"0"+offset)),result},Object.defineProperty(Object,"UnboxDates",{value:function(obj){var isoDateRegex=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d)|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d[0-5]\d|Z))/;if(null!=obj)if(obj.GetType().IsArray)obj.filter(function(z){return null!=z}).forEach(function(z,i){return obj[i]=Object.UnboxDates(z)});else{if("String"==obj.GetType().Name)return obj=Object.UnboxDates({MyDate:obj.toString()}).MyDate;if("object"!=typeof obj)return obj;Object.keys(obj).map(function(z){return{Name:z,Value:obj[z]}}).filter(function(z){return null!=z.Value}).forEach(function(z){var textDate,datePart;"Array"==z.Value.GetType()?z.Value.map(function(w,i){return{Index:i,Item:w}}).filter(function(w){return null!=w.Item}).forEach(function(w){return z.Value[w.Index]=Object.UnboxDates(w.Item)}):"object"==typeof z.Value?Object.UnboxDates(z.Value):null!=z.Value&&z.Value.length<=33&&isoDateRegex.test(z.Value)&&(datePart=0<(textDate=("+"==(textDate=z.Value.toString()).substring(textDate.length-5,textDate.length-4)||"-"==textDate.substring(textDate.length-5,textDate.length-4))&&textDate.substring(textDate.length-5).indexOf(":")<0?textDate.substring(0,textDate.length-2)+":"+textDate.substring(textDate.length-2):textDate).indexOf("Z")||0<textDate.indexOf("+")||0<textDate.substring(10).indexOf("-")||textDate.indexOf("T")<0?new Date(textDate):(datePart=textDate.substring(0,textDate.indexOf("T")).split("-"),textDate=textDate.substring(textDate.indexOf("T")+1).split(":"),new Date(Number(datePart[0]),Number(datePart[1])-1,Number(datePart[2]),Number(textDate[0]),Number(textDate[1]),Number(textDate[2]))),obj[z.Name]=datePart)})}return obj},enumerable:!1});
Object.defineProperty(Uint8Array,"FromBase64",{value:function(base64String){for(var binary_string=window.atob(base64String),len=binary_string.length,bytes=new Uint8Array(len),i=0;i<len;i++)bytes[i]=binary_string.charCodeAt(i);return bytes},enumerable:!1,configurable:!0}),Object.defineProperty(Uint8Array.prototype,"ToBase64",{value:function(){if(null==this||0==this.length)return null;for(var chunk,base64="",encodings="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bytes=new Uint8Array(this),byteLength=bytes.byteLength,byteRemainder=byteLength%3,mainLength=byteLength-byteRemainder,i=0;i<mainLength;i+=3)base64+=encodings[(16515072&(chunk=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2]))>>18]+encodings[(258048&chunk)>>12]+encodings[(4032&chunk)>>6]+encodings[63&chunk];return 1==byteRemainder?base64+=encodings[(252&(chunk=bytes[mainLength]))>>2]+encodings[(3&chunk)<<4]+"==":2==byteRemainder&&(base64+=encodings[(64512&(chunk=bytes[mainLength]<<8|bytes[1+mainLength]))>>10]+encodings[(1008&chunk)>>4]+encodings[(15&chunk)<<2]+"="),base64},enumerable:!1,configurable:!0}),Object.defineProperty(Uint8Array.prototype,"ToUtf8String",{value:function(){if(null!=self.TextDecoder)return(new TextDecoder).decode(this);var c2,c3,c,result="",i=0;for(c2=0;i<this.length;)(c=this[i])<128?(result+=String.fromCharCode(c),i++):191<c&&c<224?(c2=this[i+1],result+=String.fromCharCode((31&c)<<6|63&c2),i+=2):(c2=this[i+1],c3=this[i+2],result+=String.fromCharCode((15&c)<<12|(63&c2)<<6|63&c3),i+=3);return result},enumerable:!1,configurable:!0}),Object.defineProperty(Uint8Array.prototype,"ToHexString",{value:function(){var s="",h="0123456789ABCDEF";return this.forEach(function(v){return s+=h[v>>4]+h[15&v]}),s},enumerable:!1,configurable:!0}),Object.defineProperty(ArrayBuffer.prototype,"ToBase64",{value:function(){return Uint8Array.prototype.ToBase64.bind(this).apply()},enumerable:!1,configurable:!0}),Object.defineProperty(ArrayBuffer.prototype,"ToUtf8String",{value:function(){return Uint8Array.prototype.ToUtf8String.bind(this).apply()},enumerable:!1,configurable:!0}),Object.defineProperty(ArrayBuffer.prototype,"ToHexString",{value:function(){return Uint8Array.prototype.ToHexString.bind(this).apply()},enumerable:!1,configurable:!0}),Object.defineProperty(String,"FromBytes",{value:function(bytes){if(null==bytes)return null;if(0==bytes.length)return"";for(var c,char2,char3,out="",len=bytes.length,i=0;i<len;)switch((c=bytes[i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:out+=String.fromCharCode(c);break;case 12:case 13:char2=bytes[i++],out+=String.fromCharCode((31&c)<<6|63&char2);break;case 14:char2=bytes[i++],char3=bytes[i++],out+=String.fromCharCode((15&c)<<12|(63&char2)<<6|(63&char3)<<0)}return out},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"ToAnsi",{value:function(){for(var array=new(void 0!==self.Uint8Array?Uint8Array:Array)(this.length),i=0,il=this.length;i<il;++i)array[i]=255&this.charCodeAt(i);return array},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"ToUtf8",{value:function(){if(null!=self.TextEncoder)return(new TextEncoder).encode(this);for(var utf8=self.unescape(encodeURIComponent(this)),arr=new Uint8Array(utf8.length),i=0;i<utf8.length;i++)arr[i]=utf8.charCodeAt(i);return arr},enumerable:!1,configurable:!0}),Object.defineProperty(String.prototype,"GetHash",{value:function(){return this.ToUtf8().GetHash()},enumerable:!1,configurable:!0}),Object.defineProperty(Uint8Array.prototype,"GetHash",{value:function(){var onDone=function(z){},onError=function(z){},result={then:function(onfulfilled){return onDone=null==onfulfilled?function(z){}:onfulfilled,result},catch:function(onrejected){return onError=null==onrejected?function(z){}:onrejected,result}};if(null!=window.msCrypto)try{var r=window.msCrypto.subtle.digest("SHA-256",this.buffer);setTimeout(function(){return onDone(null==r.result?"":r.result.ToBase64())},null!=r.result?0:100)}catch(e){setTimeout(function(){return onError(e)},0)}else null==crypto||null==crypto.subtle||null==crypto.subtle.digest?onError(new Error("Cryptographic functions are not available.")):crypto.subtle.digest("SHA-256",this.buffer).then(function(result){try{onDone(null==result?"":result.ToBase64())}catch(e){onError(e)}});return result},enumerable:!1,configurable:!0});
var Accelatrix,__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){var op=[n,v];if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,(op=t?[2&op[0],t.value]:op)[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3]))_.label=op[1];else if(6===op[0]&&_.label<t[1])_.label=t[1],t=op;else{if(!(t&&_.label<t[2])){t[2]&&_.ops.pop(),_.trys.pop();continue}_.label=t[2],_.ops.push(op)}}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}};!function(Accelatrix){var EnumerableSerialization,EnumerableSystem,Enumerator=function(){function Enumerator(generator){this.Current=void 0,this.GetIterator=generator,this.Reset()}return Enumerator.prototype.MoveNext=function(){var result=this.iterator.next();return this.Current=result.done?void 0:result.value,!result.done},Enumerator.prototype.Reset=function(){this.iterator=this.GetIterator()},Enumerator}(),Enumerable=(!function(EnumerableSerialization){EnumerableSerialization.DataMember=function(argumentIsTypeOrConstructor){return function(target,propertyKey,descriptor){return function(propertyKey,descriptor,argumentIsTypeOrConstructor){var original=descriptor.value;descriptor.value=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var result=original.apply(this,args),parentOJson=this.toJSON.bind(this);return result.toJSON=function(){var typeOrConstructor,typeOrConstructorType,parent=parentOJson(),myArgs=null==argumentIsTypeOrConstructor||!0!==argumentIsTypeOrConstructor?args:args.ToList();return!0===argumentIsTypeOrConstructor&&0<myArgs.length&&null!=myArgs[0]&&"String"!=(typeOrConstructorType=(typeOrConstructor=myArgs[0]).GetType()).Name&&(typeOrConstructorType=(typeOrConstructorType.IsFunction?Accelatrix.Type.FromConstructor(typeOrConstructor):typeOrConstructor).GetFullName(),myArgs[0]=typeOrConstructorType),parent.Members.push({Op:propertyKey,Args:myArgs}),parent},result}}(propertyKey,descriptor,argumentIsTypeOrConstructor)}}}(EnumerableSerialization=EnumerableSerialization||{}),function(){function Enumerable(enumerable){if(null==enumerable)throw new Accelatrix.ArgumentNullException("enumerable");var count,arrIterator,getEnumeratorFactory,generator,objIterator;this.toJSON=function(){return{$type:this.GetType().GetFullName(),Members:[enumerable]}},null==enumerable||enumerable.GetType().IsArray?(count=(enumerable=null==enumerable?[]:enumerable).length,Object.defineProperty(this,"Count",{value:function(){return count},enumerable:!1,configurable:!1}),arrIterator=function(){var nextIndex;return __generator(this,function(_a){switch(_a.label){case 0:nextIndex=0,_a.label=1;case 1:return nextIndex<count?[4,enumerable[nextIndex++]]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})},getEnumeratorFactory=function(){return new Enumerator(arrIterator)}):null!=enumerable.GetEnumerator&&enumerable.GetEnumerator.GetType().IsFunction?(getEnumeratorFactory=function(){return enumerable.GetEnumerator()},null!=Object.getOwnPropertyDescriptor(enumerable,"Count")&&Object.defineProperty(this,"Count",{value:function(){return enumerable.Count()},enumerable:!1,configurable:!1})):getEnumeratorFactory=enumerable.GetType().IsFunction||"GeneratorFunction"==enumerable.GetType().Name?(generator=enumerable,function(){return new Enumerator(generator)}):(objIterator=function(){return __generator(this,function(_a){switch(_a.label){case 0:return[4,enumerable];case 1:return _a.sent(),[2]}})},function(){return new Enumerator(objIterator)}),Object.defineProperty(this,"GetEnumerator",{get:function(){return getEnumeratorFactory},enumerable:!1,configurable:!0})}return Enumerable.AddFunctionalMethod=function(func){if(null==func)throw new Accelatrix.ArgumentNullException("func");if(!func.GetType().IsFunction)throw new Accelatrix.ArgumentException("A named function needs to be passed to AddFunctionalMethod.");if(String.IsNullOrWhiteSpace(func.name))throw new Accelatrix.ArgumentException("A named function needs to be passed and the one you provided does not have a name.");Enumerable.prototype[func.name]=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var result=func.bind(this).apply(this,args),parentOJson=this.toJSON.bind(this);return result.toJSON=function(){var parent=parentOJson();return parent.Members.push({Op:func.name,Args:args}),parent},result}},Enumerable.prototype.GetEnumerator=function(){return null},Enumerable.prototype.Any=function(){function getEnumeratorFactory(){return new Enumerator(newIterator)}var myEnumerator=this.GetEnumerator(),result=myEnumerator.MoveNext(),element=myEnumerator.Current,newIterator=function(){return __generator(this,function(_a){switch(_a.label){case 0:return[4,element];case 1:_a.sent(),_a.label=2;case 2:return myEnumerator.MoveNext()?[4,myEnumerator.Current]:[3,4];case 3:return _a.sent(),[3,2];case 4:return[2]}})};return Object.defineProperty(this,"GetEnumerator",{get:function(){return getEnumeratorFactory},enumerable:!1,configurable:!0}),Object.defineProperty(this,"Any",{value:function(){return result}}),Object.defineProperty(this,"FirstOrNull",{value:function(){return null==element?null:element}}),result},Object.defineProperty(Enumerable.prototype,"length",{get:function(){return this.ToArray()},enumerable:!1,configurable:!0}),Object.defineProperty(Enumerable.prototype,0,{get:function(){return this.FirstOrNull()},enumerable:!1,configurable:!0}),Object.defineProperty(Enumerable.prototype,1,{get:function(){return this.ToArray(),this.Skip(1).FirstOrNull()},enumerable:!1,configurable:!0}),Enumerable.prototype.toJSON=function(){return{$type:this.GetType().GetFullName(),Members:[]}},Enumerable.prototype.ToList=function(){for(var myEnumerator=this.GetEnumerator(),result=[];myEnumerator.MoveNext();)result.push(myEnumerator.Current);return result},Enumerable.prototype.Count=function(){return this.ToArray()},Enumerable.prototype.ToArray=function(){for(var list=this.ToList(),newCommittedEnumeration=new Enumerable(list),count=list.length,i=0;i<count;i++)0==i?Object.defineProperty(this,0,{get:function(){return list[0]},enumerable:!0,configurable:!1}):1==i?Object.defineProperty(this,1,{get:function(){return list[1]},enumerable:!0,configurable:!1}):this[i]=list[i];return Object.defineProperty(this,"Count",{value:function(){return count},enumerable:!1,configurable:!1}),Object.defineProperty(this,"GetEnumerator",{get:function(){return newCommittedEnumeration.GetEnumerator},enumerable:!1,configurable:!1}),Object.defineProperty(this,"ToArray",{value:function(){return count},enumerable:!1,configurable:!1}),count},Enumerable.prototype.ForEach=function(action){for(var myEnumerator=this.GetEnumerator(),index=0,proceed=!0;proceed&&myEnumerator.MoveNext();)var result=null==action||action(myEnumerator.Current,index++),proceed=null==result||!(!1===result)},Enumerable.prototype.OfType=function(typeConstructorOrType){return this.Where(function(z){return null==z||z.GetType().IsOfType(typeConstructorOrType)}).Select(function(z){return z})},Enumerable.prototype.Select=function(selector){var me=this;return new this.constructor(function(){var myEnumerator,index;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=0,_a.label=1;case 1:return myEnumerator.MoveNext()?[4,null==selector?myEnumerator.Current:selector(myEnumerator.Current,index++)]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})})},Enumerable.prototype.Concat=function(second){if(null==second)return this;second.GetType().IsArray&&(second=new Enumerable(second));var me=this,secondEnumerator=second.GetEnumerator();return new this.constructor(function(){var myEnumerator;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),_a.label=1;case 1:return myEnumerator.MoveNext()?[4,myEnumerator.Current]:[3,3];case 2:return _a.sent(),[3,1];case 3:return secondEnumerator.MoveNext()?[4,secondEnumerator.Current]:[3,5];case 4:return _a.sent(),[3,3];case 5:return[2]}})})},Enumerable.prototype.SelectMany=function(selector){var me=this;return new this.constructor(function(){var myEnumerator,index,children;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=0,_a.label=1;case 1:if(!myEnumerator.MoveNext())return[3,5];if(null==(children=new Enumerable(null==selector?myEnumerator.Current:selector(myEnumerator.Current,index++))))return[3,4];children=children.GetEnumerator(),_a.label=2;case 2:return children.MoveNext()?[4,children.Current]:[3,4];case 3:return _a.sent(),[3,2];case 4:return[3,1];case 5:return[2]}})})},Enumerable.prototype.Where=function(selector){var me=this;return new this.constructor(function(){var myEnumerator,index;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=0,null==selector&&(selector=function(a,b){return!0}),_a.label=1;case 1:return myEnumerator.MoveNext()?selector(myEnumerator.Current,index++)?[4,myEnumerator.Current]:[3,3]:[3,4];case 2:_a.sent(),_a.label=3;case 3:return[3,1];case 4:return[2]}})})},Enumerable.prototype.FirstOrNull=function(){var myEnumerator=this.GetEnumerator();return myEnumerator.MoveNext(),void 0===myEnumerator.Current?null:myEnumerator.Current},Enumerable.prototype.LastOrNull=function(){var list=this.ToList();return 0==list.length?null:list[list.length-1]},Enumerable.prototype.Reverse=function(){return this.ToList().reverse()},Enumerable.prototype.NotNullOrEmpty=function(){return this.Where(function(z){return null!=z&&!String.IsNullOrWhiteSpace(z.toString())})},Enumerable.prototype.Contains=function(element){return this.Where(function(z){return Object.AreEqual(z,element)}).Any()},Enumerable.prototype.OrderBy=function(comparer){var list=this.ToList(),actualComparer=null==comparer?function(a,b){return EnumerableSystem.OrdinalComparer(a,b)}:function(a,b){return comparer.length<=1?EnumerableSystem.OrdinalComparer(comparer(a,void 0),comparer(b,void 0)):null==(b=comparer(a,b))||"Number"!=b.GetType()?EnumerableSystem.OrdinalComparer(a,b):b};return null==list?null:0==list.length?list:list.sort(function(a,b){return actualComparer(a,b)})},Enumerable.prototype.OrderByDescending=function(comparer){var list=this.ToList(),actualComparer=null==comparer?function(a,b){return EnumerableSystem.OrdinalComparer(a,b)}:function(a,b){return comparer.length<=1?EnumerableSystem.OrdinalComparer(comparer(a,void 0),comparer(b,void 0)):null==(b=comparer(a,b))||"Number"!=b.GetType()?EnumerableSystem.OrdinalComparer(a,b):b};return null==list?null:0==list.length?list:list.sort(function(a,b){return actualComparer(b,a)})},Enumerable.prototype.Distinct=function(equalityComparer){var me=this,popped=[],comparer=null!=equalityComparer?equalityComparer:function(a,b){return Object.AreEqual(a,b)};return new this.constructor(function(){var myEnumerator;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),_a.label=1;case 1:return myEnumerator.MoveNext()?function(element){if(0!=popped.length)for(var i=0;i<popped.length;i++){if(popped[i]==element)return!0;if(null!=popped[i]&&comparer(popped[i],element))return!0}return!1}(myEnumerator.Current)?[3,3]:(popped.push(myEnumerator.Current),[4,myEnumerator.Current]):[3,4];case 2:_a.sent(),_a.label=3;case 3:return[3,1];case 4:return[2]}})})},Enumerable.prototype.TakeWhileDistinct=function(){var me=this,popped=[];return new this.constructor(function(){var myEnumerator,stop;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),stop=!1,_a.label=1;case 1:return stop||!myEnumerator.MoveNext()?[3,5]:function(element){if(0!=popped.length)for(var i=0;i<popped.length;i++)if(Object.AreEqual(popped[i],element))return!0;return!1}(myEnumerator.Current)?[3,3]:(popped.push(myEnumerator.Current),[4,myEnumerator.Current]);case 2:return _a.sent(),[3,4];case 3:stop=!0,_a.label=4;case 4:return[3,1];case 5:return[2]}})})},Enumerable.prototype.SkipWhileDistinct=function(){var me=this,popped=[];return new this.constructor(function(){var myEnumerator,stopSkipping;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),stopSkipping=!1,_a.label=1;case 1:return myEnumerator.MoveNext()?(!function(element){if(0!=popped.length)for(var i=0;i<popped.length;i++)if(Object.AreEqual(popped[i],element))return!0;return!1}(myEnumerator.Current)?stopSkipping||popped.push(myEnumerator.Current):(stopSkipping=!0,popped=null),stopSkipping?[4,myEnumerator.Current]:[3,3]):[3,4];case 2:_a.sent(),_a.label=3;case 3:return[3,1];case 4:return[2]}})})},Enumerable.prototype.GroupBy=function(keySelector){var me=this,popped=[];return new this.constructor(function(){var poppedGroupCount,myEnumerator,lineEnumerator,groupsEnumerator,_loop_1,values;return __generator(this,function(_a){switch(_a.label){case 0:poppedGroupCount=0,myEnumerator=me.GetEnumerator(),lineEnumerator=new Enumerable(function(){var i,_loop_2;return __generator(this,function(_a){switch(_a.label){case 0:i=0,_loop_2=function(){var transformed,poppedEntry;return __generator(this,function(_a){switch(_a.label){case 0:return transformed=keySelector(myEnumerator.Current,i++),poppedEntry=popped.Where(function(z){return Object.AreEqual(z.Key,transformed)}).FirstOrNull(),null==poppedEntry&&(poppedEntry={Key:transformed,Values:[]},popped.push(poppedEntry)),poppedEntry.Values.push(myEnumerator.Current),[4,poppedEntry];case 1:return _a.sent(),[2]}})},_a.label=1;case 1:return myEnumerator.MoveNext()?[5,_loop_2()]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})}).GetEnumerator(),groupsEnumerator=new Enumerable(function(){return __generator(this,function(_a){switch(_a.label){case 0:if(!lineEnumerator.MoveNext())return[3,4];_a.label=1;case 1:return poppedGroupCount<popped.length?[4,popped[++poppedGroupCount-1]]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[3,0];case 4:return[2]}})}).GetEnumerator(),_loop_1=function(){var currentKey,loadedValues;return __generator(this,function(_a){switch(_a.label){case 0:return currentKey=groupsEnumerator.Current.Key,loadedValues=groupsEnumerator.Current.Values,values=new Enumerable(function(){var nextIndex;return __generator(this,function(_a){switch(_a.label){case 0:nextIndex=0,_a.label=1;case 1:return nextIndex<loadedValues.length?[4,loadedValues[nextIndex++]]:[3,3];case 2:return _a.sent(),[3,1];case 3:if(!lineEnumerator.MoveNext())return[3,7];_a.label=4;case 4:return nextIndex<loadedValues.length?[4,loadedValues[nextIndex++]]:[3,6];case 5:return _a.sent(),[3,4];case 6:return[3,3];case 7:return[2]}})}),Object.defineProperty(values,"Key",{get:function(){return currentKey},enumerable:!0}),[4,values];case 1:return _a.sent(),[2]}})},_a.label=1;case 1:return groupsEnumerator.MoveNext()?[5,_loop_1()]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})})},Enumerable.prototype.GroupByConsecutive=function(keySelector){var me=this;return new this.constructor(function(){var myEnumerator,index,current,continueCycle,transformed,values,continueCycle2,newTransformed,valuesEnum;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=-1,continueCycle=!(current=void 0),_a.label=1;case 1:if(!continueCycle)return[3,3];if(void 0===current){if(index++,!myEnumerator.MoveNext())return continueCycle=!1,[3,3];current=myEnumerator.Current}for(transformed=null==keySelector?current:keySelector(current,index),values=[current],continueCycle2=!0;continueCycle2;){if(!myEnumerator.MoveNext()){continueCycle2=continueCycle=!1;break}index++,newTransformed=null==keySelector?myEnumerator.Current:keySelector(myEnumerator.Current,index),Object.AreEqual(transformed,newTransformed)?values.push(myEnumerator.Current):(current=myEnumerator.Current,continueCycle2=!1)}return valuesEnum=new Enumerable(values),Object.defineProperty(valuesEnum,"Key",{get:function(){return transformed}}),[4,valuesEnum];case 2:return _a.sent(),[3,1];case 3:return[2]}})})},Enumerable.prototype.Intersect=function(sequence){var me=this,what=null!=sequence&&sequence.GetType().IsArray?new Enumerable(sequence):sequence;return new this.constructor(function(){var myEnumerator,secondEnumerator,reachedEnd,popped,index,found,z,element;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),secondEnumerator=what.GetEnumerator(),reachedEnd=!1,popped=[],index=-1,_a.label=1;case 1:return myEnumerator.MoveNext()?(index++,reachedEnd||popped.length!=index||(secondEnumerator.MoveNext()?popped.unshift(secondEnumerator.Current):reachedEnd=!0),popped.Contains(myEnumerator.Current)?[4,myEnumerator.Current]:[3,3]):[3,7];case 2:return _a.sent(),[3,6];case 3:for(found=!1;!reachedEnd&&secondEnumerator.MoveNext();)if(z=secondEnumerator.Current,element=myEnumerator.Current,popped.unshift(z),Object.AreEqual(z,element)){found=!0;break}return found?[3,4]:(reachedEnd=!0,[3,6]);case 4:return[4,myEnumerator.Current];case 5:_a.sent(),_a.label=6;case 6:return[3,1];case 7:return[2]}})})},Enumerable.prototype.Except=function(sequence){var me=this,what=null!=sequence&&sequence.GetType().IsArray?new Enumerable(sequence):sequence;return new this.constructor(function(){var myEnumerator,secondEnumerator,reachedEnd,popped,index,found,z,element;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),secondEnumerator=what.GetEnumerator(),reachedEnd=!1,popped=[],index=-1,_a.label=1;case 1:return myEnumerator.MoveNext()?(index++,reachedEnd||popped.length!=index||(secondEnumerator.MoveNext()?popped.unshift(secondEnumerator.Current):reachedEnd=!0),popped.Contains(myEnumerator.Current)?[3,4]:[3,2]):[3,5];case 2:for(found=!1;!reachedEnd&&secondEnumerator.MoveNext();)if(z=secondEnumerator.Current,element=myEnumerator.Current,popped.unshift(z),Object.AreEqual(z,element)){found=!0;break}return found?[3,4]:(reachedEnd=!0,[4,myEnumerator.Current]);case 3:_a.sent(),_a.label=4;case 4:return[3,1];case 5:return[2]}})})},Enumerable.prototype.Union=function(sequence){var _this=this,sequence=null!=sequence&&null==sequence.Any?new Enumerable(sequence):sequence;return null!=sequence&&sequence.Any()?this.Concat(sequence.Where(function(z){return!_this.Contains(z)})):this},Enumerable.prototype.Skip=function(count){return this.Where(function(z,i){return count<=i})},Enumerable.prototype.Take=function(count){var me=this;return new this.constructor(function(){var myEnumerator,index;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),index=0,_a.label=1;case 1:return index++<count&&myEnumerator.MoveNext()?[4,myEnumerator.Current]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})})},Enumerable.prototype.SkipWhile=function(condition){var me=this;return new this.constructor(function(){var myEnumerator,endedSkipping;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),endedSkipping=!1,_a.label=1;case 1:return myEnumerator.MoveNext()?(endedSkipping=endedSkipping||null==condition||!condition(myEnumerator.Current))?[4,myEnumerator.Current]:[3,3]:[3,4];case 2:_a.sent(),_a.label=3;case 3:return[3,1];case 4:return[2]}})})},Enumerable.prototype.TakeWhile=function(condition){var me=this;return new this.constructor(function(){var myEnumerator,taking;return __generator(this,function(_a){switch(_a.label){case 0:myEnumerator=me.GetEnumerator(),taking=!0,_a.label=1;case 1:return taking&&myEnumerator.MoveNext()?(taking=(taking||null==condition)&&condition(myEnumerator.Current))?[4,myEnumerator.Current]:[3,3]:[3,4];case 2:_a.sent(),_a.label=3;case 3:return[3,1];case 4:return[2]}})})},Enumerable.prototype.Zip=function(second,resultSelector){var what=null!=second&&null==second.Any?new Enumerable(second):second,outputProducer=null!=resultSelector?resultSelector:function(element,second,index){return{item1:element,item2:second}};return this.Select(function(z,i){return{Element:z,Second:what.Skip(i).FirstOrNull()}}).Select(function(z,i){return outputProducer(z.Element,z.Second,i)})},Enumerable.prototype.Interleave=function(second){second=null!=second&&null==second.Any?new Enumerable(second):second;return null!=second&&second.Any()?this.Any()?this.Zip(second,function(a,b){return[a,b]}).SelectMany(function(z){return z}):second:this},Enumerable.prototype.ToDictionary=function(keySelector,valueSelector){var result={};return this.Select(function(z,i){return{Key:keySelector(z,i),Value:null==valueSelector?null:valueSelector(z,i)}}).ForEach(function(z){if(null!=result[z.Key])throw"An item with key '"+z.Key+"' already exists.";result[z.Key]=z.Value}),result},Enumerable.prototype.Sum=function(selector){var result,elements=(null==selector?this.Where(function(z){return null!=z}):this.Select(function(z,i){return selector(z,i)}).Where(function(z){return null!=z})).ToList();return 0==elements.length?0:null==(result=Accelatrix.Quantity.Add(elements))?null:"Number"==elements[0].GetType().Name?result.Amount:result},Enumerable.prototype.Average=function(selector){var isNumber,avg,elements=(null==selector?this.Where(function(z){return null!=z}):this.Select(function(z,i){return selector(z,i)}).Where(function(z){return null!=z})).ToList(),sum=elements.Sum();return null==sum?null:(isNumber="Number"==sum.GetType().Name,avg=isNumber?sum/elements.length:sum.Amount/elements.length,isNumber?avg:Object.isFrozen(sum)?[sum,avg-sum.Amount].Sum():(Object.defineProperty(sum,"Amount",{value:function(){return avg},enumerable:!0}),sum))},Enumerable.prototype.Max=function(selector){var result;return!this.Any()||null==(result=this.Select(function(z,i){return null==selector?z:selector(z,i)}).Where(function(z){return null!=z}).OrderByDescending(function(z){return null!=z&&"Date"==z.GetType().Name?z.getTime():null!=z.Amount?z.Amount:z}).FirstOrNull())?null:[result,0].Sum()},Enumerable.prototype.Min=function(selector){var result;return!this.Any()||null==(result=this.Select(function(z,i){return null==selector?z:selector(z,i)}).Where(function(z){return null!=z}).OrderBy(function(z){return null!=z&&"Date"==z.GetType().Name?z.getTime():null!=z.Amount?z.Amount:z}).FirstOrNull())?null:[result,0].Sum()},Enumerable.Range=function(start,count){var result;return null==start?null:((result=new Enumerable(function(){var item;return __generator(this,function(_a){switch(_a.label){case 0:item=start,_a.label=1;case 1:return null==count||item-start<count?[4,item++]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})})).toJSON=function(){return{$type:"Accelatrix.Enumerable",Members:[{Op:function(a,b){return Accelatrix.Enumerable.Range(a,b)},Args:[start,count]}]}},result)},__decorate([EnumerableSerialization.DataMember(!0),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],Enumerable.prototype,"OfType",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"Select",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],Enumerable.prototype,"Concat",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"SelectMany",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"Where",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Object)],Enumerable.prototype,"NotNullOrEmpty",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"Distinct",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Object)],Enumerable.prototype,"TakeWhileDistinct",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Object)],Enumerable.prototype,"SkipWhileDistinct",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"GroupBy",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"GroupByConsecutive",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],Enumerable.prototype,"Intersect",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],Enumerable.prototype,"Except",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],Enumerable.prototype,"Union",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Number]),__metadata("design:returntype",Object)],Enumerable.prototype,"Skip",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Number]),__metadata("design:returntype",Object)],Enumerable.prototype,"Take",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"SkipWhile",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"TakeWhile",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Function]),__metadata("design:returntype",Object)],Enumerable.prototype,"Zip",null),__decorate([EnumerableSerialization.DataMember(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],Enumerable.prototype,"Interleave",null),Enumerable}());Accelatrix.Enumerable=Enumerable,function(EnumerableSystem){EnumerableSystem.OrdinalComparer=function(first,second){return null==first&&null==second?0:null==first&&null!=second?1:null!=first&&null==second?-1:first==second||first.Equals(second)?0:second<first?1:-1}}(EnumerableSystem=EnumerableSystem||{})}(Accelatrix=Accelatrix||{}),Array.prototype.GetEnumerator=function(){return new Accelatrix.Enumerable(this).GetEnumerator()},Array.prototype.OfType=function(type){return new Accelatrix.Enumerable(this).OfType(type)},Array.prototype.Any=function(){return null!=this&&0<this.length},Array.prototype.ToList=function(){return this},Array.prototype.ForEach=function(action){new Accelatrix.Enumerable(this).ForEach(action)},Array.prototype.Concat=function(second){return new Accelatrix.Enumerable(this).Concat(second)},Array.prototype.Select=function(selector){return new Accelatrix.Enumerable(this).Select(selector)},Array.prototype.SelectMany=function(selector){return new Accelatrix.Enumerable(this).SelectMany(selector)},Array.prototype.Where=function(selector){return new Accelatrix.Enumerable(this).Where(selector)},Array.prototype.FirstOrNull=function(){return null!=this&&this.Any()?this[0]:null},Array.prototype.LastOrNull=function(){return null!=this&&this.Any()?this[this.length-1]:null},Array.prototype.Reverse=function(){return this.reverse()},Array.prototype.NotNullOrEmpty=function(){return new Accelatrix.Enumerable(this).NotNullOrEmpty()},Array.prototype.Contains=function(element){for(var i=0;i<this.length;i++){var z=this[i];if(z==element||null===z&&null===element||void 0===z&&void 0===element||null!=z&&z.Equals(element))return!0}return!1},Array.prototype.OrderBy=function(comparer){return new Accelatrix.Enumerable(this).OrderBy(comparer)},Array.prototype.OrderByDescending=function(comparer){return new Accelatrix.Enumerable(this).OrderByDescending(comparer)},Array.prototype.Distinct=function(){return new Accelatrix.Enumerable(this).Distinct()},Array.prototype.TakeWhileDistinct=function(){return new Accelatrix.Enumerable(this).TakeWhileDistinct()},Array.prototype.SkipWhileDistinct=function(){return new Accelatrix.Enumerable(this).SkipWhileDistinct()},Array.prototype.GroupBy=function(keySelector){return new Accelatrix.Enumerable(this).GroupBy(keySelector)},Array.prototype.GroupByConsecutive=function(keySelector){return new Accelatrix.Enumerable(this).GroupByConsecutive(keySelector)},Array.prototype.Intersect=function(sequence){return new Accelatrix.Enumerable(this).Intersect(sequence)},Array.prototype.Except=function(sequence){return new Accelatrix.Enumerable(this).Except(sequence)},Array.prototype.Union=function(sequence){return new Accelatrix.Enumerable(this).Union(sequence)},Array.prototype.Skip=function(count){return new Accelatrix.Enumerable(this).Skip(count)},Array.prototype.Take=function(count){return new Accelatrix.Enumerable(this).Take(count)},Array.prototype.SkipWhile=function(condition){return new Accelatrix.Enumerable(this).SkipWhile(condition)},Array.prototype.TakeWhile=function(condition){return new Accelatrix.Enumerable(this).TakeWhile(condition)},Array.prototype.Zip=function(second,resultSelector){return new Accelatrix.Enumerable(this).Zip(second,resultSelector)},Array.prototype.Interleave=function(second){return new Accelatrix.Enumerable(this).Interleave(second)},Array.prototype.ToDictionary=function(keySelector,valueSelector){return new Accelatrix.Enumerable(this).ToDictionary(keySelector,valueSelector)},Array.prototype.Sum=function(selector){return new Accelatrix.Enumerable(this).Sum(selector)},Array.prototype.Average=function(selector){return new Accelatrix.Enumerable(this).Average(selector)},Array.prototype.Max=function(selector){return new Accelatrix.Enumerable(this).Max(selector)},Array.prototype.Min=function(selector){return new Accelatrix.Enumerable(this).Min(selector)},Object.defineProperty(Object,"FlattenHierarchy",{value:function(obj,childEnumerator){if(null==obj)return null;try{return null!=childEnumerator&&null!=childEnumerator(obj)?[obj].Concat(childEnumerator(obj).SelectMany(function(z){return null==z?[]:Object.FlattenHierarchy(z,childEnumerator)})):[obj]}catch(e){return[obj]}},enumerable:!1});
var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},Accelatrix;!function(Accelatrix_1){var Serialization;!function(Serialization){function FromJSON(json,type){return SerializationSystem.ParseJSON(json,type)}function ToJSON(obj){return SerializationSystem.Stringify(obj)}function KnownType(constructorOrAlias){return constructorOrAlias instanceof Function?(SerializationSystem.RegisterKnownType(constructorOrAlias),constructorOrAlias):function(ctor){return null!=ctor&&(SerializationSystem.RegisterKnownType(ctor,constructorOrAlias),null==ctor.__proto__.$type)&&Object.defineProperty(ctor.__proto__,"$type",{get:function(){return constructorOrAlias},enumerable:!0}),ctor}}function DataMember(include){return function(target,propertyKey,descriptor){SerializationSystem.EnrichKnownType(target,null,null,null,null,{propertyKey:propertyKey,include:include})}}function OnSerializing(){return function(target,propertyKey,descriptor){SerializationSystem.EnrichKnownType(target,target[propertyKey],null,null,null)}}function OnSerialized(){return function(target,propertyKey,descriptor){SerializationSystem.EnrichKnownType(target,null,target[propertyKey],null,null)}}function OnDeserializing(){return function(target,propertyKey,descriptor){SerializationSystem.EnrichKnownType(target,null,null,target[propertyKey],null)}}function OnDeserialized(){return function(target,propertyKey,descriptor){SerializationSystem.EnrichKnownType(target,null,null,null,target[propertyKey])}}var SerializationSystem;Serialization.FromJSON=FromJSON,Serialization.ToJSON=ToJSON,Serialization.KnownType=KnownType,Serialization.DataMember=DataMember,Serialization.OnSerializing=OnSerializing,Serialization.OnSerialized=OnSerialized,Serialization.OnDeserializing=OnDeserializing,Serialization.OnDeserialized=OnDeserialized,!function(SerializationSystem){var knownTypes=[],base64RegEx=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;function ParseJSON(json,type){if(String.IsNullOrWhiteSpace(json))throw new Accelatrix.ArgumentNullException("json");var targetType;if(null!=type&&"String"==type.GetType().Name){var myType=Accelatrix.Type.FromName(type);if(null==myType||0==myType.length)throw new Accelatrix.TypeNotFoundException(type);if(1!=myType.length)throw new Accelatrix.AmbiguousTypeException(type,null,myType);targetType=myType[0]}else targetType=null!=type&&type.GetType().IsFunction?Accelatrix.Type.FromConstructor(type):type;var rootObj=null,result=JSON.parse(json,function(key,value){if(null==rootObj&&(rootObj=this),null!=value&&value instanceof Object){var proposedType=void 0;if(String.IsNullOrWhiteSpace(value.$type))if(this==rootObj)proposedType=GetPropertyType(targetType,key);else try{var myType=GetTypeFromHint(this.$type);proposedType=GetPropertyType(myType,key)}catch(ex2){}else try{proposedType=GetTypeFromHint(value.$type)}catch(ex){if(this==rootObj)proposedType=GetPropertyType(targetType,key);else try{var myType=GetTypeFromHint(this.$type),proposedType=GetPropertyType(myType,key)}catch(ex2){}}null==proposedType||proposedType.IsPrimitive||(value=ObjectToClass(value,proposedType))}else if(null!=value&&"String"==value.GetType().Name){var prefix;if(!String.IsNullOrWhiteSpace(value)&&0==value.indexOf("base64,")&&base64RegEx.test(value.substring(7)))try{return Uint8Array.FromBase64(value.substring(7))}catch(ex){}else if(8<=value.length)return prefix=value.substring(0,8),"function"===prefix?eval("("+value+")"):"_PxEgEr_"===prefix||"_NuFrRa_"===prefix?eval(value.slice(8)):value}return value}),resultType;return null==result||(Object.UnboxDates(result),resultType=result.GetType(),resultType.IsPrimitive&&"Object"!=resultType.Name)||resultType.IsPrimitive&&null==targetType&&(null==result||String.IsNullOrWhiteSpace(result.$type)||(targetType=GetTypeFromHint(result.$type)),"Object"==resultType.Name)&&null!=targetType&&"Object"!=targetType.Name&&(result=ObjectToClass(result,targetType)),result}function GetTypeFromHint(typeName){var candidates=Accelatrix.Type.FromName(typeName);if(null==candidates||0==candidates.length)throw new Accelatrix.TypeNotFoundException(typeName);if(1!=candidates.length)throw new Accelatrix.AmbiguousTypeException(typeName);return candidates[0]}function GetPropertyType(type,propertyName){return null==type||String.IsNullOrWhiteSpace(propertyName)||0==(type=type.GetProperties().map(function(z){return{Name:z.Name,Type:z.Type}}).concat(type.GetFields().map(function(z){return{Name:z.Name,Type:z.Type}})).filter(function(z){return z.Name==propertyName}).map(function(z){return z.Type}).filter(function(z){return null!=z})).length?null:type[0]}function FillInstance(target,from){null!=from&&null!=target&&Object.keys(from).filter(function(z){return null!=from[z]}).forEach(function(z){var isNull=null==target[z];try{target[z]=from[z]}catch(ex){isNull&&Object.defineProperty(target,z,{get:function(){return from[z]},enumerable:!0})}})}function ObjectToClass(obj,type){if(type.IsOfType(Accelatrix.Enumerable))return ObjectToEnumerable(obj,type);var newValue;try{newValue=type.CreateNewInstance(obj)}catch(ex){newValue=obj}type=GetKnownType(type);null!=type&&null!=type.OnDeserializing&&type.OnDeserializing.bind(newValue)();try{FillInstance(newValue,obj)}catch(ex){newValue=obj}return null!=type&&null!=type.OnDeserialized&&type.OnDeserialized.bind(newValue)(),newValue}function ObjectToEnumerable(obj,enumerableType){var obj=obj.Members,firstMember=obj[0].Op,result=null==(firstMember=firstMember instanceof Function?firstMember.apply(null,obj[0].Args):firstMember)?enumerableType.CreateNewInstance([obj[0]]):enumerableType.CreateNewInstance([firstMember]);return obj.Skip(1).ForEach(function(z){return result=result[z.Op].apply(result,z.Args)}),result}function Stringify(obj){var pendingSerialized=null,obj=JSON.stringify(obj,function(key,value){null!=pendingSerialized&&(pendingSerialized(),pendingSerialized=null);var func,isFunction=value instanceof Function||"function"==typeof value,isObject=!isFunction&&null!=value&&value instanceof Object,objectType=isObject?value.GetType():null,objectKnownType=GetKnownType(objectType);if(isObject&&HandleDataMembersOnSerialization(value,objectKnownType),null!=objectKnownType&&null!=objectKnownType.OnSerializing&&(func=(func=objectKnownType.OnSerializing).bind(value))(),null!=objectKnownType&&null!=objectKnownType.OnSerialized&&(func=(func=objectKnownType.OnSerialized).bind(value),pendingSerialized=func),isObject&&String.IsNullOrWhiteSpace(value.$type)){if(!objectType.IsArray)return"Object"==(objectKnownType=value.GetType().GetFullName())?value:__assign({$type:objectKnownType},value);if("Uint8Array"==objectType.Name)return"base64,"+value.ToBase64()}else{if(isFunction)return(func=value.toString()).length<8||"function"!==func.substring(0,8)?"_NuFrRa_"+func:func;if(value instanceof RegExp)return"_PxEgEr_"+value}return value});return null!=pendingSerialized&&(pendingSerialized(),pendingSerialized=null),obj}function RegisterKnownType(type,alias){alias=type instanceof Function?Accelatrix.Type.FromConstructor(type,alias):type;if(null!=type)return null==(type=GetKnownType(alias))&&knownTypes.push(type={Type:alias,OnSerializing:null,OnSerialized:null,OnDeserializing:null,OnDeserialized:null,DataMembers:{}}),type}function GetKnownType(type){if(null!=type){for(var entry,i=0;i<knownTypes.length;i++)if(knownTypes[i].Type==type){entry=knownTypes[i];break}return entry}}function EnrichKnownType(target,onSerializing,onSerialized,onDeserializing,onDeserialized,dataMember){var target=null==target?target:target.constructor;if(null!=target)return target=RegisterKnownType(Accelatrix.Type.FromConstructor(target)),null!=onSerializing&&(target.OnSerializing=onSerializing),null!=onSerialized&&(target.OnSerialized=onSerialized),null!=onDeserializing&&(target.OnDeserializing=onDeserializing),null!=onDeserialized&&(target.OnDeserialized=onDeserialized),null!=dataMember&&(target.DataMembers[dataMember.propertyKey]=null==dataMember.include||!0===dataMember.include,target.ResolvedDataMembers=GetDataMembers(target.Type)),target}function GetDataMembers(type){var result={};if(null!=type)for(var myType=type;null!=myType;)!function(){var forMe=GetKnownType(myType);null!=forMe&&Object.keys(forMe.DataMembers).filter(function(z){return null==result[z]}).forEach(function(z){return result[z]={Type:myType,Include:forMe.DataMembers[z]}}),myType=myType.BaseType}();return result}function HandleDataMembersOnSerialization(obj,knownType){var dataMembers;null!=knownType&&null!=(dataMembers=knownType.ResolvedDataMembers)&&0!=Object.keys(dataMembers).length&&Object.keys(dataMembers).map(function(z){return{MemberName:z,Include:dataMembers[z].Include,Type:dataMembers[z].Type}}).forEach(function(z){var target,desc=Object.getOwnPropertyDescriptor(obj,z.MemberName),inherited=!1;null==desc&&(inherited=!0,target=z.Type.GetConstructor().prototype,desc=Object.getOwnPropertyDescriptor(target,z.MemberName)),null!=desc&&(null!=desc.get?!inherited&&desc.enumerable&&z.Include||inherited&&!z.Include||((target=desc.get).bind(obj),Object.defineProperty(obj,z.MemberName,{get:target,enumerable:z.Include})):null==desc.value||!inherited&&desc.enumerable&&z.Include||z.Include!=desc.enumerable&&Object.defineProperty(obj,z.MemberName,{value:desc.value,enumerable:z.Include}))})}SerializationSystem.ParseJSON=ParseJSON,SerializationSystem.Stringify=Stringify,SerializationSystem.RegisterKnownType=RegisterKnownType,SerializationSystem.EnrichKnownType=EnrichKnownType}(SerializationSystem=SerializationSystem||{})}(Serialization=Accelatrix_1.Serialization||(Accelatrix_1.Serialization={}))}(Accelatrix=Accelatrix||{});
var Accelatrix;!function(Accelatrix){var AsyncChainer=function(){function AsyncChainer(){this.workStarted=!1,this.hasCalledBack=!1,this.hasResolved=!1,this.hasDeferred=!1,this.workload=[],this.callback=null,this.failed=null,this.doneCount=0,this.lastNonNullResult=null,this.accumulatedResult={},this.finally=null,this.then=this.Then,this.catch=this.Catch,this.$type="AsyncChainer"}return AsyncChainer.Run=function(work){var workload,result;return null==work?AsyncChainer.Empty():Array.isArray(work)?(workload=work).Any()?(result=(new AsyncChainer).Run(workload[0]),workload.Skip(1).ForEach(function(z){return result.Run(z)}),result):AsyncChainer.Empty():(new AsyncChainer).Run(work)},AsyncChainer.RunToMap=function(work){var result=new AsyncChainer;return Object.keys(work).ForEach(function(z){return result.workload.push({Work:work[z],Canceller:null,Name:z})}),result},AsyncChainer.Empty=function(selfResolving){var result=new AsyncChainer;return selfResolving&&setTimeout(function(){return result.Resolve(null)},0),result},AsyncChainer.Frozen=function(){var result=new AsyncChainer;return result.workStarted=!0,result},AsyncChainer.prototype.Run=function(work){return this.workload.push({Work:work,Canceller:null}),this},AsyncChainer.prototype.Then=function(callback){return this.callback=callback,this.Work(),this},AsyncChainer.prototype.Catch=function(callback){return this.failed=callback,this.Work(),this},AsyncChainer.prototype.Cancel=function(){var abortException,failedFunction;this.hasDeferred||this.hasResolved||(this.hasResolved=!0,this.hasDeferred=!0,abortException=new Accelatrix.AbortException,failedFunction=this.failed,this.failed=null,this.AbortWorkload(),null!=failedFunction&&failedFunction(abortException))},AsyncChainer.prototype.ContinueWith=function(onResult){var next=new AsyncChainer;return next.workStarted=!0,this.Then(function(result){null!=onResult&&(next.Run(function(){return onResult(result)}),null==next.callback&&null==next.finally||(next.workStarted=!1,next.Work()))}).Catch(function(ex){next.Defer(ex)}),next},AsyncChainer.prototype.Resolve=function(result){if(this.doneCount+=1,null!=result&&(this.lastNonNullResult=result),this.doneCount>=this.workload.length&&null!=this.callback&&!this.hasResolved){this.hasResolved=!0;try{0==Object.keys(this.accumulatedResult).length?this.callback(this.lastNonNullResult):this.callback(this.accumulatedResult)}catch(ex){this.Defer(ex)}finally{null!=this.finally&&this.finally(),this.finally=null}}},AsyncChainer.prototype.Defer=function(exception){if(!this.hasDeferred&&(this.hasDeferred=!0,null!=this.failed)){exception=null==exception?new Accelatrix.Exception:exception;try{this.failed(exception)}finally{null!=this.finally&&this.finally(),this.finally=null}}},AsyncChainer.prototype.Finally=function(finallyCallback){return this.finally=finallyCallback,this.Work(),this},AsyncChainer.prototype.Work=function(){var me;this.workStarted||(this.workStarted=!0,0==(me=this).workload.length?setTimeout(function(){return me.Resolve(null)},0):me.workload.forEach(function(z,index){setTimeout(function(){try{var result=z.Work();me.UnpackCanceller(result,index),null!=z.Name&&"function"!=typeof result&&(me.accumulatedResult[z.Name]=result),void 0!==result&&(null!=result&&null!=result.GetType&&"AsyncChainer"==result.GetType().Name?null==result.callback?(result.Then(function(result){me.UnpackCanceller(null,index),null!=z.Name&&"function"!=typeof result&&(me.accumulatedResult[z.Name]=result),me.Resolve(result)}),result.Catch(function(e){me.UnpackCanceller(null,index),null!=me.failed&&(me.hasCalledBack=!0,me.failed(e))})):me.doneCount+=1:null!=result&&null!=result.Then&&"function"==typeof result.Then?(result.Then(function(result){me.UnpackCanceller(null,index),null!=z.Name&&"function"!=typeof result&&(me.accumulatedResult[z.Name]=result),me.Resolve(result)}),result.Catch(function(e){me.UnpackCanceller(null,index),null!=me.failed&&(me.hasCalledBack=!0,me.failed(e))})):null!=result&&null!=result.then&&"function"==typeof result.then?(result.then(function(result){me.UnpackCanceller(null,index),null!=z.Name&&"function"!=typeof result&&(me.accumulatedResult[z.Name]=result),me.Resolve(result),me.UnpackCanceller(null,index)}),result.catch(function(e){null!=me.failed&&(me.hasCalledBack=!0,me.failed(e))})):me.doneCount+=1),me.doneCount>=me.workload.length&&null!=me.callback&&!me.hasCalledBack&&(me.hasCalledBack=!0,0==Object.keys(me.accumulatedResult).length?me.callback(result):me.callback(me.accumulatedResult))}catch(e){return null!=me.failed&&(me.hasCalledBack=!0,me.failed(e)),!1}},0)}))},AsyncChainer.prototype.UnpackCanceller=function(result,workloadIndex){this.workload[workloadIndex].Canceller=null!=result&&null!=result.Cancel&&"function"==typeof result.Cancel?result.Cancel:null!=result&&null!=result.cancel&&"function"==typeof result.cancel?result.cancel:null},AsyncChainer.prototype.AbortWorkload=function(){this.workload.Where(function(z){return null!=z.Canceller}).ForEach(function(z){return z.Canceller()})},AsyncChainer}();Accelatrix.AsyncChainer=AsyncChainer}(Accelatrix=Accelatrix||{});
var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Accelatrix;!function(Accelatrix){var Tasks=function(){function Tasks(){}return Object.defineProperty(Tasks,"Config",{get:function(){return TaskScheduler.config},enumerable:!1,configurable:!0}),Tasks}(),TaskScheduler,ScriptHandler;Accelatrix.Tasks=Tasks,!function(Tasks){!function(TaskScriptSource){TaskScriptSource.Url="Url",TaskScriptSource.PlainText="PlainText"}(Tasks.TaskScriptSource||(Tasks.TaskScriptSource={})),function(TaskStatus){TaskStatus[TaskStatus.Created=0]="Created",TaskStatus[TaskStatus.WaitingForActivation=1]="WaitingForActivation",TaskStatus[TaskStatus.WaitingToRun=2]="WaitingToRun",TaskStatus[TaskStatus.Running=3]="Running",TaskStatus[TaskStatus.WaitingForChildrenToComplete=4]="WaitingForChildrenToComplete",TaskStatus[TaskStatus.RanToCompletion=5]="RanToCompletion",TaskStatus[TaskStatus.Canceled=6]="Canceled",TaskStatus[TaskStatus.Faulted=7]="Faulted"}(TaskStatus=Tasks.TaskStatus||(Tasks.TaskStatus={}));var TaskStatus,TaskException=function(_super){function TaskException(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(TaskException,_super),TaskException}(Accelatrix.Exception),TaskException=function(_super){function TaskAbortException(message){return _super.call(this,String.IsNullOrWhiteSpace(message)?"Task is being aborted.":message)||this}return __extends(TaskAbortException,_super),TaskAbortException}(Tasks.TaskException=TaskException),TaskPromise=(Tasks.TaskAbortException=TaskException,function(){function TaskPromise(task,changeResolver,changeRejector,changeFinallizer){var _this=this;Object.defineProperty(this,"Cancel",{enumerable:!1,configurable:!1,value:function(){task.Cancel()}}),Object.defineProperty(this,"then",{enumerable:!1,configurable:!1,value:function(onfulfilled){return changeResolver(onfulfilled),_this}}),Object.defineProperty(this,"Then",{enumerable:!1,configurable:!1,value:function(onfulfilled){return changeResolver(onfulfilled),_this}}),Object.defineProperty(this,"catch",{enumerable:!1,configurable:!1,value:function(onrejected){return changeRejector(onrejected),_this}}),Object.defineProperty(this,"Catch",{enumerable:!1,configurable:!1,value:function(onrejected){return changeRejector(onrejected),_this}}),Object.defineProperty(this,"Finally",{enumerable:!1,configurable:!1,value:function(onFinished){return changeFinallizer(onFinished),_this}})}return TaskPromise.prototype.Then=function(onfulfilled){return this},TaskPromise.prototype.then=function(onfulfilled){return this},TaskPromise.prototype.Catch=function(onrejected){return this},TaskPromise.prototype.catch=function(onrejected){return this},TaskPromise.prototype.Cancel=function(){return this},TaskPromise.prototype.Finally=function(callback){return this},TaskPromise}()),TaskException=function(_super){function Task(action,arg0,arg1,arg2){if(null==action)throw new Accelatrix.ArgumentNullException("action");return _super.call(this,[action],void 0===arg0?null:[arg0,arg1,arg2].TakeWhile(function(z){return void 0!==z}).ToList())||this}return __extends(Task,_super),Object.defineProperty(Task.prototype,"Activity",{get:function(){return null},enumerable:!1,configurable:!0}),Task.StartNew=function(action,arg0,arg1,arg2){action=new Task(action,arg0,arg1,arg2);return TaskScheduler.Enqueue(action),action},Task}(function(){function TaskBase(actions,inputArguments){var _this=this;if(null==actions||!actions.Any())throw new Accelatrix.ArgumentNullException("actions");var me=this,resolver=function(){},rejector=function(){},finalizer=function(){},myPromise=new TaskPromise(this,function(newResolver){return resolver=newResolver},function(newRejector){return rejector=newRejector},function(newFinalizer){return finalizer=newFinalizer}),workRoster=(Object.defineProperty(this,"GetAwaiter",{value:function(){return myPromise},enumerable:!1,configurable:!1}),{Actions:null==actions?null:actions.TakeWhile(function(z){return null==z||null==z.Start}),InputArguments:inputArguments}),setResult=(Object.defineProperty(this,"Activity",{get:function(){return workRoster},enumerable:!1}),function(value){if(!(_this.Status>=TaskStatus.RanToCompletion)){Object.defineProperty(_this,"Result",{get:function(){return value},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Exception",{get:function(){},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Status",{get:function(){return TaskStatus.RanToCompletion},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"IsComplete",{get:function(){return!0},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Cancel",{value:function(){},enumerable:!1,configurable:!1});try{null!=resolver&&resolver(value)}catch(e){}finally{null!=finalizer&&finalizer(me)}}});Object.defineProperty(this,"Result",{get:function(){},set:setResult,enumerable:!1,configurable:!0}),Object.defineProperty(this,"Exception",{get:function(){},set:function(value){_this.Status!=TaskStatus.Canceled&&Object.defineProperty(_this,"Status",{get:function(){return TaskStatus.Faulted},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Result",{get:function(){},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Exception",{get:function(){return value},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Cancel",{value:function(){},enumerable:!1,configurable:!1});try{null!=rejector&&rejector(value)}catch(e){}finally{null!=finalizer&&finalizer(me)}},enumerable:!1,configurable:!0}),Object.defineProperty(this,"Start",{value:function(){return _this.Status==TaskStatus.Created&&(_this.IsActionless?setTimeout(function(){return setResult(void 0)},0):TaskScheduler.Enqueue(_this)),myPromise},enumerable:!1,configurable:!1});Object.defineProperty(this,"Cancel",{value:function(exception){if(!(_this.IsCanceled||_this.IsCompleted||_this.IsFaulted)){_this.Status<TaskStatus.RanToCompletion&&TaskScheduler.RemovePendingTask(_this),Object.defineProperty(_this,"Status",{get:function(){return TaskStatus.Canceled},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"IsCanceled",{get:function(){return!0},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Result",{get:function(){},set:function(){return[]},enumerable:!1,configurable:!1});var abort=null!=exception?exception:new Tasks.TaskAbortException;Object.defineProperty(_this,"Exception",{get:function(){return abort},set:function(){return[]},enumerable:!1,configurable:!1}),Object.defineProperty(_this,"Cancel",{value:function(){},enumerable:!1,configurable:!1});try{null!=rejector&&rejector(abort)}catch(e){}finally{null!=finalizer&&finalizer(me)}}},enumerable:!1,configurable:!0})}return Object.defineProperty(TaskBase.prototype,"Status",{get:function(){return TaskStatus.Created},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"Result",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"Exception",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"IsFaulted",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"IsCompleted",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"IsCanceled",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"IsActionless",{get:function(){return null==this.Activity.Actions||!this.Activity.Actions.Any()||null==this.Activity.Actions[0]},enumerable:!1,configurable:!0}),Object.defineProperty(TaskBase.prototype,"IsNested",{get:function(){return null!=self.__WebWorkerNestingLevel__},enumerable:!1,configurable:!0}),TaskBase.prototype.Start=function(){return null},TaskBase.prototype.Cancel=function(exception){},TaskBase.prototype.GetAwaiter=function(){return null},TaskBase.CancelAll=function(){TaskScheduler.CancelAll()},TaskBase}());Tasks.Task=TaskException}(Tasks=Accelatrix.Tasks||(Accelatrix.Tasks={})),!function(TaskScheduler){var _a,maxParallelism=8,webWorkersCode=`var AccelatrixWebWorker,WebWorkerUtil,__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};!function(){var isWebWorker=!String.IsNullOrWhiteSpace(self.__WebWorkerScripts__),isWorking=!1;isWebWorker&&self.addEventListener("message",function(e){"Abort"==e.data?isWorking&&Accelatrix.Tasks.Task.CancelAll():"Workload"==(e=Accelatrix.Serialization.FromJSON(e.data)).GetType().Name&&(e=e,isWorking=!0,Accelatrix.Tasks.Config.MaxParallelism=e.MaxParallelismForChildren,null!=e.Culture&&(Accelatrix.Globalization.DefaultFormatting=e.Culture),WebWorkerUtil.WorkOnSequenceOfActivities(e.ChainOfActions,e.InputArguments,function(result,ex){isWorking=!1,null!=ex&&setTimeout(function(){throw ex},0);result=new WebWorkerUtil.WorkloadResult(result);self.postMessage(Accelatrix.Serialization.ToJSON(result),null)}))})}(AccelatrixWebWorker=AccelatrixWebWorker||{}),function(WebWorkerUtil){WebWorkerUtil.WorkOnSequenceOfActivities=function WorkOnSequenceOfActivities(activities,inputArgs,callback){function handleResult(r,e){var next=activities.Skip(1);next.Any()&&null==e?WorkOnSequenceOfActivities(next,[r],callback):callback(r,e)}var result=void 0;try{result=activities[0].GetType().IsFunction?activities[0].apply(null,null==inputArgs?null:null==inputArgs.Any?[inputArgs]:inputArgs.Any()?inputArgs:null):activities[0]}catch(ex){return void handleResult(null,ex)}IsPromise(result)?(result.then(function(r){handleResult(r,null)}),result.catch(function(e){handleResult(null,e)})):IsTask(result)?(inputArgs=result,Accelatrix.Tasks.Config.MaxParallelism<=0?WorkOnSequenceOfActivities(inputArgs.Activity.Actions,inputArgs.Activity.InputArguments,handleResult):inputArgs.IsCanceled||inputArgs.IsFaulted?handleResult(null,inputArgs.Exception):inputArgs.IsCompleted?handleResult(inputArgs.Result,null):inputArgs.Start().Finally(function(t){return handleResult(t.Result,t.Exception)})):IsAwaitable(result)?((inputArgs=result.GetAwaiter()).then(function(r){handleResult(r,null)}),inputArgs.catch(function(e){handleResult(null,e)})):null!=result&&result.GetType().IsFunction?WorkOnSequenceOfActivities([result].Concat(activities.Skip(1)),null,callback):handleResult(result,null)};var Workload=function(){function Workload(chainOfActions,inputArguments,maxParallelismForChildren,cultureChange){if(null==chainOfActions||!chainOfActions.Any())throw new Accelatrix.ArgumentNullException("chainOfActions");Object.defineProperty(this,"ChainOfActions",{get:function(){return chainOfActions},enumerable:!0}),Object.defineProperty(this,"InputArguments",{get:function(){return null==inputArguments?[]:inputArguments},enumerable:!0}),Object.defineProperty(this,"MaxParallelismForChildren",{get:function(){return maxParallelismForChildren},enumerable:!0}),Object.defineProperty(this,"Culture",{get:function(){return cultureChange},enumerable:!0})}return Object.defineProperty(Workload.prototype,"ChainOfActions",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Workload.prototype,"MaxParallelismForChildren",{get:function(){return 8},enumerable:!1,configurable:!0}),Object.defineProperty(Workload.prototype,"InputArguments",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(Workload.prototype,"Culture",{get:function(){return null},enumerable:!1,configurable:!0}),__decorate([Accelatrix.Serialization.KnownType("WebWorkerUtil.Workload"),__metadata("design:paramtypes",[Array,Array,Number,Object])],Workload)}(),Workload=(WebWorkerUtil.Workload=Workload,function(){function WorkloadResult(result){Object.defineProperty(this,"Result",{get:function(){return result},enumerable:!0})}return Object.defineProperty(WorkloadResult.prototype,"Result",{get:function(){return null},enumerable:!1,configurable:!0}),__decorate([Accelatrix.Serialization.KnownType("WebWorkerUtil.WorkloadResult"),__metadata("design:paramtypes",[Object])],WorkloadResult)}());function IsPromise(obj){return null!=obj&&null!=obj.then&&obj.then instanceof Function&&null!=obj.catch&&obj.catch instanceof Function}function IsAwaitable(obj){return null!=obj&&null!=obj.GetAwaiter&&obj.GetAwaiter instanceof Function&&IsPromise(obj.GetAwaiter())}function IsTask(obj){return null!=obj&&null!=obj.Start&&obj.Start instanceof Function&&IsAwaitable(obj)}WebWorkerUtil.WorkloadResult=Workload,WebWorkerUtil.IsPromise=IsPromise,WebWorkerUtil.IsAwaitable=IsAwaitable,WebWorkerUtil.IsTask=IsTask}(WebWorkerUtil=WebWorkerUtil||{});`,workerId=0;function IsTask(obj){return WebWorkerUtil.IsTask(obj)}function IsNested(){return null!=self.__WebWorkerNestingLevel__}function Enqueue(task){Queue.Enqueue(task)}function RemovePendingTask(task){Queue.RemovePendingTask(task)}function CancelAll(){Queue.CancelAll()}function SpawnWorker(){var blob,workerCode='var __WebWorkerScripts__ = [{"SourceType":"PlainText","Contents": "'+ScriptHandler.ScriptContents().replace(/\\/g,"\\\\").replace(/\"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"}];\nvar __WebWorkerNestingLevel__ = '+(null==self.__WebWorkerNestingLevel__?0:self.__WebWorkerNestingLevel__+1)+";\nvar __WebWorkerId__ = "+workerId+++";\n"+ScriptHandler.ScriptContents()+"\n"+webWorkersCode,worker=null;if(null==Blob)worker=new Worker("data:text/javascript;charset=US-ASCII,"+encodeURIComponent(workerCode));else{try{blob=new Blob([workerCode],{type:"application/javascript"})}catch(e){(blob=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder)).append(workerCode),blob=blob.getBlob()}worker=new Worker(URL.createObjectURL(blob))}return worker}IsNested()||eval(webWorkersCode),TaskScheduler.config=new(function(){function TasksConfig(){}return Object.defineProperty(TasksConfig.prototype,"Scripts",{get:function(){return ScriptHandler.scriptSources},enumerable:!1,configurable:!0}),Object.defineProperty(TasksConfig.prototype,"MaxParallelism",{get:function(){if(null==maxParallelism)try{maxParallelism=null!=self&&null!=self.clientInformation&&1<self.clientInformation.hardwareConcurrency?2*self.clientInformation.hardwareConcurrency:IsNested()?2:8}catch(e){maxParallelism=IsNested()?2:8}return maxParallelism},set:function(value){value!=maxParallelism&&(maxParallelism=value)},enumerable:!1,configurable:!0}),TasksConfig}()),TaskScheduler.IsTask=IsTask,TaskScheduler.IsNested=IsNested,TaskScheduler.Enqueue=Enqueue,TaskScheduler.RemovePendingTask=RemovePendingTask,TaskScheduler.CancelAll=CancelAll;var Queue=(_a=function(){function TaskSchedulerQueue(){this.pending=[],this.workers=[],this.activeWorkers=0}return Object.defineProperty(TaskSchedulerQueue.prototype,"Pending",{get:function(){return this.pending},enumerable:!1,configurable:!0}),Object.defineProperty(TaskSchedulerQueue.prototype,"Workers",{get:function(){return this.workers},enumerable:!1,configurable:!0}),Object.defineProperty(TaskSchedulerQueue.prototype,"ActiveWorkers",{get:function(){return this.activeWorkers},set:function(value){this.activeWorkers=value},enumerable:!1,configurable:!0}),TaskSchedulerQueue.prototype.Enqueue=function(task){var _this=this;null!=task&&((task=task.GetType().IsArray?task:[task]).Where(function(z){return z.IsActionless&&z.Status==Tasks.TaskStatus.Created}).ForEach(function(z){z.Result=void 0}),(task=task.Where(function(z){return!(z.IsActionless&&z.Status==Tasks.TaskStatus.Created)}).ToList()).ForEach(function(z){Object.defineProperty(z,"Status",{get:function(){return Tasks.TaskStatus.WaitingToRun},configurable:!0}),_this.Pending.push(z)}),this.DequeueNext())},TaskSchedulerQueue.prototype.RemovePendingTask=function(task){var taskEntry,activeQ,me,timer;null!=task&&(null!=(taskEntry=this.Pending.Select(function(z,i){return{Task:z,Index:i}}).Where(function(z){return z.Task===task}).FirstOrNull())?this.Pending.splice(taskEntry.Index,1):null!=(activeQ=this.Workers.Where(function(z){return z.Task===task}).FirstOrNull())&&(activeQ.IsBusy?(me=this,timer=setTimeout(function(){null!=activeQ.Worker&&(activeQ.Worker.terminate(),null!=activeQ.Task)&&null==activeQ.Task.Exception&&(activeQ.Task.Exception=new Tasks.TaskAbortException),TaskScheduler.IsNested()?me.workers=me.Workers.Where(function(z){return z!=activeQ}).ToList():(activeQ.Worker=SpawnWorker(),activeQ.Task=null,activeQ.IsBusy=!1),--me.ActiveWorkers},TaskSchedulerQueue.CANCEL_TIMEOUT),activeQ.Task={Result:function(result){clearTimeout(timer),activeQ.Task=null}}):null!=activeQ&&(activeQ.Task=null),activeQ.Worker.postMessage("Abort")),this.DequeueNext())},Object.defineProperty(TaskSchedulerQueue.prototype,"MaxParallelismForChildren",{get:function(){return this.ActiveWorkers>=Tasks.Config.MaxParallelism?0:Math.floor(Math.sqrt(Tasks.Config.MaxParallelism-this.ActiveWorkers))},enumerable:!1,configurable:!0}),TaskSchedulerQueue.prototype.DequeueNext=function(){var nextTask,me,capacity,need,_this=this;ScriptHandler.ScriptsObtained()?0!=(need=this.Pending.length)&&(Tasks.Config.MaxParallelism<=0?(nextTask=this.Pending.shift(),me=this,WebWorkerUtil.WorkOnSequenceOfActivities(nextTask.Activity.Actions,nextTask.Activity.InputArguments,function(result,exception){setTimeout(function(){null!=exception?nextTask.Exception=exception:nextTask.Result=result,me.DequeueNext()},0)})):(capacity=Tasks.Config.MaxParallelism-this.ActiveWorkers)<=0||0!=(need=Accelatrix.Enumerable.Range(0,need<=capacity?need:capacity).Select(function(z){return _this.GetWorker()}).TakeWhile(function(z){return null!=z}).ToList()).length&&(this.ActiveWorkers+=need.length,need.ForEach(function(z){z.Task=_this.Pending.shift(),null==z.Task?z.IsBusy=!1:_this.AssignWork(z)}))):(me=this,ScriptHandler.GetScriptContents(function(){me.DequeueNext()}))},TaskSchedulerQueue.prototype.GetWorker=function(){var me,newWorker,available=this.Workers.Where(function(z){return null!=z.Worker}).Where(function(z){var isBusy=z.IsBusy;return 0==isBusy&&(z.IsBusy=!0),0==isBusy}).FirstOrNull();return null!=available?available:(me=this).Workers.length<Tasks.Config.MaxParallelism?((newWorker={Worker:SpawnWorker(),Task:null,IsBusy:!0,Culture:null}).Worker.onmessage=function(message){null!=newWorker.Task&&(message=Accelatrix.Serialization.FromJSON(message.data),newWorker.Task.Result=message.Result,newWorker.Task=null,--me.ActiveWorkers),newWorker.IsBusy=null==newWorker.IsBusy&&null,me.DequeueNext()},newWorker.Worker.onerror=function(exception){null!=newWorker.Task&&(newWorker.Task.Exception=null==exception.error?exception:exception.error,newWorker.Task=null),newWorker.IsBusy=!1,--me.ActiveWorkers,me.DequeueNext()},this.Workers.push(newWorker),newWorker):null},TaskSchedulerQueue.prototype.AssignWork=function(worker){Object.defineProperty(worker.Task,"Status",{get:function(){return Tasks.TaskStatus.Running},configurable:!0}),worker.IsBusy=!0;var task=worker.Task,task=new WebWorkerUtil.Workload(task.Activity.Actions,task.Activity.InputArguments,this.MaxParallelismForChildren,worker.Culture==Accelatrix.Globalization.DefaultFormatting?null:Accelatrix.Globalization.DefaultFormatting),task=(worker.Culture=Accelatrix.Globalization.DefaultFormatting,Accelatrix.Serialization.ToJSON(task));worker.Worker.postMessage(task)},TaskSchedulerQueue.prototype.CancelAll=function(){this.Pending.ForEach(function(z){return z.Cancel()}),this.Workers.Where(function(z){return z.IsBusy}).ForEach(function(z){return z.Task.Cancel()})},TaskSchedulerQueue.prototype.KillAll=function(){this.pending=[],this.Workers.Where(function(z){return null!=z.Worker}).ForEach(function(z){return z.Worker.terminate()}),this.workers=[],this.ActiveWorkers=0},TaskSchedulerQueue}(),_a.CANCEL_TIMEOUT=null==self.__WebWorkerNestingLevel__?2e3:2e3/(self.__WebWorkerNestingLevel__*(1+self.__WebWorkerNestingLevel__)),new _a)}(TaskScheduler=TaskScheduler||{}),!function(ScriptHandler){ScriptHandler.scriptSources=(TaskScheduler.IsNested()?(result=self.__WebWorkerScripts__,Object.defineProperty(result,"push",{enumerable:!1,value:function(){}})):(originalPush=(result=[function(){if(!TaskScheduler.IsNested()){var accelatrixLocation=document.currentScript;if(null==accelatrixLocation)for(var scripts=document.querySelectorAll("script"),i=0;i<scripts.length;i++){if(null!=scripts[i].getAttribute("src")&&0<=scripts[i].getAttribute("src").toLocaleLowerCase().indexOf("accelatrix"))return{SourceType:Tasks.TaskScriptSource.Url,Contents:scripts[i].getAttribute("src")};if(null!=scripts[i].innerText&&0<=scripts[i].innerText.indexOf("Accelatrix"))return{SourceType:Tasks.TaskScriptSource.PlainText,Contents:scripts[i].innerText}}else{if(null!=accelatrixLocation.innerText&&0<=accelatrixLocation.innerText.indexOf("Accelatrix"))return{SourceType:Tasks.TaskScriptSource.PlainText,Contents:accelatrixLocation.innerText};if(null!=accelatrixLocation.getAttribute("src"))return{SourceType:Tasks.TaskScriptSource.Url,Contents:accelatrixLocation.getAttribute("src")}}throw new Accelatrix.Exception("Could not initialize Accelatrix.Tasks since the <script> element hosting Accelatrix could not be determined.\nPlease add it manually to Accelatrix.Tasks.Scripts.")}}()]).push.bind(result),Object.defineProperty(result,"push",{enumerable:!1,value:function(entry){null==entry||String.IsNullOrWhiteSpace(entry.SourceType)||String.IsNullOrWhiteSpace(entry.Contents)||(originalPush(entry),null!=scriptContents&&(scriptContents=void 0))}})),result);var result,originalPush,scriptContents=void 0;function GetScripts(callback){var sourceCount,result,checkEnded,loadScripts;void 0===scriptContents&&(scriptContents=null,sourceCount=ScriptHandler.scriptSources.length,result=[],checkEnded=function(){var fromIndex_1;result.length>=sourceCount&&(result.length<ScriptHandler.scriptSources.length?(fromIndex_1=sourceCount,sourceCount=ScriptHandler.scriptSources.length,loadScripts(fromIndex_1)):(scriptContents=result.OrderBy(function(z){return z.Index}).Select(function(z){return z.Contents}).ToList(),null!=callback&&callback()))},(loadScripts=function(fromIndex){ScriptHandler.scriptSources.Skip(fromIndex).ForEach(function(z,i){if(z.SourceType==Tasks.TaskScriptSource.PlainText)result.push({Index:fromIndex+i,Contents:fromIndex+i==0?UnpackJustAccelatrix(z.Contents):z.Contents});else{var xmlhttp,z=z.Contents,cache=!0,callback=function(r,e){if(null!=e)throw new Error(e);result.push({Index:fromIndex+i,Contents:fromIndex+i==0?UnpackJustAccelatrix(r):r}),checkEnded()};try{xmlhttp=null!=self.XMLHttpRequest?new XMLHttpRequest:new self.ActiveXObject("Microsoft.XMLHTTP")}catch(e){return void callback(null,e)}xmlhttp.onreadystatechange=function(){if(null!=xmlhttp&&xmlhttp.readyState==XMLHttpRequest.DONE)if(200==xmlhttp.status)callback(xmlhttp.responseText,null);else{var errorObj;try{errorObj=JSON.parse(xmlhttp.responseText)}catch(e){errorObj=xmlhttp.responseText}callback(null,errorObj)}},cache||(z+="?_"+Math.random()),xmlhttp.open("GET",z,!0),xmlhttp.send()}}),checkEnded()})(0))}function UnpackJustAccelatrix(contents){var start,end;return null==contents?"":(start=(start=contents.indexOf("var Accelatrix,__extends=this"))<0?contents.indexOf("var __extends = (this"):start)<0||(end=(end=28+contents.lastIndexOf("(Accelatrix=Accelatrix||{});"))<28?contents.lastIndexOf("(Accelatrix || (Accelatrix = {}));")+34:end)<0?contents:contents.substring(start,end)}ScriptHandler.ScriptsObtained=function(){return null!=scriptContents},ScriptHandler.ScriptContents=function(){return null==scriptContents?"":scriptContents.join("\n")},ScriptHandler.GetScriptContents=function(callback){null!=scriptContents&&0<scriptContents.length?null!=callback&&callback(scriptContents.join("\n")):GetScripts(function(){null!=callback&&callback(scriptContents.join("\n"))})}}(ScriptHandler=ScriptHandler||{})}(Accelatrix=Accelatrix||{});